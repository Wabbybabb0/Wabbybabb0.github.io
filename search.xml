<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å…¥åŸâ€”â€”â€”AlexNetæ¨¡å‹å¤ç°</title>
      <link href="/2023/12/27/ru-fen-alexnet-mo-xing-fu-xian/"/>
      <url>/2023/12/27/ru-fen-alexnet-mo-xing-fu-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="1-åˆ›å»ºnet"><a href="#1-åˆ›å»ºnet" class="headerlink" title="1 åˆ›å»ºnet"></a>1 åˆ›å»ºnet</h1><h2 id="1-1-torch-nn-Module"><a href="#1-1-torch-nn-Module" class="headerlink" title="1.1 torch.nn.Module()"></a>1.1 torch.nn.Module()</h2><p><strong>Base class for all neural network modules</strong></p><h3 id="1-1-1-Variables"><a href="#1-1-1-Variables" class="headerlink" title="1.1.1 Variables"></a>1.1.1 Variables</h3><ol><li><code>cuda(device=None)</code><br>Moves all model parameters and buffers to the GPU<br>å°†æ‰€æœ‰æ¨¡å‹å‚æ•°å’Œç¼“å†²åŒºç§»è‡³ GPU</li><li><code>eval()</code><br>Sets the module in evaluation mode<br>å°†æ¨¡å—è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ ^eval</li><li><code>forward()</code><br>Defines the computation performed at every call.<br>å®šä¹‰æ¯æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œçš„è®¡ç®— ^forward</li></ol><h2 id="1-2-é˜…è¯»è®ºæ–‡åå¾—åˆ°netçš„å‚æ•°"><a href="#1-2-é˜…è¯»è®ºæ–‡åå¾—åˆ°netçš„å‚æ•°" class="headerlink" title="1.2 é˜…è¯»è®ºæ–‡åå¾—åˆ°netçš„å‚æ•°"></a>1.2 é˜…è¯»è®ºæ–‡åå¾—åˆ°netçš„å‚æ•°</h2><p>å…³æ³¨$C_{in}$ã€$C_{out}$ã€$kernel_size$ã€$padding$ã€$stride$<br>å…¶ä¸­ï¼Œ$stride$éœ€è¦æ ¹æ®å…¬å¼è®¡ç®—å¾—å‡º<br>![[a0dda904b7f38e1eea5ebad874024a7.jpg]]</p><h2 id="1-3-ç¼–å†™init"><a href="#1-3-ç¼–å†™init" class="headerlink" title="1.3 ç¼–å†™init"></a>1.3 ç¼–å†™init</h2><p>å®šä¹‰æ¯ä¸ªæ­¥éª¤çš„å…·ä½“æ‰§è¡Œè¿‡ç¨‹<br>e.g.</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">self<span class="token punctuation">.</span>c1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">48</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œè§„å®š<code>c1</code>çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æ¥æ”¶è¾“å…¥é€šé“ä¸º$3$çš„å›¾åƒï¼Œç”¨<code>size</code>ä¸º$11$çš„<code>kernel</code>â€¦æœ€åä»¥è¾“å‡ºé€šé“ä¸º$48$ä½œä¸ºè¾“å‡º</p><h2 id="1-4-ç¼–å†™forward"><a href="#1-4-ç¼–å†™forward" class="headerlink" title="1.4 ç¼–å†™forward"></a>1.4 ç¼–å†™forward</h2><p>[[#^forward]]<br>æŒ‰ç…§å·ç§¯çš„é¡ºåºè¿›è¡Œxçš„æ›´è¿­</p><h2 id="1-5-æµ‹è¯•"><a href="#1-5-æµ‹è¯•" class="headerlink" title="1.5 æµ‹è¯•"></a>1.5 æµ‹è¯•</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å½“è¿™æ®µä»£ç åªåœ¨ç›´æ¥è¿è¡Œå½“å‰è„šæœ¬æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå¦‚æœå½“å‰è„šæœ¬è¢«å…¶ä»–è„šæœ¬å¼•å…¥ä½œä¸ºæ¨¡å—ä½¿ç”¨ï¼Œåˆ™è¿™éƒ¨åˆ†ä»£ç ä¸ä¼šæ‰§è¡Œã€‚<br>é€šå¸¸ä¼šå¯¹<code>x</code>å’Œ<code>y</code>èµ‹äºˆç®€å•çš„æ•°å­—å¯¹<code>net</code>è¿›è¡Œæµ‹è¯•</p><h1 id="2-åˆ’åˆ†æ•°æ®é›†"><a href="#2-åˆ’åˆ†æ•°æ®é›†" class="headerlink" title="2 åˆ’åˆ†æ•°æ®é›†"></a>2 åˆ’åˆ†æ•°æ®é›†</h1><h2 id="2-1-åˆ›å»ºæ–‡ä»¶"><a href="#2-1-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="2.1 åˆ›å»ºæ–‡ä»¶"></a>2.1 åˆ›å»ºæ–‡ä»¶</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶  </span><span class="token keyword">def</span> <span class="token function">mkfile</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>          os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>cla = [Cat, Dog]</li><li><code>data/train/</code>+<code>cla</code><ul><li><code>data/train/Cat</code></li><li><code>data/train/Dog</code></li><li><code>data/val/Cat</code></li><li><code>dara/val/Dog</code></li></ul></li></ul><h2 id="2-2-éå†ä¸åˆ’åˆ†"><a href="#2-2-éå†ä¸åˆ’åˆ†" class="headerlink" title="2.2 éå†ä¸åˆ’åˆ†"></a>2.2 éå†ä¸åˆ’åˆ†</h2><ol><li>éå†æ‰€æœ‰ç±»åˆ«çš„å›¾åƒ<br><code>images</code>å­˜å‚¨äº†åŸå§‹dataä¸‹<code>cla</code>åˆ†åˆ«ä¸º<code>Cat</code>å’Œ<code>Dog</code>çš„å›¾åƒåç§°</li><li>æŒ‰æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†<br><code>eval_index</code>æ˜¯<code>images</code>ä¸­çš„éšæœºæŠ½å–çš„$\dfrac{2}{10}$çš„å›¾åƒåç§°çš„é›†åˆ</li></ol><p>éšåå†æ¬¡éå†<code>images</code></p><ul><li>å¦‚æœå›¾åƒçš„åå­—åœ¨<code>eval_index</code>ä¸­å­˜åœ¨ï¼Œåˆ™å°†è¿™ä¸ªå›¾åƒå¤åˆ¶åˆ°æ–°è·¯å¾„<code>data/val/+cla</code>(<code>val</code>ä¸­<code>Cat</code>æˆ–<code>Dog</code>çš„æ–‡ä»¶ä¸‹)</li><li>å¦‚æœä¸åœ¨<code>eval_index</code>ä¸­å­˜åœ¨ï¼Œåˆ™å¤åˆ¶åˆ°<code>data/train/+cla</code>ä¸­</li></ul><h1 id="3-ç¼–å†™train-py"><a href="#3-ç¼–å†™train-py" class="headerlink" title="3 ç¼–å†™train.py"></a>3 ç¼–å†™train.py</h1><h2 id="3-1-ç”¨åˆ°çš„åº“"><a href="#3-1-ç”¨åˆ°çš„åº“" class="headerlink" title="3.1 ç”¨åˆ°çš„åº“"></a>3.1 ç”¨åˆ°çš„åº“</h2><h3 id="3-1-1-torchvision-transforms"><a href="#3-1-1-torchvision-transforms" class="headerlink" title="3.1.1 torchvision.transforms"></a>3.1.1 torchvision.transforms</h3><ol><li><p>.Normalize(<em>mean, std, inplace=False</em>)<br>ps: Itâ€™s scriptable transforms, which canâ€™t use [[#^Compose]]    :)<br>å½’ä¸€åŒ–å¤„ç†<br>output[channel] = (input[channel] - mean[channel] / std[channel])<br>^normalize</p></li><li><p>.Compose(<em>transforms</em>)<br>Composes several transforms together.This transform does not support torchscript.<br>^Compose</p></li></ol><h2 id="3-1-å¯¹å›¾åƒåƒç´ å½’ä¸€åŒ–å¤„ç†"><a href="#3-1-å¯¹å›¾åƒåƒç´ å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="3.1 å¯¹å›¾åƒåƒç´ å½’ä¸€åŒ–å¤„ç†"></a>3.1 å¯¹å›¾åƒåƒç´ å½’ä¸€åŒ–å¤„ç†</h2><p>[[#^normalize]]</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">normalize <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Normalize<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># å‡0.5å†é™¤0.5æœ€åå½’ä¸€åŒ–åˆ°[-1, 1]ä¹‹é—´</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3-2-è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†"><a href="#3-2-è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†" class="headerlink" title="3.2 è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†"></a>3.2 è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è®­ç»ƒé›†é¢„å¤„ç†  </span>train_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>      transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># Resize the input image to the given size.å› æ­¤å°†å‚æ•°è®¾ç½®ä¸ºè®ºæ–‡ä¸­ç½‘ç»œè¾“å…¥çš„å‚æ•°å¤§å°  </span>    transforms<span class="token punctuation">.</span>RandomVerticalFlip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># éšæœºå‚ç›´æ—‹è½¬ï¼Œä½¿æ•°æ®é›†æ›´å¤š  </span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># è½¬æ¢ä¸ºå¼ é‡  </span>    normalize  <span class="token comment"># å½’ä¸€åŒ–  </span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">#éªŒè¯é›†é¢„å¤„ç†  </span>val_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>      transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      normalize  <span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>[[#^Compose]]<br>åˆ›å»ºæ•°æ®é›†ğŸ‘‡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">train_dataset <span class="token operator">=</span> ImageFolder<span class="token punctuation">(</span>ROOT_TRAIN<span class="token punctuation">,</span> transform<span class="token operator">=</span>train_transform<span class="token punctuation">)</span>  val_dataset <span class="token operator">=</span> ImageFolder<span class="token punctuation">(</span>ROOT_TEST<span class="token punctuation">,</span> transform<span class="token operator">=</span>val_transform<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>ImageFolder</code>ç”¨äºåˆ›å»ºä¸€ä¸ªæ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«äº†å›¾åƒæ•°æ®å’Œç›¸åº”çš„æ ‡ç­¾</p><p>ğŸ‘‡è®¾ç½®æ‰¹é‡åŠ è½½</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  val_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>val_dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>DataLoader</code>ç”¨äºä»æ•°æ®é›†ä¸­åŠ è½½æ‰¹é‡æ•°æ®çš„å·¥å…·<br>æ¯æ‰¹æ•°æ®æœ‰32ä¸ªæ ·æœ¬<br><code>shuffle=True</code>è¡¨ç¤ºæ¯ä¸ª<code>epoch</code>å¼€å§‹å‰å¯¹æ•°æ®ç»§ç»­éšæœºæ’åº</p><h2 id="3-4-ä½¿ç”¨GPUåŠ è½½æ•°æ®"><a href="#3-4-ä½¿ç”¨GPUåŠ è½½æ•°æ®" class="headerlink" title="3.4 ä½¿ç”¨GPUåŠ è½½æ•°æ®"></a>3.4 ä½¿ç”¨GPUåŠ è½½æ•°æ®</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">device <span class="token operator">=</span> <span class="token string">'cuda'</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">'cpu'</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>device<span class="token punctuation">)</span>  model <span class="token operator">=</span> MyAlexNet<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>  <span class="token comment"># å°†'MyAlexNet'å®ä¾‹åŒ–å¯¹è±¡ç§»åŠ¨åˆ°'device'ä¸Š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3-5-å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨å¹¶è®¾ç½®å­¦ä¹ ç‡"><a href="#3-5-å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨å¹¶è®¾ç½®å­¦ä¹ ç‡" class="headerlink" title="3.5 å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨å¹¶è®¾ç½®å­¦ä¹ ç‡"></a>3.5 å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨å¹¶è®¾ç½®å­¦ä¹ ç‡</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å®šä¹‰ä¸€ä¸ªæŸå¤±å‡½æ•°  </span>loss_fn <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># å®šä¹‰ä¸€ä¸ªä¼˜åŒ–å™¨  </span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span> momentum<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">)</span>  <span class="token comment"># å°†æ¨¡å‹å‚æ•°ä¼ ç»™ä¼˜åŒ–å™¨  </span><span class="token comment"># å­¦ä¹ ç‡æ¯éš”10è½®å˜ä¸ºåŸæ¥çš„0.5  </span>lr_scheduler <span class="token operator">=</span> lr_scheduler<span class="token punctuation">.</span>StepLR<span class="token punctuation">(</span>optimizer<span class="token punctuation">,</span> step_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> gamma<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment"># å¸®åŠ©ä¼˜åŒ–å™¨å†è®­ç»ƒè¿‡ç¨‹ä¸­é€æ­¥å‡å°å­¦ä¹ ç‡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-6-å®šä¹‰è®­ç»ƒå‡½æ•°å’ŒæŸå¤±å‡½æ•°"><a href="#3-6-å®šä¹‰è®­ç»ƒå‡½æ•°å’ŒæŸå¤±å‡½æ•°" class="headerlink" title="3.6 å®šä¹‰è®­ç»ƒå‡½æ•°å’ŒæŸå¤±å‡½æ•°"></a>3.6 å®šä¹‰è®­ç»ƒå‡½æ•°å’ŒæŸå¤±å‡½æ•°</h2><p>â‘ ä»<code>dataloader</code>ä¸­å–å‡ºå›¾åƒæ•°æ®å’Œå¯¹åº”çš„æ ‡ç­¾<br>â‘¡è®¡ç®—<code>cur_loss</code>å’Œ<code>cur_acc</code>^train</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>dataloader<span class="token punctuation">,</span> model<span class="token punctuation">,</span> loss_fn<span class="token punctuation">,</span> optimizer<span class="token punctuation">)</span><span class="token punctuation">:</span>loss<span class="token punctuation">,</span> current<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0</span>  <span class="token keyword">for</span> batch<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>dataloader<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å°†æ•°æ®å–å‡ºæ¥è®­ç»ƒ  </span>    image<span class="token punctuation">,</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>      output <span class="token operator">=</span> model<span class="token punctuation">(</span>image<span class="token punctuation">)</span>      cur_loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>output<span class="token punctuation">,</span> y<span class="token punctuation">)</span>      _<span class="token punctuation">,</span> pred <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>      cur_acc <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>y<span class="token operator">==</span>pred<span class="token punctuation">)</span><span class="token operator">/</span>output<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢åå‘ä¼ æ’­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åå‘ä¼ æ’­  </span>optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>  cur_loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>  optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>â‘£è®¡ç®—$\dfrac{æ‰€æœ‰æŸå¤±å€¼}{ä¸ªæ•°}$å’Œ$\dfrac{æ‰€æœ‰æ­£ç¡®å€¼}{ä¸ªæ•°}$</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">loss <span class="token operator">+=</span> cur_loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>  current <span class="token operator">+=</span> cur_acc<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>  n <span class="token operator">=</span> n<span class="token operator">+</span><span class="token number">1</span>train_loss <span class="token operator">=</span> loss <span class="token operator">/</span> n  train_acc <span class="token operator">=</span> current <span class="token operator">/</span> n  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'train_loss'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>train_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'train_acc'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>train_acc<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> train_loss<span class="token punctuation">,</span> train_acc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸå¤±å‡½æ•°é™¤äº†ä¸éœ€è¦åå‘ä¼ æ’­ï¼Œå…¶ä»–éƒ½å’Œè®­ç»ƒå‡½æ•°ç±»ä¼¼</p><h2 id="3-7-å®šä¹‰ç”»å›¾å‡½æ•°"><a href="#3-7-å®šä¹‰ç”»å›¾å‡½æ•°" class="headerlink" title="3.7 å®šä¹‰ç”»å›¾å‡½æ•°"></a>3.7 å®šä¹‰ç”»å›¾å‡½æ•°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å®šä¹‰ä¸€ä¸ªç”»å›¾å‡½æ•°  </span><span class="token keyword">def</span> <span class="token function">matplot_loss</span><span class="token punctuation">(</span>train_loss<span class="token punctuation">,</span> val_loss<span class="token punctuation">)</span><span class="token punctuation">:</span>      plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>train_loss<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'train_loss'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>val_loss<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'val_loss'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'loss'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'epoch'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"è®­ç»ƒé›†å’ŒéªŒè¯é›†losså€¼å¯¹æ¯”å›¾"</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">matplot_acc</span><span class="token punctuation">(</span>train_acc<span class="token punctuation">,</span> val_acc<span class="token punctuation">)</span><span class="token punctuation">:</span>      plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>train_acc<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'train_acc'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>val_acc<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'val_acc'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'acc'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'epoch'</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"è®­ç»ƒé›†å’ŒéªŒè¯é›†accå€¼å¯¹æ¯”å›¾"</span><span class="token punctuation">)</span>      plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-8-å¼€å§‹è®­ç»ƒ"><a href="#3-8-å¼€å§‹è®­ç»ƒ" class="headerlink" title="3.8 å¼€å§‹è®­ç»ƒ"></a>3.8 å¼€å§‹è®­ç»ƒ</h2><p>â‘ åˆå§‹åŒ–å››ä¸ª<code>list</code>ï¼Œå®šä¹‰<code>epoch</code>å’Œ<code>min_acc</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">loss_train <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  acc_train <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  loss_val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  acc_val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>epoch <span class="token operator">=</span> <span class="token number">20</span>  min_acc <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># æœ€å°ç²¾ç¡®åº¦ï¼Œæ‰¾å‡ºæœ€å¥½çš„æ¨¡å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡è°ƒç”¨<code>train</code>å’Œ<code>val</code>å‡½æ•°è¿›è¡Œè®­ç»ƒ<br>[[#^train]]</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> t <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>      lr_scheduler<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"epoch</span><span class="token interpolation"><span class="token punctuation">{</span>t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">\n-------"</span></span><span class="token punctuation">)</span>      train_loss<span class="token punctuation">,</span> train_acc <span class="token operator">=</span> train<span class="token punctuation">(</span>train_dataloader<span class="token punctuation">,</span> model<span class="token punctuation">,</span> loss_fn<span class="token punctuation">,</span> optimizer<span class="token punctuation">)</span>      val_loss<span class="token punctuation">,</span> val_acc <span class="token operator">=</span> val<span class="token punctuation">(</span>val_dataloader<span class="token punctuation">,</span> model<span class="token punctuation">,</span> loss_fn<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢è®¡ç®—å¾—åˆ°çš„<code>train_loss</code>ã€<code>train_acc</code>ã€<code>val_loss</code>ã€<code>val_acc</code>åˆ†åˆ«æ”¾å…¥åˆ°åˆå§‹åŒ–çš„å››ä¸ª<code>list</code>ä¸­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ—è¡¨  </span>loss_train<span class="token punctuation">.</span>append<span class="token punctuation">(</span>train_loss<span class="token punctuation">)</span>  acc_train<span class="token punctuation">.</span>append<span class="token punctuation">(</span>train_acc<span class="token punctuation">)</span>  loss_val<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val_loss<span class="token punctuation">)</span>  acc_val<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val_acc<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘£ä¿å­˜æœ€å¥½çš„æƒé‡å’Œæœ€åä¸€è½®çš„æƒé‡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä¿å­˜æœ€å¥½çš„æƒé‡  </span><span class="token keyword">if</span> val_acc <span class="token operator">&gt;</span> min_acc<span class="token punctuation">:</span>      folder <span class="token operator">=</span> <span class="token string">'save_model'</span>      <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>folder<span class="token punctuation">)</span><span class="token punctuation">:</span>          os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">'save_model'</span><span class="token punctuation">)</span>      min_acc <span class="token operator">=</span> val_acc      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"save best model, ç¬¬</span><span class="token interpolation"><span class="token punctuation">{</span>t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">è½®"</span></span><span class="token punctuation">)</span>      torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>model<span class="token punctuation">.</span>state_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'save_model/best_model.pth'</span><span class="token punctuation">)</span>  <span class="token comment"># ä¿å­˜æœ€åä¸€è½®çš„æƒé‡æ–‡ä»¶  </span><span class="token keyword">if</span> t <span class="token operator">==</span> epoch<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>      torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>model<span class="token punctuation">.</span>state_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'save_model/last_model.pth'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæœ‰<code>val_acc</code>(æŸä¸€ä¸ªè½®æ¬¡è®­ç»ƒå¾—åˆ°çš„)å¤§äº<code>min_acc</code>ï¼Œåˆ™è¯´æ˜è¯¥æ¬¡çš„è®­ç»ƒæ•ˆæœæš‚æ—¶æ˜¯ç›®å‰æœ€å¥½çš„ï¼Œä¿å­˜åˆ°<code>.save_model/best_model.pth</code>ä¸­</p><h2 id="3-9-ç”»å›¾"><a href="#3-9-ç”»å›¾" class="headerlink" title="3.9 ç”»å›¾"></a>3.9 ç”»å›¾</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">matplot_loss<span class="token punctuation">(</span>loss_train<span class="token punctuation">,</span> loss_val<span class="token punctuation">)</span>  matplot_acc<span class="token punctuation">(</span>acc_train<span class="token punctuation">,</span> acc_val<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="4-ç¼–å†™test-py"><a href="#4-ç¼–å†™test-py" class="headerlink" title="4 ç¼–å†™test.py"></a>4 ç¼–å†™test.py</h1><h2 id="4-1-è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†ã€è°ƒç”¨GPU"><a href="#4-1-è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†ã€è°ƒç”¨GPU" class="headerlink" title="4.1 è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†ã€è°ƒç”¨GPU"></a>4.1 è®­ç»ƒé›†å’ŒéªŒè¯é›†é¢„å¤„ç†ã€è°ƒç”¨GPU</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">train_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>      transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># Resize the input image to the given size.å› æ­¤å°†å‚æ•°è®¾ç½®ä¸ºè®ºæ–‡ä¸­ç½‘ç»œè¾“å…¥çš„å‚æ•°å¤§å°  </span>    transforms<span class="token punctuation">.</span>RandomVerticalFlip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># éšæœºå‚ç›´æ—‹è½¬ï¼Œä½¿æ•°æ®é›†æ›´å¤š  </span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># è½¬æ¢ä¸ºå¼ é‡  </span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">#éªŒè¯é›†é¢„å¤„ç†  </span>val_transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>      transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      normalize  <span class="token punctuation">]</span><span class="token punctuation">)</span>train_dataset <span class="token operator">=</span> ImageFolder<span class="token punctuation">(</span>ROOT_TRAIN<span class="token punctuation">,</span> transform<span class="token operator">=</span>train_transform<span class="token punctuation">)</span>  val_dataset <span class="token operator">=</span> ImageFolder<span class="token punctuation">(</span>ROOT_TEST<span class="token punctuation">,</span> transform<span class="token operator">=</span>val_transform<span class="token punctuation">)</span>    train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  val_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>val_dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    device <span class="token operator">=</span> <span class="token string">'cuda'</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">'cpu'</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>device<span class="token punctuation">)</span>  model <span class="token operator">=</span> MyAlexNet<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>  <span class="token comment"># å°†'MyAlexNet'å®ä¾‹åŒ–å¯¹è±¡ç§»åŠ¨åˆ°'device'ä¸Š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-2-åŠ è½½æ¨¡å‹"><a href="#4-2-åŠ è½½æ¨¡å‹" class="headerlink" title="4.2 åŠ è½½æ¨¡å‹"></a>4.2 åŠ è½½æ¨¡å‹</h2><p>åŠ è½½<code>best_model.pth</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"E:/Project/Cat_and_Dog_Classification/save_model/best_model.pth"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4-3-éªŒè¯é˜¶æ®µ"><a href="#4-3-éªŒè¯é˜¶æ®µ" class="headerlink" title="4.3 éªŒè¯é˜¶æ®µ"></a>4.3 éªŒè¯é˜¶æ®µ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">3010</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      x<span class="token punctuation">,</span> y <span class="token operator">=</span> val_dataset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val_dataset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># xä¸ºç¬¬iå¼ ç…§ç‰‡çš„çš„å›¾ç‰‡ï¼Œyä¸ºç¬¬iå¼ å›¾ç‰‡çš„æ ‡ç­¾  </span>    show<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>      x <span class="token operator">=</span> Variable<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span>x<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>      x <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>model.eval()</code><br>[[#^eval]]<br><code>torch.unsqueeze(x, dim=0)</code>å°†<code>x</code>åœ¨ç»´åº¦0ä¸Šæ·»åŠ ä¸€ä¸ªç»´åº¦ï¼Œå¤§å°ä¸º1(æ‰¹æ¬¡ç»´åº¦)</p><p>åœ¨ç¦æ­¢æ¢¯åº¦è®¡ç®—çš„æƒ…å†µä¸‹å¾—åˆ°<code>predicted</code>å’Œ<code>actual</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      pred <span class="token operator">=</span> model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>      predicted<span class="token punctuation">,</span> actual <span class="token operator">=</span> classes<span class="token punctuation">[</span>torch<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> classes<span class="token punctuation">[</span>y<span class="token punctuation">]</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'predicted:"</span><span class="token interpolation"><span class="token punctuation">{</span>predicted<span class="token punctuation">}</span></span><span class="token string">", Actual:"</span><span class="token interpolation"><span class="token punctuation">{</span>actual<span class="token punctuation">}</span></span><span class="token string">"'</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>pred</code>ï¼š<code>tensor([[-2.1302,  2.3210]], device='cuda:0')</code><br><code>y</code>ï¼š<code>0</code>(Cat)æˆ–è€…<code>1</code>(Dog)</p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”CNN(æå®æ¯…)</title>
      <link href="/2023/11/19/ru-men-cnn-li-hong-yi/"/>
      <url>/2023/11/19/ru-men-cnn-li-hong-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Image-Classification"><a href="#1-Image-Classification" class="headerlink" title="1 Image Classification"></a>1 Image Classification</h1><p>ä¸€å¼ 100x100pixelsçš„å›¾ç‰‡å…¶å®æ˜¯ä¸€ä¸ª3D-tensorï¼š<br>â‘ å›¾ç‰‡çš„é«˜<code>100</code>â‘¡å›¾ç‰‡çš„å®½<code>100</code>â‘¢3 channels<code>RGB</code><br>![[Pasted image 20231104203002.png|350]]<br>æ¯ä¸€ä¸ªæ•°å€¼ä»£è¡¨æŸä¸€ä¸ªé¢œè‰²æŸä¸€ä¸ªpixelçš„å¼ºåº¦</p><h1 id="2-Image-Feature-Observation"><a href="#2-Image-Feature-Observation" class="headerlink" title="2 Image Feature Observation"></a>2 Image Feature Observation</h1><h2 id="2-1-Observation-1"><a href="#2-1-Observation-1" class="headerlink" title="2.1 Observation 1"></a>2.1 Observation 1</h2><ol><li>Identifying some critical patterns<br> æ¯”å¦‚è¯´ä¸€åªé¸Ÿï¼Œåªç”¨çœ‹é¸Ÿå˜´ã€çœ¼ç›å’Œè„šä¹Ÿèƒ½å¤§è‡´è¾¨è®¤å‡ºæ¥<br> A neuron does not have to see the whole image</li><li>Simplification<br> è®¾å®šä¸€ä¸ªåŒºåŸŸä¸ºReceptive fieldï¼Œæ¯ä¸€ä¸ªneuronåªå…³å¿ƒè‡ªå·±çš„Receptive fieldã€‚<br> Receptive field can be overlapped<br> neuron can have the same receptive field<br> <img src="/%E5%85%A5%E9%97%A8%E2%80%94%E2%80%94%E2%80%94%E2%80%94CNN(%E6%9D%8E%E5%AE%8F%E6%AF%85">/Pasted image 20231104204207.png)</li><li>Simplification 1-Typical Setting</li><li>ä¼šçœ‹all channelsï¼Œä¸ç”¨ææ·±åº¦ï¼Œé«˜å’Œå®½åˆèµ·æ¥å«kernel size</li><li>Each receptive field has a set of neurons</li><li>å¹³ç§»receptive fieldï¼Œæ­¥é•¿ä¸ºstrideï¼Œreceprive fieldæœ‰é‡å ï¼Œé˜²æ­¢äº¤ç•Œå¤„æœ‰patternæ²¡è¢«neuronä¾¦æµ‹åˆ°</li><li>å¹³ç§»æ—¶è¶…å‡ºèŒƒå›´äº†ï¼Œç”¨å¡«è¡¥0ä»£æ›¿è¶…å‡ºçš„èŒƒå›´(æ–¹æ³•ä¸å”¯ä¸€)</li></ol><h2 id="2-2-Observation-2"><a href="#2-2-Observation-2" class="headerlink" title="2.2 Observation 2"></a>2.2 Observation 2</h2><ol><li>The same patterns appear in different regions<br> ğŸ‘‡solution: parameter sharing<br> çº¿æ¡ä»£è¡¨weightï¼Œç›¸åŒé¢œè‰²ä»£è¡¨weightä¸€æ ·ï¼Œå®ˆå¤‡çš„receptive fieldä¸ä¸€æ ·ï¼Œå‚æ•°ä¸€æ ·ï¼Œå› ä¸ºè¾“å…¥ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¾“å‡ºä¹Ÿä¸ä¸€æ ·<br> ![[Pasted image 20231104215341.png|475]]</li><li>Simplification 2-Typical Setting<ol><li>æ¯ä¸€ä¸ªreceptive fieldéƒ½æœ‰ä¸€ç»„neurons</li><li>ç›¸åŒé¢œè‰²çš„åœ†åœˆä»£è¡¨å…±äº«ä¸€æ ·çš„å‚æ•°çš„neurons</li><li>æ¯ä¸€ä¸ªreceptive fieldéƒ½åªæœ‰ä¸€ç»„å‚æ•°ï¼Œè¿™äº›å‚æ•°å«filter x<br> ![[Pasted image 20231104215840.png|500]]</li></ol></li></ol><h2 id="2-3-Obeservation-3"><a href="#2-3-Obeservation-3" class="headerlink" title="2.3 Obeservation 3"></a>2.3 Obeservation 3</h2><p>Subsampling the pixels will not change the object<br>e.g.æ‹¿æ‰imageå¥‡æ•°è¡Œå’Œå¶æ•°åˆ—çš„pixelsï¼Œå›¾ç‰‡å˜æˆåŸæ¥çš„$\frac{1}{4}$å¤§å°</p><h1 id="3-Benefit-of-Convolutional-Layer"><a href="#3-Benefit-of-Convolutional-Layer" class="headerlink" title="3 Benefit of Convolutional Layer"></a>3 Benefit of Convolutional Layer</h1><ul><li><code>Fully Connected Layer</code>ä¸éœ€è¦çœ‹æ•´ä¸ªå›¾ç‰‡ï¼Œåªéœ€è¦é‡è¦çš„patternğŸ‘‰<code>receptive field</code>æŸä¸€äº›neuronsä¸€å®šè¦ä¸€æ‘¸ä¸€æ ·ğŸ‘‰<code>parameter sharing</code></li><li><code>receptive field</code>+<code>parameter sharing</code>=<code>convolutional layer</code>ï¼Œè™½ç„¶ä¼šæœ‰è¾ƒå¤§çš„model biasï¼Œä½†æ˜¯convolutional layeræ˜¯ä¸“é—¨ä¸ºå½±åƒè®¾è®¡çš„ï¼Œæ‰€ä»¥ç”¨åœ¨imageä¸Šåå·®ä¸ä¼šå¾ˆå¤§</li><li>ç”¨<code>convolutional layer</code>çš„networkå«åš<code>CNN</code></li></ul><h1 id="4-Multiple-Convolutional-Layers"><a href="#4-Multiple-Convolutional-Layers" class="headerlink" title="4 Multiple Convolutional Layers"></a>4 Multiple Convolutional Layers</h1><ul><li>nä¸ªfilterså¯å½¢æˆfeature map with n channels</li><li>![[Pasted image 20231104223016.png|425]]<ol><li>å…ˆæ˜¯å°†<code>RGB</code>å›¾ç‰‡æ”¾å…¥convolutioné‡Œï¼Œå‡è®¾æœ‰64ä¸ªfilter(æ¯ä¸ªfilteréƒ½æ˜¯3x3x3)ï¼Œé‚£ä¹ˆå°±ä¼šå¾—åˆ°ä¸€ä¸ª feature map(å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ–°çš„å›¾ç‰‡ï¼Œåªæ˜¯ä»–çš„channelsæœ‰64ä¸ª) </li><li>å†æŠŠfeature mapæ”¾å…¥convolutioné‡Œï¼Œfilterçš„å¤§å°ä¸ºï¼š3x3x<strong>64</strong>(filterçš„é«˜åº¦å°±æ˜¯å®ƒè¦å¤„ç†çš„imageçš„channel)</li></ol></li><li>filteræ¯”è¾ƒå°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è®©networkçœ‹æ¯”è¾ƒå¤§èŒƒå›´çš„pattern<br>   ![[Pasted image 20231104224407.png|400]]<br>   å³ä¸‹è§’è“è‰²åœ†åœˆçš„æ˜¯å…¶ä¸­ä¸€ä¸ªfilterï¼Œå³ä¸Šè§’æ˜¯imageï¼Œimageå·¦ä¸Šè§’çº¢è‰²æ¡†å¯¹åº”filterå·¦ä¸Šè§’çº¢è‰²æ¡†ï¼Œimageå³ä¸‹è§’çº¢è‰²æ¡†å¯¹åº”filterå³ä¸‹è§’çº¢è‰²æ¡†ã€‚feature mapçš„3x3å¯¹åº”imageçš„5x5<br>![[Pasted image 20231104225301.png|475]]</li></ul><h1 id="5-Pooling-Max-Pooling"><a href="#5-Pooling-Max-Pooling" class="headerlink" title="5 Pooling - Max Pooling"></a>5 Pooling - Max Pooling</h1><p>åœ¨feature mapä¸­ï¼Œn x nä¸ªæ•°å­—ä¸€ç»„<br>![[Pasted image 20231104225853.png|275]]ğŸ‘‰![[Pasted image 20231104225920.png|275]]<br>max poolingå°±æ˜¯é€‰ä¸€ç»„é‡Œæœ€å¤§çš„é‚£ä¸ªæ•°<br>åšå®Œconvolutionä¹‹åé€šå¸¸ä¼šæ­é…poolingï¼Œpoolingä¸æ”¹å˜channelsï¼Œä½†æ˜¯æ”¹å˜é•¿å®½</p><h1 id="6-The-whole-CNN"><a href="#6-The-whole-CNN" class="headerlink" title="6 The whole CNN"></a>6 The whole CNN</h1><p>Flattenï¼šå°†poolingçš„outputæœ¬æ¥çŸ©é˜µçš„æ ·å­æ‹‰ç›´</p><h1 id="7-Application-Playing-Go"><a href="#7-Application-Playing-Go" class="headerlink" title="7 Application: Playing Go"></a>7 Application: Playing Go</h1><ul><li>Alpha Go uses 5x5 for first layerï¼Œå¯èƒ½æ˜¯5x5çš„èŒƒå›´æ¯”è¾ƒé‡è¦</li><li>åŒæ ·å¯èƒ½å­˜åœ¨ç›¸åŒçš„pattersåœ¨ä¸åŒçš„regionsé‡Œ</li><li>ä¸ç”¨pooling</li></ul><h1 id="8-å®æ“"><a href="#8-å®æ“" class="headerlink" title="8 å®æ“"></a>8 å®æ“</h1><h2 id="8-1-Code"><a href="#8-1-Code" class="headerlink" title="8.1 Code"></a>8.1 Code</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torchvision<span class="token punctuation">.</span>transforms <span class="token keyword">as</span> transformsimage_data <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token comment"># Your image data here</span><span class="token comment"># Applying the transformations</span>transform <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>    transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    transforms<span class="token punctuation">.</span>Normalize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.1307</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0.3081</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>transformed_data <span class="token operator">=</span> transform<span class="token punctuation">(</span>image_data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-2-åŸç†"><a href="#8-2-åŸç†" class="headerlink" title="8.2 åŸç†"></a>8.2 åŸç†</h2><p>![[Pasted image 20231113221316.png]]</p><h1 id="9-Advanced-CNN"><a href="#9-Advanced-CNN" class="headerlink" title="9 Advanced CNN"></a>9 Advanced CNN</h1><ul><li>å½“è®­ç»ƒæ¬¡æ•°è¿‡å¤šæ—¶ä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆï¼Œå› æ­¤å¹¶ä¸æ˜¯è®­ç»ƒæ¬¡æ•°è¶Šå¤šæ¨¡å‹å‡†ç¡®åº¦è¶Šé«˜</li><li>è§£å†³æ¢¯åº¦æ¶ˆå¤±(è¿‡æ‹Ÿåˆ)ï¼Œä½¿ç”¨<strong>Residual net</strong></li></ul><p>![[Pasted image 20231119135500.png|300]]<br>$z=H(x)$<br>$\dfrac{\partial z}{x}=\dfrac{\partial F(x)}{\partial x} + \dfrac{\partial x}{\partial x}=\dfrac{\partial F(x)}{\partial x}+1$<br>æ¢¯åº¦=$\dfrac{\partial L}{\partial z}\times\dfrac{\partial z}{\partial x}$<br>å½“$\dfrac{\partial F}{\partial x}$å¾ˆå°çš„æ—¶å€™ï¼Œ$\dfrac{\partial z}{\partial x}$ä¸ä¼šåœ¨0çš„é™„è¿‘</p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> å·ç§¯ç¥ç»ç½‘ç»œ </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/11/02/hello-world/"/>
      <url>/2023/11/02/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Typora </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éšå«è¿ªåˆ©å…‹é›·æ¨¡å‹LDA</title>
      <link href="/2023/05/21/ru-fen-lda-mo-xing/"/>
      <url>/2023/05/21/ru-fen-lda-mo-xing/</url>
      
        <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/v_JULY_v/article/details/41209515?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;utm_relevant_index=2">å‚è€ƒåšå®¢</a></p><h1 id="1-æ•´ä½“æŠŠæ¡"><a href="#1-æ•´ä½“æŠŠæ¡" class="headerlink" title="1.æ•´ä½“æŠŠæ¡"></a>1.æ•´ä½“æŠŠæ¡</h1><p>LDAæ˜¯ä¸€ç§<strong>ä¸»é¢˜æ¨¡å‹</strong>ï¼Œå¯ä»¥å°†æ–‡æ¡£é›†ä¸­æ¯ç¯‡æ–‡æ¡£çš„ä¸»é¢˜ä»¥<strong>æ¦‚ç‡åˆ†å¸ƒ</strong>çš„å½¢å¼ç»™å‡ºï¼Œæ ¹æ®ç»™å®šçš„ä¸€ç¯‡æ–‡ç« ï¼Œåæ¨å…¶ä¸»é¢˜åˆ†å¸ƒ</p><p>ä¸€ç¯‡æ–‡æ¡£å¯ä»¥åŒ…å«å¤šä¸ªä¸»é¢˜ï¼Œæ–‡æ¡£ä¸­æ¯ä¸€ä¸ªè¯éƒ½ç”±å…¶ä¸­çš„ä¸€ä¸ªä¸»é¢˜ç”Ÿæˆ</p><h2 id="1-1LDAçš„å›¾æ¨¡å‹ç»“æ„"><a href="#1-1LDAçš„å›¾æ¨¡å‹ç»“æ„" class="headerlink" title="1.1LDAçš„å›¾æ¨¡å‹ç»“æ„"></a>1.1LDAçš„å›¾æ¨¡å‹ç»“æ„</h2><p>  ç±»ä¼¼è´å¶æ–¯ç½‘ç»œç»“æ„</p><p><img src="/../../../../medias/blog_picture/LDA/1.PNG"></p><h3 id="1-1-1è´å¶æ–¯çš„å®šä¹‰"><a href="#1-1-1è´å¶æ–¯çš„å®šä¹‰" class="headerlink" title="1.1.1è´å¶æ–¯çš„å®šä¹‰"></a>1.1.1è´å¶æ–¯çš„å®šä¹‰</h3><p>  èŠ‚ç‚¹è¡¨ç¤ºéšæœºå˜é‡${X_1,X_2,â€¦,X_n}$ï¼Œè®¤ä¸ºæœ‰<strong>å› æœå…³ç³»</strong>(æˆ–éæ¡ä»¶ç‹¬ç«‹)çš„å˜é‡æˆ–å‘½é¢˜ç”¨ç®­å¤´æ¥è¿æ¥ã€‚å¦‚æœç”¨ä¸€ä¸ªå•ç®­å¤´æ¥è¿æ¥ï¼Œè¡¨ç¤ºå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ˜¯â€œå› (parents)â€ï¼Œå¦ä¸€ä¸ªæ˜¯â€œæœ(children)â€ï¼Œä¸¤èŠ‚ç‚¹å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ¡ä»¶æ¦‚ç‡å€¼</p><p><img src="/../../../../medias/blog_picture/LDA/2.PNG"></p><p>  ğŸ‘†åœˆè¡¨ç¤ºéšæœºå˜é‡(random variables)ï¼Œç”¨ç®­å¤´è¡¨ç¤ºæ¡ä»¶ä¾èµ–(conditional dependencies)</p><p>  ä»¤$G = (I,E)$è¡¨ç¤ºä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(DAG)ï¼Œå…¶ä¸­Iä»£è¡¨å›¾å½¢ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹çš„é›†åˆï¼Œè€ŒEä»£è¡¨æœ‰å‘è¿æ¥çº¿æ®µçš„é›†åˆï¼Œä¸”ä»¤$X = (X_i),i âˆˆ I$ä¸ºå…¶æœ‰å‘æ— ç¯å›¾ä¸­çš„æŸä¸€èŠ‚ç‚¹iæ‰€ä»£è¡¨çš„éšæœºå˜é‡ï¼Œè‹¥èŠ‚ç‚¹Xçš„è”åˆæ¦‚ç‡å¯ä»¥è¡¨ç¤ºæˆ$p(x)=\prod\limits_{i\in I}p(x_i|x_{pa(i)})$ï¼Œåˆ™ç§°$X$ä¸ºç›¸å¯¹äºä¸€æœ‰å‘æ— ç¯å›¾G çš„è´å¶æ–¯ç½‘ç»œï¼Œå…¶ä¸­ï¼Œ$pa(i)$è¡¨ç¤ºèŠ‚ç‚¹iä¹‹â€œå› â€ï¼Œæˆ–ç§°$pa(i)$æ˜¯$i$çš„parentsï¼ˆçˆ¶æ¯ï¼‰ã€‚</p><p>  è”åˆæ¦‚ç‡ï¼šäº‹ä»¶Aå’Œäº‹ä»¶BåŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œè®°ä¸º$P(AB)$æˆ–$P(A,B)$æˆ–$P(Aâˆ©B)$</p><p>  å¯¹äºä»»æ„çš„éšæœºå˜é‡ï¼Œå…¶è”åˆæ¦‚ç‡å¯ç”±å„è‡ªçš„å±€éƒ¨æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒç›¸ä¹˜å¾—å‡ºï¼š</p><p>  $$p(x_1,â€¦.,x_K)=p(x_K|x_1,â€¦.,x_{K-1})â€¦p(x_2|x_1)p(x_1)$$</p><p><img src="/../../../../medias/blog_picture/LDA/3.PNG"></p><p>  ğŸ‘†ä¸€ä¸ªç®€å•çš„è´å¶æ–¯ç½‘ç»œ(aå¯¼è‡´bï¼Œaå’Œbå¯¼è‡´c)</p><p>  $$p(a,b,c)=p(c|a.b)p(b|a)p(a)$$</p><h2 id="1-2äºŒé¡¹å¼åˆ†å¸ƒ"><a href="#1-2äºŒé¡¹å¼åˆ†å¸ƒ" class="headerlink" title="1.2äºŒé¡¹å¼åˆ†å¸ƒ"></a>1.2äºŒé¡¹å¼åˆ†å¸ƒ</h2><p>éšæœºå˜é‡åªæœ‰ä¸¤ä¸ª(éæ­£å³è´Ÿ)ï¼Œå³é‡å¤næ¬¡çš„ä¼¯åŠªåˆ©å®éªŒï¼Œè®°ä¸º$X\sim b(n,p)$</p><p>äºŒé¡¹åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºï¼š</p><p><img src="/../../../../medias/blog_picture/LDA/4.PNG"></p><p> å¯¹äºk = 0, 1, 2, â€¦, nï¼Œå…¶ä¸­çš„</p><p><img src="/../../../../medias/blog_picture/LDA/5.PNG"></p><p>æ˜¯äºŒé¡¹å¼ç³»æ•°ï¼ˆè¿™å°±æ˜¯äºŒé¡¹åˆ†å¸ƒçš„åç§°çš„ç”±æ¥ï¼‰ï¼Œåˆè®°ä¸º$\dfrac{n!}{k!(n-k)!}$</p><h2 id="1-3å¤šé¡¹å¼åˆ†å¸ƒ"><a href="#1-3å¤šé¡¹å¼åˆ†å¸ƒ" class="headerlink" title="1.3å¤šé¡¹å¼åˆ†å¸ƒ"></a>1.3å¤šé¡¹å¼åˆ†å¸ƒ</h2><p>ç”±äºŒé¡¹åˆ†å¸ƒæ‰©å±•åˆ°å¤šç»´çš„æƒ…å†µ</p><p>éšæœºå˜é‡å–å€¼ä¸æ˜¯0-1ï¼Œè€Œæ˜¯æœ‰å¤šç§ç¦»æ•£å€¼çš„å¯èƒ½(1,2,3,â€¦,k)</p><p>å‡è®¾æœ‰$$i$$ä¸ªç¦»æ•£å€¼ï¼Œé‚£ä¹ˆæœ‰$\sum_{i=1}^kp_i=1,p_i&gt;0$</p><p>å¤šé¡¹å¼åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºï¼š$$P(x_1,x_2,â€¦,x_k;n,p_1,p_2,â€¦,p_k)=\dfrac{n!}{x_1!â€¦x_k!}p^{x_1}â€¦p^{x_k}$$</p><h2 id="1-4Gammaåˆ†å¸ƒ"><a href="#1-4Gammaåˆ†å¸ƒ" class="headerlink" title="1.4Gammaåˆ†å¸ƒ"></a>1.4Gammaåˆ†å¸ƒ</h2><p><a href="https://zhuanlan.zhihu.com/p/69606875">Betaå‡½æ•°å’ŒGammaå‡½æ•°çš„å…³ç³»</a></p><p>Gammaå‡½æ•°å®é™…æ„ä¹‰ï¼šé˜¶ä¹˜ä¸€èˆ¬åŒ–ï¼Œå°†é˜¶ä¹˜æ¨å¹¿åˆ°å®æ•°åŸŸ</p><p>This content is only supported in a Feishu Docs</p><h1 id="2-Betaåˆ†å¸ƒ"><a href="#2-Betaåˆ†å¸ƒ" class="headerlink" title="2.Betaåˆ†å¸ƒ"></a>2.Betaåˆ†å¸ƒ</h1><p>This content is only supported in a Feishu Docs</p><h2 id="2-1Betaåˆ†å¸ƒ"><a href="#2-1Betaåˆ†å¸ƒ" class="headerlink" title="2.1Betaåˆ†å¸ƒ"></a>2.1Betaåˆ†å¸ƒ</h2><p>betaæ˜¯æŒ‡ä¸€ç»„å®šä¹‰åœ¨$$(0,1)$$åŒºé—´çš„è¿ç»­æ¦‚ç‡åˆ†å¸ƒï¼Œæœ‰ä¸¤ä¸ªå‚æ•°$$\alpha$$å’Œ$$\beta$$ï¼Œä¸”$$\alpha,\beta&gt;0$$</p><p>äºŒé¡¹åˆ†å¸ƒçš„å…±è½­å…ˆéªŒåˆ†å¸ƒ</p><p>ç»™å®šå‚æ•°$$\alpha&gt;0$$å’Œ$$\beta&gt;0$$ï¼Œå–å€¼èŒƒå›´ä¸º[0,1]çš„éšæœºå˜é‡ x çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$$f(x;\alpha,\beta)=\dfrac{1}{B(\alpha,\beta)}x^{\alpha-1}(1-x)^{\beta-1}$$</p><p>å…¶ä¸­$\dfrac{1}{B(\alpha,\beta)}=\dfrac{\Gamma(\alpha+\beta)}{\Gamma(\alpha)\Gamma(\beta)},\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt$</p><p>è§pdf</p><h2 id="2-2Beta-Binomialå…±è½­"><a href="#2-2Beta-Binomialå…±è½­" class="headerlink" title="2.2Beta-Binomialå…±è½­"></a>2.2Beta-Binomialå…±è½­</h2><ul><li>é—®é¢˜å¼•å…¥ï¼š<ul><li><strong>é—®é¢˜1</strong>ï¼šéšæœºå˜é‡$X_1,X_2,â€¦,X_n\sim^{idd}Uniform(0,1)$ï¼ŒæŠŠè¿™nä¸ªéšæœºå˜é‡æ’åºåå¾—åˆ°é¡ºåºç»Ÿè®¡é‡$X_{(1)},X_{(2)},â€¦,X_{(n)}$ï¼Œé—®$X_{(k)}$çš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆ</li><li><strong>é—®é¢˜2</strong>ï¼š$X_{(k)}$çš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆ &lt;==&gt; çŒœæµ‹$p=X_{(k)}$ï¼Œ<ul><li>$Y_1,Y_2,â€¦,Y_n\sim^{idd}Uniform(0,1)$,$Y_i$$ä¸­æœ‰$$m_1$$ä¸ªæ¯”$$p$$å°ï¼Œ$$m_2$ä¸ªæ¯”$p$å¤§ï¼Œé—®$P(p|Y_1,Y_2,â€¦Y_m)$çš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆ</li></ul></li></ul></li><li>åˆ†æï¼š<ul><li>æ¢è¨€ä¹‹ï¼Œ$Y_i$ä¸­æœ‰$m_1$ä¸ªæ¯”$X_{(k)}$å°ï¼Œæœ‰$m_2$ä¸ªæ¯”$X_{(k)}$å¤§ï¼Œæ‰€ä»¥$X_{(k)}$æ˜¯$X_1,X_2,â€¦,X_n,Y_1,Y_2,â€¦,Y_n\sim^{idd}Uniform(0,1)$ä¸­ç¬¬$k+m_1$å¤§çš„æ•°</li><li>äº‹ä»¶æœä»Betaåˆ†å¸ƒ</li><li>å¯çŸ¥$p=X_{(k)}$çš„å¯†åº¦æ¦‚ç‡å‡½æ•°ä¸ºï¼š$$Beta(p|k+m_1,n-k+1+m_2)$$</li></ul></li><li>ä¸è´å¶æ–¯ç»“åˆè¿‡ç¨‹<ul><li><p>è´å¶æ–¯æ´¾æ€è€ƒé—®é¢˜çš„å›ºå®šæ¨¡å¼ï¼š</p></li><li><p><strong>å…ˆéªŒåˆ†å¸ƒ</strong>$\pi(\theta)$<strong>+ æ ·æœ¬ä¿¡æ¯</strong>$$X$$$$\rightarrow$$<strong>åéªŒåˆ†å¸ƒ</strong>$\pi(\theta|x)$</p></li><li><p>åœ¨å¾—åˆ°æ–°çš„æ ·æœ¬ä¿¡æ¯ä¹‹å‰ï¼Œäººä»¬å¯¹$\theta$çš„è®¤çŸ¥æ˜¯å…ˆéªŒåˆ†å¸ƒ$\pi(\theta)$ï¼Œåœ¨å¾—åˆ°æ–°çš„æ ·æœ¬ä¿¡æ¯</p><p>$X$åï¼Œäººä»¬å¯¹$\theta$çš„è®¤çŸ¥ä¸º$\pi(\theta|x)$</p></li><li><p>è¿‡ç¨‹</p><ul><li>ä¸ºäº†çŒœæµ‹$p=X_{(k)}$ï¼Œåœ¨è·å¾—ä¸€å®šçš„è§‚æµ‹æ•°æ®å‰ï¼Œæˆ‘ä»¬å¯¹$p$çš„è®¤çŸ¥æ˜¯ï¼š$f(p)=Beta(p|k,n-k+1)$ï¼Œæ­¤ç§°ä¸º$p$çš„å…ˆéªŒåˆ†å¸ƒ</li><li>ä¸ºäº†è·å¾—ç»“æœâ€œ$Y_i$ä¸­æœ‰$m_1$ä¸ªæ¯”$p$å°ï¼Œ$m_2$ä¸ªæ¯”$p$å¤§â€ï¼Œé’ˆå¯¹$Y_i$åšäº†$m$æ¬¡ä¼¯åŠªåˆ©å®éªŒï¼Œæ‰€ä»¥$m_1$æœä»äºŒé¡¹åˆ†å¸ƒ$B(m,p)$</li><li>åœ¨å¾—åˆ°$(m_1,m_2)$çš„æ•°æ®åï¼Œ$p$çš„åéªŒåˆ†å¸ƒä¸º$$f(p|m_1,m_2)=Beta(p|k+m_1,n-k+1+m_2)$$</li></ul></li><li><p>ç»“åˆè´å¶æ–¯</p><ul><li>$$Beta(p|k,n-k+1)+Count(m_1,m_2)=Beta(p|k+m_1,n-k+1+m_2)$$</li><li>æ›´ä¸€èˆ¬çš„ï¼Œå¯¹äºéè´Ÿå®æ•°$\alpha$å’Œ$\beta$ï¼šæœ‰å¦‚ä¸‹å…³ç³»$$Beta(p|\alpha,\beta)+Count(m_1,m_2)=Beta(p|\alpha+m_1,\beta+m_2)$$ï¼Œå…¶ä¸­$Count(m_1,m_2)$å¯¹åº”$B(m,p)$</li><li>é’ˆå¯¹è¿™ç§è§‚æµ‹åˆ°çš„æ•°æ®ç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„ï¼Œå°±æ˜¯Beta-Binomialå…±è½­ï¼Œæ¢è¨€ä¹‹ï¼ŒBetaåˆ†å¸ƒæ˜¯äºŒé¡¹å¼åˆ†å¸ƒçš„å…±è½­å…ˆéªŒæ¦‚ç‡åˆ†å¸ƒ<ul><li>æ¡ä»¶ä¸€ï¼šäºŒé¡¹åˆ†å¸ƒ</li><li>æ¡ä»¶äºŒï¼šå‚æ•°çš„å…ˆéªŒåˆ†å¸ƒå’ŒåéªŒåˆ†å¸ƒéƒ½æ˜¯Betaåˆ†å¸ƒ</li><li>å…±è½­å…ˆéªŒåˆ†å¸ƒâ†’2.3</li></ul></li><li>äºŒé¡¹åˆ†å¸ƒå’ŒBetaåˆ†å¸ƒæ˜¯å…±è½­åˆ†å¸ƒæ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºäºŒé¡¹åˆ†å¸ƒçš„å‚æ•°pé€‰å–çš„å…ˆéªŒåˆ†å¸ƒæ˜¯Betaåˆ†å¸ƒï¼Œé‚£ä¹ˆä»¥pä¸ºå‚æ•°çš„äºŒé¡¹åˆ†å¸ƒç”¨è´å¶æ–¯ä¼°è®¡å¾—åˆ°çš„åéªŒåˆ†å¸ƒä»ç„¶æœä»Betaåˆ†å¸ƒ</li></ul></li><li><p>$\alpha$å’Œ$\beta$å¯ä»¥è®¤ä¸ºæ˜¯å½¢çŠ¶å‚æ•°</p></li></ul></li></ul><h2 id="2-3å…±è½­å…ˆéªŒåˆ†å¸ƒ"><a href="#2-3å…±è½­å…ˆéªŒåˆ†å¸ƒ" class="headerlink" title="2.3å…±è½­å…ˆéªŒåˆ†å¸ƒ"></a>2.3å…±è½­å…ˆéªŒåˆ†å¸ƒ</h2><p>å¦‚æœåéªŒæ¦‚ç‡å’Œå…ˆéªŒæ¦‚ç‡æ»¡è¶³åŒæ ·çš„åˆ†å¸ƒå¾‹ï¼Œé‚£ä¹ˆå…ˆéªŒåˆ†å¸ƒå’ŒåéªŒåˆ†å¸ƒè¢«å«åšå…±è½­åˆ†å¸ƒï¼ŒåŒæ—¶ï¼Œå…ˆéªŒåˆ†å¸ƒå«åšä¼¼ç„¶å‡½æ•°çš„å…±è½­å…ˆéªŒåˆ†å¸ƒã€‚</p><p>  æ¯”å¦‚ï¼ŒæŸè§‚æµ‹æ•°æ®æœä»æ¦‚ç‡åˆ†å¸ƒP(Î¸)(å…ˆéªŒ)æ—¶ï¼Œå½“è§‚æµ‹åˆ°æ–°çš„Xæ•°æ®(æ ·æœ¬ä¿¡æ¯)æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>å¯å¦æ ¹æ®æ–°è§‚æµ‹æ•°æ®Xï¼Œæ›´æ–°å‚æ•°Î¸ï¼Ÿ</li><li>æ ¹æ®æ–°è§‚æµ‹æ•°æ®å¯ä»¥åœ¨å¤šå¤§ç¨‹åº¦ä¸Šæ”¹å˜å‚æ•°Î¸ï¼Œå³$\theta \leftarrow \theta + \triangle \theta$</li><li>å½“é‡æ–°ä¼°è®¡Î¸çš„æ—¶å€™ï¼Œç»™å‡ºæ–°å‚æ•°å€¼Î¸çš„æ–°æ¦‚ç‡åˆ†å¸ƒï¼Œå³P(Î¸|x)ã€‚</li></ul><h2 id="2-4ä»Betaåˆ†å¸ƒæ¨å¹¿åˆ°Dirichletåˆ†å¸ƒ"><a href="#2-4ä»Betaåˆ†å¸ƒæ¨å¹¿åˆ°Dirichletåˆ†å¸ƒ" class="headerlink" title="2.4ä»Betaåˆ†å¸ƒæ¨å¹¿åˆ°Dirichletåˆ†å¸ƒ"></a>2.4ä»Betaåˆ†å¸ƒæ¨å¹¿åˆ°Dirichletåˆ†å¸ƒ</h2><p>è§pdf</p><p>ç»“è®ºæ˜¯ï¼šå¯¹äºBetaåˆ†å¸ƒçš„éšæœºå˜é‡ï¼Œå…¶å‡å€¼(æœŸæœ›)å¯ä»¥ç”¨$\dfrac{\alpha}{\alpha+\beta}$æ¥ä¼°è®¡</p><p>ç±»æ¯”åˆ°Dirichletåˆ†å¸ƒï¼šå¦‚æœ$\mathop{p}\limits^{\rightarrow}\sim Dir(\mathop{t}\limits^{\rightarrow}|\mathop{\alpha}\limits^{\rightarrow})$ï¼Œé‚£ä¹ˆæœ‰$$E(\mathop{p}\limits^{\rightarrow})=(\dfrac{\alpha_1}{\sum^K_{i=1}\alpha_i},\dfrac{\alpha_2}{\sum^K_{i=1}\alpha_i},â€¦,\dfrac{\alpha_3}{\sum^K_{i=1}\alpha_i})$$</p><h1 id="3-Dirichletåˆ†å¸ƒ"><a href="#3-Dirichletåˆ†å¸ƒ" class="headerlink" title="3.Dirichletåˆ†å¸ƒ"></a>3.Dirichletåˆ†å¸ƒ</h1><p>æ˜¯betaåˆ†å¸ƒåœ¨é«˜çº¬åº¦ä¸Šçš„æ¨å¹¿</p><p>$$f(x_1,x_2,â€¦,x_k;\alpha_1,\alpha_1,â€¦,\alpha_k)=\dfrac{1}{B(\alpha)}\prod_{i=1}^kx_{i}^{a^i-1}$$</p><p>å…¶ä¸­$$B(\alpha)=\dfrac{\prod_{i=1}^k\Gamma(a^i)}{\Gamma(\sum_{i=1}^k)a^i},\sum x_i=1$$</p><h2 id="3-1Dirichletåˆ†å¸ƒ"><a href="#3-1Dirichletåˆ†å¸ƒ" class="headerlink" title="3.1Dirichletåˆ†å¸ƒ"></a>3.1Dirichletåˆ†å¸ƒ</h2><p>This content is only supported in a Feishu Docs</p><h2 id="3-2Dirichlet-Multinomialå…±è½­"><a href="#3-2Dirichlet-Multinomialå…±è½­" class="headerlink" title="3.2Dirichlet-Multinomialå…±è½­"></a>3.2Dirichlet-Multinomialå…±è½­</h2><ul><li>é—®é¢˜å¼•å…¥ï¼šåœ¨2.2çš„é—®é¢˜2çš„åŸºç¡€ä¸Šç»§ç»­æ·±å…¥<ul><li><strong>é—®é¢˜3</strong>ï¼šéšæœºå˜é‡$X_1,X_2,â€¦,X_n\sim^{idd}Uniform(0,1)$ï¼ŒæŠŠè¿™nä¸ªéšæœºå˜é‡æ’åºåå¾—åˆ°é¡ºåºç»Ÿè®¡é‡$X_{(1)},X_{(2)},â€¦,X_{(n)}$ï¼Œé—®$(X_{(k_1)},X_{k_1+k_2})$çš„è”åˆåˆ†å¸ƒæ˜¯ä»€ä¹ˆ<ul><li>è®¡ç®—è§pdf</li></ul></li><li>ä¸ºè®ºè¯Dirichletåˆ†å¸ƒæ˜¯å¤šé¡¹å¼åˆ†å¸ƒçš„å…±è½­å…ˆéªŒæ¦‚ç‡åˆ†å¸ƒï¼Œåœ¨é—®é¢˜3çš„åŸºç¡€ä¸Šç»§ç»­æ·±å…¥<ul><li>é—®é¢˜4ï¼š<ul><li>éšæœºå˜é‡$X_1,X_2,â€¦,X_n\sim^{idd}Uniform(0,1)$ï¼ŒæŠŠè¿™nä¸ªéšæœºå˜é‡æ’åºåå¾—åˆ°é¡ºåºç»Ÿè®¡é‡$X_{(1)},X_{(2)},â€¦,X_{(n)}$</li><li>ä»¤$p_1=X_{k_1},p_2=X(k_1+k_2),p_3=1-p_1-p_2$ï¼Œç°åœ¨è¦çŒœæµ‹$$\mathop{p}\limits^{\rightarrow}=(p_1,p_2,p_3)$$</li><li>$Y_1,Y_2,â€¦,Y_m\sim^{idd}Uniform(0,1)$ï¼Œ$Y_i$ä¸­è½åˆ°$(0,p_1],[p_1,p_2),[p_2,1]$ä¸‰ä¸ªåŒºé—´çš„ä¸ªæ•°åˆ†åˆ«ä¸º$m_1,m_2,m_3$ï¼Œ$m=m_1+m_2+m_3$</li><li>é—®åéªŒåˆ†å¸ƒ$P(\mathop{p}\limits^{\rightarrow}|Y_1,Y_2,â€¦Y_m)$çš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆ</li><li>è®¨è®ºè§pdf</li></ul></li></ul></li></ul></li><li>ä¸è´å¶æ–¯ç»“åˆæ¨ç†ï¼š<ul><li>è¦çŒœæµ‹å‚æ•°$\mathop{p}\limits^{\rightarrow}=(p_1,p_2,p_3)$ï¼Œå…¶å…ˆéªŒåˆ†å¸ƒä¸º$Dir(\mathop{p}\limits^{\rightarrow}|\mathop{k}\limits^{\rightarrow})$</li><li>$Y_1,Y_2,â€¦,Y_m\sim^{idd}Uniform(0,1)$ï¼Œ$Y_i$ä¸­è½åˆ°$(0,p_1],[p_1,p_2),[p_2,1]$ä¸‰ä¸ªåŒºé—´çš„ä¸ªæ•°åˆ†åˆ«ä¸º$m_1,m_2,m_3$ï¼Œæ‰€ä»¥$\mathop{m}\limits^{\rightarrow}=(m_1,m_2,m_3)$æœä»å¤šé¡¹åˆ†å¸ƒ$Mult(\mathop{m}\limits^{\rightarrow}|\mathop{p}\limits^{\rightarrow})$</li><li>ç»™å®šäº†æ¥è‡ªæ•°æ®æä¾›çš„$\mathop{m}\limits^{\rightarrow}$åï¼Œ$\mathop{p}\limits^{\rightarrow}$çš„åéªŒåˆ†å¸ƒå˜ä¸º$Dir(\mathop{p}\limits^{\rightarrow}|\mathop{k}\limits^{\rightarrow}+\mathop{m}\limits^{\rightarrow})$</li><li>ç›´è§‚è¡¨è¿°ï¼š<ol><li>$Dir(\mathop{p}\limits^{\rightarrow}|\mathop{k}\limits^{\rightarrow})+MultCount(\mathop{m}\limits^{\rightarrow})=Dir(\mathop{p}\limits^{\rightarrow}|\mathop{k}\limits^{\rightarrow}+\mathop{m}\limits^{\rightarrow})$</li><li>ä»¤$\mathop{\alpha}\limits^{\rightarrow}=\mathop{k}\limits^{\rightarrow}ï¼Œå¯ä»¥æŠŠ$$\mathop{\alpha}\limits^{\rightarrow}$ä»æ•´æ•°é›†åˆå»¶æ‹“åˆ°å®æ•°é›†åˆï¼Œä»è€Œå¾—åˆ°æ›´ä¸€èˆ¬çš„è¡¨è¾¾ï¼š</li><li>$Dir(\mathop{p}\limits^{\rightarrow}|\mathop{\alpha}\limits^{\rightarrow})+MultCount(\mathop{m}\limits^{\rightarrow})=Dir(\mathop{p}\limits^{\rightarrow}|\mathop{\alpha}\limits^{\rightarrow}+\mathop{m}\limits^{\rightarrow})$</li></ol></li></ul></li><li>ç»“è®ºï¼š<ul><li>è§‚æµ‹åˆ°çš„æ•°æ®ç¬¦åˆå¤šé¡¹åˆ†å¸ƒ</li><li>å‚æ•°çš„å…ˆéªŒåˆ†å¸ƒå’ŒåéªŒåˆ†å¸ƒéƒ½æ˜¯Dirichletåˆ†å¸ƒ</li><li>å°±æ˜¯Dirichlet-Multinomialå…±è½­</li><li>ä¸€èˆ¬å½¢å¼çš„Dirichletåˆ†å¸ƒå®šä¹‰å’Œå¯¹äºç»™å®šçš„$\mathop{p}\limits^{\rightarrow}$å’Œ$N$ï¼Œå…¶å¤šé¡¹å¼åˆ†å¸ƒè§pdf</li><li>Dirichletåˆ†å¸ƒ$Dir(\mathop{p}\limits^{\rightarrow}|\mathop{\alpha}\limits^{\rightarrow})$å’Œå¤šé¡¹åˆ†å¸ƒ$MultCount(\mathop{n}\limits^{\rightarrow}|\mathop{p}\limits^{\rightarrow},N)$æ˜¯å…±è½­å…³ç³»</li></ul></li></ul><h1 id="4-LDAæ¨¡å‹"><a href="#4-LDAæ¨¡å‹" class="headerlink" title="4.LDAæ¨¡å‹"></a>4.LDAæ¨¡å‹</h1><p><strong>å®šä¹‰çš„å˜é‡</strong></p><ul><li>$$w$$è¡¨ç¤ºè¯ï¼Œ$$V$$è¡¨ç¤ºæ‰€æœ‰å•è¯çš„ä¸ªæ•°ï¼ˆå›ºå®šå€¼ï¼‰</li><li>$$z$$è¡¨ç¤ºä¸»é¢˜ï¼Œæ˜¯ä¸»é¢˜çš„ä¸ªæ•°ï¼ˆé¢„å…ˆç»™å®šï¼Œå›ºå®šå€¼ï¼‰</li><li>$$D(w_1,â€¦,w_M)$$è¡¨ç¤ºè¯­æ–™åº“ï¼Œå…¶ä¸­çš„$$M$$æ˜¯è¯­æ–™åº“ä¸­çš„æ–‡æ¡£æ•°ï¼ˆå›ºå®šå€¼ï¼‰</li><li>$$\mathbf{w}=(w_1,w_2,â€¦,w_N)$$è¡¨ç¤ºæ–‡æ¡£ï¼Œå…¶ä¸­çš„$$N$$è¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£ä¸­çš„è¯æ•°ï¼ˆéšæœºå˜é‡ï¼‰</li></ul><h2 id="4-1å„ä¸ªæ¨¡å‹åŸºç¡€"><a href="#4-1å„ä¸ªæ¨¡å‹åŸºç¡€" class="headerlink" title="4.1å„ä¸ªæ¨¡å‹åŸºç¡€"></a>4.1å„ä¸ªæ¨¡å‹åŸºç¡€</h2><h3 id="4-1-1Unigram-model"><a href="#4-1-1Unigram-model" class="headerlink" title="4.1.1Unigram model"></a>4.1.1Unigram model</h3><p>å¯¹äºæ–‡æ¡£$\mathbf{w}=(w_1,w_2,â€¦,w_N)$ï¼Œç”¨$p(w_n)$è¡¨ç¤ºè¯$w_n$çš„å…ˆéªŒæ¦‚ç‡ï¼Œç”Ÿæˆæ–‡æ¡£$\mathbf{w}$çš„æ¦‚ç‡ä¸ºï¼š$p(\mathbf{w})=\sum^N_{n=1}p(w_n)$</p><p>å›¾æ¨¡å‹ä¸º</p><ul><li><p>å›¾æ¨¡å‹ä¸€</p><ul><li><p>(å›¾ä¸­è¢«æ¶‚è‰²çš„w(word)è¡¨ç¤ºå¯è§‚æµ‹å˜é‡ï¼ŒNè¡¨ç¤ºä¸€ç¯‡æ–‡æ¡£ä¸­æ€»å…±Nä¸ªå•è¯ï¼ŒMè¡¨ç¤ºMç¯‡æ–‡æ¡£)</p></li><li><p><img src="/../../../../medias/blog_picture/LDA/6.PNG"></p></li></ul></li><li><p>å›¾æ¨¡å‹äºŒ</p><ul><li><p><img src="/../../../../medias/blog_picture/LDA/7.PNG"></p></li><li><p>nigram modelå‡è®¾æ–‡æœ¬ä¸­çš„è¯æœä»Multinomialåˆ†å¸ƒï¼Œè€Œæˆ‘ä»¬å·²ç»çŸ¥é“Multinomialåˆ†å¸ƒçš„å…ˆéªŒåˆ†å¸ƒä¸ºDirichletåˆ†å¸ƒã€‚ä¸Šå›¾ä¸­çš„$w_n$è¡¨ç¤ºåœ¨æ–‡æœ¬ä¸­è§‚å¯Ÿåˆ°çš„ç¬¬nä¸ªè¯ï¼Œ$n\in[1,N]$è¡¨ç¤ºè¯¥æ–‡æœ¬ä¸­ä¸€å…±æœ‰$N$ä¸ªå•è¯ã€‚åŠ ä¸Šæ–¹æ¡†è¡¨ç¤ºé‡å¤ï¼Œå³ä¸€å…±æœ‰$N$ä¸ªè¿™æ ·çš„éšæœºå˜é‡$w_n$ã€‚å…¶ä¸­ï¼Œ$p$å’Œ$\alpha$æ˜¯éšå«æœªçŸ¥å˜é‡ï¼š</p></li><li><p>$p$æ˜¯è¯æœä»çš„Multinomialåˆ†å¸ƒçš„å‚æ•°</p></li><li><p>$\alpha$æ˜¯Dirichletåˆ†å¸ƒ(å³Multinomialåˆ†å¸ƒçš„å…ˆéªŒåˆ†å¸ƒ)çš„å‚æ•°</p></li><li><p>ä¸€èˆ¬$\alpha$ç”±ç»éªŒäº‹å…ˆç»™å®š(å…ˆéªŒ)ï¼Œ$p$ç”±è§‚å¯Ÿåˆ°çš„æ–‡æœ¬ä¸­å‡ºç°çš„è¯å­¦ä¹ å¾—åˆ°(æ ·æœ¬)ï¼Œè¡¨ç¤ºæ–‡æœ¬ä¸­å‡ºç°æ¯ä¸ªè¯çš„æ¦‚ç‡</p></li></ul></li></ul><h3 id="4-1-2Mixture-of-unigrams-model"><a href="#4-1-2Mixture-of-unigrams-model" class="headerlink" title="4.1.2Mixture of unigrams model"></a>4.1.2Mixture of unigrams model</h3><p>è¯¥æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹æ˜¯ï¼šç»™æŸä¸ªæ–‡æ¡£å…ˆé€‰æ‹©ä¸€ä¸ªä¸»é¢˜$$z$$ï¼Œå†æ ¹æ®è¯¥ä¸»é¢˜ç”Ÿæˆæ–‡æ¡£ï¼Œè¯¥æ–‡æ¡£ä¸­çš„æ‰€æœ‰è¯éƒ½æ¥è‡ªä¸€ä¸ªä¸»é¢˜ã€‚å‡è®¾ä¸»é¢˜æœ‰$$z_1,â€¦z_k$$ï¼Œç”Ÿæˆæ–‡æ¡£$$\mathbf{w}$$çš„æ¦‚ç‡ä¸ºï¼š</p><p>$$p(\mathbf{w})=p(z_1)\prod^N_{n=1}p(w_n|z_1)+â€¦+p(z_k)\prod^N_{n=1}p(w_n|z_k)=\sum_zp(z)\prod^N_{n=1}p(w_n|z)$$</p><p>å›¾æ¨¡å‹ä¸ºï¼š(å›¾ä¸­è¢«æ¶‚è‰²çš„wè¡¨ç¤ºå¯è§‚æµ‹å˜é‡ï¼Œæœªè¢«æ¶‚è‰²çš„zè¡¨ç¤ºæœªçŸ¥çš„éšå˜é‡ï¼ŒNè¡¨ç¤ºä¸€ç¯‡æ–‡æ¡£ä¸­æ€»å…±Nä¸ªå•è¯ï¼ŒMè¡¨ç¤ºMç¯‡æ–‡æ¡£)</p><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=N2EwNjVhYjBkNmNmZmIwYWQ0ZTEwNTFkMDhkYTI2MTRfWlBzcTB6dEM3VEl4cmZQTmwzU1Vpbmh4M2s5YXZ3d0xfVG9rZW46T2lQY2JBWXF5b1E0cEt4eGtJQ2NXVHJHbldiXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><h2 id="4-2PLSAæ¨¡å‹"><a href="#4-2PLSAæ¨¡å‹" class="headerlink" title="4.2PLSAæ¨¡å‹"></a>4.2PLSAæ¨¡å‹</h2><p>å»ºè®®ç›´æ¥<a href="https://blog.csdn.net/v_JULY_v/article/details/41209515?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;utm_relevant_index=2">çœ‹</a></p><h3 id="4-2-1pLSAæ¨¡å‹ä¸‹ç”Ÿæˆæ–‡æ¡£"><a href="#4-2-1pLSAæ¨¡å‹ä¸‹ç”Ÿæˆæ–‡æ¡£" class="headerlink" title="4.2.1pLSAæ¨¡å‹ä¸‹ç”Ÿæˆæ–‡æ¡£"></a>4.2.1pLSAæ¨¡å‹ä¸‹ç”Ÿæˆæ–‡æ¡£</h3><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=NjlkNjI0MDZhYTA5NzU5YTZjYjJmYjRlNDQwZDlmY2FfM2RlOFdrZkNwM0o0Rk5vZE9tZXBOVDNPZThhMFZYNVlfVG9rZW46R3lYQWJyZjFnbzRlV1l4Q3lMVmNiSGpCbmNkXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><h3 id="4-2-2æ ¹æ®æ–‡æ¡£åæ¨å…¶ä¸»é¢˜åˆ†å¸ƒ"><a href="#4-2-2æ ¹æ®æ–‡æ¡£åæ¨å…¶ä¸»é¢˜åˆ†å¸ƒ" class="headerlink" title="4.2.2æ ¹æ®æ–‡æ¡£åæ¨å…¶ä¸»é¢˜åˆ†å¸ƒ"></a>4.2.2æ ¹æ®æ–‡æ¡£åæ¨å…¶ä¸»é¢˜åˆ†å¸ƒ</h3><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=N2NjNWE4M2Q0OTZkNDNlMTM4NGU5YjQ4ZWFkNWFmZTBfMW9Sc2ZnUGlVd1ZLcndueW5XcEc5aU9uRk5Sc3JLUXRfVG9rZW46TkRyemJsUTZCb1BUVG54aUlCQmNuZkFhbnZmXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI1ZWMwNDc1NjM0ZWY2M2MzNWUzZmIzZmYyY2MwMjRfVkEwbjQ2ZnV6bUpEcFhueG81YTdFUW9lckZSRzVDNjFfVG9rZW46TWtrWmJwSThjb1hkOFB4bmVRQWNpejdpblFnXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><h3 id="4-2-3EMç®—æ³•"><a href="#4-2-3EMç®—æ³•" class="headerlink" title="4.2.3EMç®—æ³•"></a>4.2.3EMç®—æ³•</h3><p>This content is only supported in a Feishu Docs</p><h4 id="4-2-3-1EMç®—æ³•çš„ç®€å•ä»‹ç»"><a href="#4-2-3-1EMç®—æ³•çš„ç®€å•ä»‹ç»" class="headerlink" title="4.2.3.1EMç®—æ³•çš„ç®€å•ä»‹ç»"></a>4.2.3.1EMç®—æ³•çš„ç®€å•ä»‹ç»</h4><p><a href="https://zhuanlan.zhihu.com/p/78311644">EMç®—æ³•</a></p><p>éšå˜é‡$$Z=(z_1,z_2,z_3,z_4,z_5)$$ä»£è¡¨æ¯ä¸€è½®æ‰€ä½¿ç”¨çš„ç¡¬å¸</p><p>æ‰€ä»¥ç¬¬ä¸€æ­¥å…ˆä¼°ç®—$$Z$$ï¼Œè¿™æ­¥åŒæ—¶æ˜¯E-step</p><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTM3MzY0YjcxMGMyMjc2NmU3YTIyMTkxYjM3YTFlNGNfb0w5WEkzWWxKM0ZZVFY0ak1VUGxUVHVRSWVSSkl4NXBfVG9rZW46UmQzU2JDT3N6b2tENmZ4M1VXSGNtSFQ5bnllXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><p>ğŸ‘†æµç¨‹ï¼š</p><ol><li>éšæœºåˆå§‹åŒ–$$\theta_A=0.6$$å’Œ$$\theta_B=0.5$$(E-step)</li><li>Hä»£è¡¨æ­£é¢ï¼ŒTä»£è¡¨åé¢ï¼›å¯¹äºç¬¬ä¸€è½®æ¥è¯´ï¼Œå®é™…çš„æƒ…å†µæ˜¯5ä¸ªæ­£çš„5ä¸ªåçš„ï¼Œè¿›è¡Œå¦‚ä¸‹è®¡ç®—<ol><li>$$P_A=\dfrac{0.6^5<em>0.4^5}{(0.6^5</em>0.4^5)+(0.5^5+0.5^5)}=0.45$$</li><li>$$P_B=\dfrac{(0.5^5+0.5^5)}{(0.6^5*0.4^5)+(0.5^5+0.5^5)}=0.55$$<ul><li><p>â€‹    å¯¹äºç¬¬ä¸€è½®æŠ›æ·ï¼Œè¯¥æšç¡¬å¸æ˜¯ç¡¬å¸Açš„æ¦‚ç‡ä¸º0.45ï¼Œæ˜¯ç¡¬å¸Bçš„æ¦‚ç‡ä¸º0.55ï¼Œå…¶ä»–è½®åŒç†ï¼Œè¿™ä¸€æ­¥å¾—åˆ°äº†Zçš„æ¦‚ç‡åˆ†å¸ƒ</p></li><li><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=NGRmZWQwOTVjYjJiNDcxOGIxMDUzZGNhYzUyYTJlMGRfOUNOVm1LSVJFM0xQRjJDbHVHckNpM2M2cFRjVFdFcnFfVG9rZW46RG1TOGJibjlBb0RHenp4Qzc0b2MxczAwbjBjXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p></li></ul></li></ol></li><li>åˆ©ç”¨æœŸæœ›æ±‚ç¡¬å¸Aå’Œç¡¬å¸Bçš„è´¡çŒ®ï¼Œå¯¹äºç¬¬ä¸€è½®æ¥è¯´<ol><li><p>Hï¼š0.45*5=2.25</p></li><li><p>Tï¼š0.55*5=2.75</p></li><li><p>å…¶ä»–è½®åŒç†</p></li><li><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=NTAzNzNmZjc0MGE5NjYyMWQ4NTUyNTlkYzI3NDAwOGZfS3Q4RnE5NGFHczdhbHY0WjRJNUZRRklyd0FiOFdtcmpfVG9rZW46U2puNmJ3ZTlFbzN0MWJ4TUs5ZmNSZXlBbkZmXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p></li><li><p>ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡æ¥ä¼°è®¡æ–°çš„$$\theta_A$$å’Œ$$\theta_B$$ï¼Œè¿™æ­¥å°±æ˜¯M-Step</p><ul><li>$$\theta_A=\dfrac{21.3}{21.3+8.6}=0.71$$</li><li>$$\theta_B=\dfrac{11.7}{11.7+8.4}=0.58$$</li></ul></li></ol></li><li>å¦‚æ­¤åå¤è¿­ä»£ï¼Œå¯ä»¥ç®—å‡ºæœ€ç»ˆçš„å‚æ•°å€¼</li><li>$$L(\theta)$$ä¸$$J(z,Q)$$çš„å…³ç³»<ol><li><p>è¿™å¼ å›¾çš„æ„æ€æ˜¯</p></li><li><p>å…ˆå›ºå®š$$\theta$$ï¼Œè°ƒæ•´$$Q(z)$$ä½¿ä¸‹ç•Œ$$J(z,Q)$$ä¸Šå‡è‡³ä¸$$L(\theta)$$åœ¨è¯¥$$\theta$$å€¼ä¸‹ç›¸åŒ(ç”±ç»¿çº¿åˆ°è“çº¿)</p></li><li><p>ç„¶åå›ºå®š$$Q(z)$$ï¼Œè°ƒæ•´$$\theta$$ä½¿ä¸‹ç•Œ$$J(z,Q)$$è¾¾åˆ°æœ€å¤§å€¼</p></li><li><p>å†å›ºå®š$$\theta$$â€¦</p></li><li><p>ç›´åˆ°æ”¶æ•›åˆ°ä¼¼ç„¶å‡½æ•°$$L(\theta)$$çš„æœ€å¤§å€¼æ—¶ï¼Œå¾—åˆ°è¯¥å¤„çš„$$\theta^{*}$$</p></li><li><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=YWNhYjE0NTBjYzU1ZTk5ZmI5ZjUwY2FhYzIyOTYzOGZfUjJqTkJOWGdpRVlBTWIxVE1VaFkwR2d6N0xKTFRrZzlfVG9rZW46UXI5R2I5andOb3pXM3B4WW1yV2N5TmN2blliXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p></li></ol></li><li>EMç®—æ³•çš„æ•´ä½“æ¡†æ¶</li></ol><p>Repeat until convergence{</p><p>  (E-step) For each </p><p>$$i$$</p><p>,set</p><p>â€‹    $$Q_i(z):=p(z^{(i)}|x^{(i)};\theta)$$                            æ‰¾éšå˜é‡çš„åˆ†å¸ƒ(ç›´çº¿å¾€ä¸Šç§»)</p><p>â€‹     (M-step) Set</p><p>â€‹    $$\theta:=arg max_{\theta}\sum_i\sum_{z^{(i)}}log\dfrac{p(x^{(i)},z^{(i)};\theta)}{Q_i(z^{(i)})}$$   æ‰¾æ–°çš„$$\theta$$(ç‚¹ä½å¾€å·¦å³ç§»)</p><p>}</p><h4 id="4-2-3-2EMç®—æ³•ä¼°è®¡pLSAçš„ä¸¤ä¸ªæœªçŸ¥å‚æ•°"><a href="#4-2-3-2EMç®—æ³•ä¼°è®¡pLSAçš„ä¸¤ä¸ªæœªçŸ¥å‚æ•°" class="headerlink" title="4.2.3.2EMç®—æ³•ä¼°è®¡pLSAçš„ä¸¤ä¸ªæœªçŸ¥å‚æ•°"></a>4.2.3.2EMç®—æ³•ä¼°è®¡pLSAçš„ä¸¤ä¸ªæœªçŸ¥å‚æ•°</h4><p>ä»<strong>çŸ©é˜µè§’åº¦</strong>æè¿°å¸¦ä¼°è®¡çš„ä¸¤ä¸ªæœªçŸ¥å˜é‡$$P(w_j|z_k)$$å’Œ$$P(z_k|d_i)$$</p><p>è¯è¡¨$$V$$æœ‰$$j$$ä¸ªè¯é¡¹ï¼›æ‰€æœ‰ä¸»é¢˜$$Z$$æœ‰$$k$$ä¸ªä¸»é¢˜ï¼›æœ‰$$i$$ç¯‡æ–‡ç« </p><ul><li>å‡å®šç”¨$$\phi_k$$è¡¨ç¤ºè¯è¡¨$$V$$åœ¨ä¸»é¢˜$$z_k$$ä¸Šçš„ä¸€ä¸ªå¤šé¡¹åˆ†å¸ƒï¼Œåˆ™$$\phi_k$$å¯ä»¥è¡¨ç¤ºæˆä¸€ä¸ªå‘é‡ï¼Œæ¯ä¸ªå…ƒç´ $$\phi_{k,j}$$è¡¨ç¤ºè¯é¡¹$$w_j$$å‡ºç°åœ¨ä¸»é¢˜$$z_k$$ä¸­çš„æ¦‚ç‡ï¼Œå³ï¼š<ul><li>$$P(w_j|z_k)=\phi_{k,j}$$ï¼Œ$$\sum_{w_j\in V}\phi_{k,j}=1$$</li></ul></li><li>å‡å®šç”¨$$\theta_i$$è¡¨ç¤ºæ‰€æœ‰ä¸»é¢˜$$K$$åœ¨æ–‡æ¡£$$d_i$$ä¸Šçš„ä¸€ä¸ªå¤šé¡¹åˆ†å¸ƒï¼Œåˆ™$$\theta_i$$å¯ä»¥è¡¨ç¤ºæˆä¸€ä¸ªå‘é‡ï¼Œæ¯ä¸ªå…ƒç´ $$\theta_{i,k}$$è¡¨ç¤ºä¸»é¢˜$$z_k$$å‡ºç°åœ¨æ–‡æ¡£$$d_i$$ä¸­çš„æ¦‚ç‡ï¼Œå³ï¼š<ul><li>$$P(z_k|d_i)=\theta_{i,k}$$ï¼Œ$$\sum_{z_k\in K}\theta_{i,k}=1$$</li></ul></li></ul><p>$$P(w_j|z_k)$$å’Œ$$P(z_k|d_i)$$è½¬æ¢æˆäº†ä¸¤ä¸ªçŸ©é˜µï¼Œæ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬è¦æ±‚è§£çš„å‚æ•°å°±æ˜¯è¿™ä¸¤ä¸ªçŸ©é˜µï¼š</p><ul><li>$$\Phi=[\phi_1,â€¦\phi_K], z_k\in Z$$</li><li>$$\Theta=[\theta_i,â€¦,\theta_M],d_i\in D$$</li></ul><p>è¯å’Œè¯ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ•´ç¯‡æ–‡æ¡£$$N$$ä¸ªè¯çš„åˆ†å¸ƒä¸ºï¼š</p><ul><li>$$P(W|d_i)=\prod_{j=1}^NP(d_i,w_j)^{n(d_i,w_j)}$$</li></ul><p>æ–‡æ¡£å’Œæ–‡æ¡£ä¹‹é—´ä¹Ÿæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ•´ä¸ªè¯­æ–™åº“($$M$$ç¯‡æ–‡æ¡£,æ¯ç¯‡æ–‡æ¡£$$N$$ä¸ªè¯)ä¸­è¯çš„åˆ†å¸ƒä¸º</p><ul><li>$$P(W|D)=\prod_{i=1}^M\prod_{j=1}^NP(d_i,w_j)^{n(d_i,w_j)}$$</li></ul><p>å…¶ä¸­ï¼Œ</p><p>$$n(d_i,w_j)$$è¡¨ç¤ºè¯é¡¹$$w_j$$åœ¨æ–‡æ¡£$$d_i$$ä¸­çš„è¯é¢‘</p><p>$$n(d_i)$$è¡¨ç¤ºæ–‡æ¡£$$d_i$$ä¸­æ–‡æ¡£è¯çš„æ€»æ•°</p><p>æ˜¾ç„¶æœ‰$$n(d_i)=\sum_{w_j\in V}n(d_i,w_j)$$ï¼Œä¸€ç¯‡æ–‡æ¡£ä¸­è¯çš„æ€»æ•°ç­‰äºè¯è¡¨ä¸­æ¯ä¸ªè¯å‡ºç°çš„æ¬¡æ•°ä¹‹å’Œ</p><p>æ•´ä¸ªè¯­æ–™åº“çš„è¯åˆ†å¸ƒçš„å¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼š</p><p>$$\begin{align} l(\Phi,\Theta)&amp;=\sum_{i=1}^{M}\sum_{j=1}^Nn(d_i,w_j)logP(d_i,w_j)\ &amp;=\sum_{i=1}^Mn(d_i)\left(logP(d_i)+\sum_{j=1}^N\dfrac{n(d_i,w_j)}{n(d_i)}log\sum_{k=1}^KP(w_j|z_k)P(z_k|d_i)\right)\ &amp;=\sum_{i=1}^Mn(d_i)\left(logP(d_i)+\sum_{j=1}^N\dfrac{n(d_i,w_j)}{n(d_i)}log\sum_{k=1}^K\phi_{k,j}\theta_{i,k}\right) \end{align}$$</p><ul><li>(1)å¯¹åº”çš„æ˜¯$$L(\theta)\geq\sum_{i=1}^n\sum_z^ZQ_i(z)log\dfrac{P(x_i,z;\theta)}{Q_i(z)}$$ï¼Œå…¶ä¸­$$Q_i(z)$$è¡¨ç¤ºçš„æ˜¯æ ·æœ¬$$i$$éšå«å˜é‡$$z$$çš„æŸç§åˆ†å¸ƒï¼›$$log\dfrac{P(x_i,z;\theta)}{Q_i(z)}$$è¡¨ç¤ºçš„æ˜¯å¯¹æ•°ä¼¼ç„¶å‡½æ•°</li><li>(2)åˆ†åˆ«æ±‚æ–‡æœ¬çš„å¯¹æ•°ä¼¼ç„¶å‡½æ•°å’Œè¯çš„å¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼Œè§pdf</li><li>(3)å°±æ˜¯ä¸Šé¢å¾—åˆ°çš„ä»¥çŸ©é˜µçš„å½¢å¼è¡¨è¾¾å¤šé¡¹å¼åˆ†å¸ƒ</li></ul><p>å¤šå…ƒå‡½æ•°åœ¨æœ‰çº¦æŸæ¡ä»¶$$\sum_{j=1}^{M}\theta_{k,j}=1$$å’Œ$$\sum_{k=1}^K\phi_{i,k}=1$$ä¸‹æ±‚æå€¼ï¼Œç”¨æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•(å³é€šè¿‡å¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­å°†çº¦æŸæ¡ä»¶å’Œå¤šå…ƒ(ç›®æ ‡)å‡½æ•°èåˆåˆ°ä¸€èµ·ï¼Œè½¬åŒ–ä¸ºæ— çº¦æŸæ¡ä»¶çš„æå€¼é—®é¢˜)è§pdf</p><p>æ€»ç»“ï¼š</p><ol><li>ä¸ºæ±‚å¾—$$P(w_j|z_k)$$å’Œ$$P(z_k|d_i)$$ï¼Œå› æ­¤ç”¨EMç®—æ³•å»ä¼°è®¡$$\theta=(P(w_j|z_k),z_k|d_i)$$è¿™ä¸ªå‚æ•°</li><li>$$\phi_{k,j}$$è¡¨ç¤ºè¯é¡¹$$w_j$$å‡ºç°åœ¨ä¸»é¢˜$$z_k$$ä¸­çš„é¢‘ç‡ï¼Œå³$$P(w_j|z_k)=\phi_{k,j}$$ï¼Œä»è€ŒæŠŠ$$P(w_j|z_k)$$è½¬æ¢æˆçŸ©é˜µ$$\Phi$$</li><li>$$\theta_{i,k}$$è¡¨ç¤ºä¸»é¢˜$$z_k$$å‡ºç°åœ¨æ–‡æ¡£$$d_i$$ä¸­çš„é¢‘ç‡ï¼Œå³$$P(z_k|d_i)=\theta_{k,i}$$ï¼Œä»è€ŒæŠŠ$$P(z_k|d_i)$$è½¬æ¢æˆçŸ©é˜µ$$\Theta$$</li><li>æœ€åé€šè¿‡EMç®—æ³•æ±‚å‡ºä¸¤ä¸ªçŸ©é˜µ</li></ol><h5 id="4-2-3-2-1æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•"><a href="#4-2-3-2-1æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•" class="headerlink" title="4.2.3.2.1æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•"></a>4.2.3.2.1æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•</h5><ol><li>æ²¡æœ‰çº¦æŸæ¡ä»¶</li></ol><p>ç›®æ ‡å‡½æ•°$$f(x,y)$$æ˜¯ä¸€åº§å±±çš„é«˜åº¦ï¼Œçº¦æŸ$$g(x,y)$$æ˜¯é•¶åµŒåœ¨å±±ä¸Šçš„ä¸€æ¡æ›²çº¿ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=MTMwOTI0ZDhiOWRkMzJiODUxOGY1ZDY1OTYyMzdiZmJfTVcyWmNhRFBTZmhoSVRCTVFKUmVQRDlpY3g5M1oyQk5fVG9rZW46TzJydmJVWEowb0I5aUV4VVRtbGNsaFFzblZoXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><p>çº¢çº¿æ˜¯çº¦æŸæ›²çº¿</p><p>ç›®çš„ï¼šæ‰¾çº¢çº¿ä¸Šçš„æœ€ä½ç‚¹</p><p>æ­¥éª¤ï¼š</p><ul><li>ä»ç¬¬0æ¡çº¿å¼€å§‹å¾€ä¸Šæ•°ï¼Œæ•°åˆ°ç¬¬ä¸‰æ¡ï¼Œä¸çº¦æŸæ›²çº¿æœ‰äº¤ç‚¹ï¼Œæ¯”ç¬¬ä¸‰æ¡ä½çš„åœ°æ–¹éƒ½ä¸åœ¨çº¦æŸèŒƒå›´å†…ï¼Œæ‰€ä»¥è¿™æ˜¯çº¦æŸæ›²çº¿çš„æœ€ä½ç‚¹</li><li>çº¦æŸæ›²çº¿ä¸ä¼šå’Œç­‰é«˜çº¿ç›¸äº¤ï¼Œä¸€å®šæ˜¯ç›¸åˆ‡ï¼Œå¦‚æœæ˜¯ç›¸äº¤çš„è¯ï¼Œçº¦æŸæ›²çº¿æœ‰ä¸€éƒ¨åˆ†åœ¨æœ€ä½ç‚¹çš„æ›²çº¿çš„ä¸‹ç«¯(å³ç›®æ ‡æ›²çº¿å¹¶ä¸èƒ½åŒ…æ‹¬çº¦æŸæ›²çº¿çš„æœ€ä½ç‚¹)ï¼Œå¦‚ä¸‹å›¾ä¸­çº¦æŸæ›²çº¿æœ‰ä¸€éƒ¨åˆ†åœ¨BåŒºåŸŸï¼Œä½†æ˜¯BåŒºåŸŸæ¯”ç­‰é«˜çº¿ä½<ul><li><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=MmJhNGExNjkwMWU5ODlkN2UwZDk2YjE0YmMyZTUzOWRfSDBWbkZvMTgwM1lrclRrUnEwaEd6TWRWRkhtWDhTbkdfVG9rZW46RkM2WWI1ekZXb1Q3VDZ4dWtVRGNNN1J2bmpjXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></li></ul></li><li>é‚£ä¹ˆä¸¤æ¡çº¿åªèƒ½ç›¸åˆ‡ï¼Œæ„å‘³ä»–ä»¬çš„æ³•çº¿å¹³è¡Œ&lt;==&gt;æ³•å‘é‡åªå·®ä¸€ä¸ªä»»æ„çš„å¸¸æ•°ä¹˜å­(å–-$$\lambda$$)ï¼š<ul><li><p>âˆ‡$$f(x,y)=-\lambda$$âˆ‡$$g(x,y)$$</p></li><li><p>âˆ‡$$f(x,y)+\lambda$$âˆ‡$$g(x,y)=0$$</p></li></ul></li></ul><ol><li><a href="https://zhuanlan.zhihu.com/p/55532322">æœ‰çº¦æŸæ¡ä»¶</a></li></ol><p>è§pdf</p><h2 id="4-3LDAæ¨¡å‹"><a href="#4-3LDAæ¨¡å‹" class="headerlink" title="4.3LDAæ¨¡å‹"></a>4.3LDAæ¨¡å‹</h2><h3 id="4-3-1pLSAå’ŒLDAçš„å¯¹æ¯”ï¼šç”Ÿæˆæ–‡æ¡£ä¸å‚æ•°ä¼°è®¡"><a href="#4-3-1pLSAå’ŒLDAçš„å¯¹æ¯”ï¼šç”Ÿæˆæ–‡æ¡£ä¸å‚æ•°ä¼°è®¡" class="headerlink" title="4.3.1pLSAå’ŒLDAçš„å¯¹æ¯”ï¼šç”Ÿæˆæ–‡æ¡£ä¸å‚æ•°ä¼°è®¡"></a>4.3.1pLSAå’ŒLDAçš„å¯¹æ¯”ï¼šç”Ÿæˆæ–‡æ¡£ä¸å‚æ•°ä¼°è®¡</h3><p>ğŸ‘‡é¢‘ç‡æ´¾vsè´å¶æ–¯æ´¾</p><p>This content is only supported in a Feishu Docs</p><p><strong>LDA</strong>æ¨¡å‹ä¸­ä¸€ç¯‡æ–‡æ¡£ç”Ÿæˆçš„æ–¹å¼ï¼š</p><ol><li>æŒ‰ç…§å…ˆéªŒåˆ†å¸ƒ$$P(d_i)$$é€‰æ‹©ä¸€ç¯‡æ–‡æ¡£$$d_i$$</li><li>ä»Dirichletåˆ†å¸ƒ$$\alpha$$ä¸­å–æ ·ç”Ÿæˆæ–‡æ¡£$$d_i$$çš„ä¸»é¢˜åˆ†å¸ƒ$$\theta_i$$ï¼Œå³ä¸»é¢˜åˆ†å¸ƒ$$\theta_i$$ç”±è¶…å‚æ•°ä¸º$$\alpha$$çš„Dirichletåˆ†å¸ƒç”Ÿæˆâ‘ </li><li>ä»ä¸»é¢˜çš„å¤šé¡¹å¼åˆ†å¸ƒ$$\theta_i$$ä¸­å–æ ·ç”Ÿæˆæ–‡æ¡£$$d_i$$ç¬¬$$j$$ä¸ªè¯çš„ä¸»é¢˜$$z_{i,j}$$</li><li>ä»Dirichletåˆ†å¸ƒ$$\beta$$ä¸­å–æ ·ç”Ÿæˆä¸»é¢˜$$z_{i,j}$$å¯¹åº”çš„è¯è¯­åˆ†å¸ƒ$$\phi_{z_i,j}$$ï¼Œå³è¯è¯­åˆ†å¸ƒ$$\phi_{z_i,j}$$ç”±å‚æ•°ä¸º$$\beta$$çš„Dirichletåˆ†å¸ƒç”Ÿæˆâ‘¡</li><li>ä»è¯è¯­çš„å¤šé¡¹å¼åˆ†$$\phi_{z_i,j}$$ä¸­é‡‡æ ·æœ€ç»ˆç”Ÿæˆè¯è¯­$$w_{i,j}$$</li></ol><p>ğŸ‘‡LDAå’ŒpLSAçš„åŒºåˆ«ï¼š</p><ul><li>LDAæ˜¯pLSAçš„è´å¶æ–¯ç‰ˆæœ¬ï¼Œä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒæœ¬èº«éƒ½ç”±å…ˆéªŒçŸ¥è¯†éšæœºç»™å®š</li><li>â‘ â‘¡LDAåœ¨pLSAçš„åŸºç¡€ä¸Šä¸ºä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒåŠ äº†ä¸¤ä¸ªDirichletå…ˆéªŒåˆ†å¸ƒ$$\alpha$$å’Œ$$\beta$$</li><li><strong>pLSA</strong>ä¸­ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒæ˜¯å”¯ä¸€ç¡®å®šçš„ï¼Œä½†æ˜¯<strong>LDA</strong>ä¸­ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒä¸å†å”¯ä¸€ç¡®å®šä¸å˜ï¼Œå³æ— æ³•ç¡®åˆ‡ç»™å‡ºï¼Œä½†æ˜¯å†æ€ä¹ˆå˜åŒ–ä¹Ÿä¾ç„¶æœä»ä¸€å®šçš„åˆ†å¸ƒï¼Œå³ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒç”±Dirichletå…ˆéªŒéšæœºç¡®å®š</li><li>æ–‡æœ¬ç”Ÿæˆåï¼Œä¸¤è€…éƒ½è¦æ ¹æ®æ–‡æ¡£å»æ¨æ–­ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒï¼Œåªæ˜¯ç”¨çš„å‚æ•°æ¨æ–­æ–¹æ³•ä¸åŒ<ul><li>pLSAä¸­ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡çš„æ€æƒ³</li><li>LDAä¸­æŠŠä¸¤ä¸ªå‚æ•°è§†ä¸ºéšæœºå˜é‡ï¼ŒåŠ å…¥Dirichletå…ˆéªŒ</li></ul></li><li>pLSAå±äºé¢‘ç‡æ´¾æ€æƒ³ï¼Œæ ·æœ¬éšæœºï¼Œå‚æ•°($$\theta_{k,j}$$å’Œ$$\phi_{i,j}$$)è™½æœªçŸ¥ä½†å›ºå®šï¼›LDAå±äºè´å¶æ–¯æ´¾æ€æƒ³ï¼Œæ ·æœ¬å›ºå®šï¼Œå‚æ•°($$\theta_i$$å’Œ$$\phi_{z_i,j}$$)æœªçŸ¥ä½†ä¸å›ºå®šï¼Œæ˜¯ä¸ªéšæœºå˜é‡ï¼Œæœä»ä¸€å®šçš„åˆ†å¸ƒ(Dirichletåˆ†å¸ƒ)<ul><li><strong>pLSAä¸­</strong><ul><li>ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒç¡®å®šåï¼Œä»¥ä¸€å®šæ¦‚ç‡$$\left(P(z_k|d_i),P(w_j|z_k)\right)$$åˆ†åˆ«é€‰å–å…·ä½“çš„ä¸»é¢˜å’Œè¯é¡¹ï¼Œç”Ÿæˆå¥½æ–‡æ¡£</li><li>ç„¶åæ ¹æ®ç”Ÿæˆå¥½çš„æ–‡æ¡£åæ¨å…¶ä¸»é¢˜åˆ†å¸ƒã€è¯åˆ†å¸ƒ</li><li>æœ€ç»ˆç”¨EMç®—æ³•æ±‚è§£å‡ºä¸¤ä¸ªæœªçŸ¥ä½†å›ºå®šçš„å‚æ•°çš„å€¼ï¼š<ul><li>$$\phi_{k,j}$$(ç”±$$P(w_j|z_k)$$è½¬æ¢è€Œæ¥)</li><li>$$\theta_{i,k}$$(ç”±$$P(z_k|d_i)$$è½¬æ¢è€Œæ¥)</li><li><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmZmM2I5NTIwMDVmMDAwZTFiNDI0ZGZkODg1YjlkNDJfc0ZneU15SGowRW1yRDRleDRLUXd4RFV6Q1Q3OWpja2JfVG9rZW46TWFudGJ1S2Q5b3VCNW94MndUeGNUU0pCblVkXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></li></ul></li></ul></li><li><strong>LDA****ä¸­</strong><ul><li>ä¸»é¢˜åˆ†å¸ƒå’Œè¯åˆ†å¸ƒæ˜¯éšæœºå˜é‡(å³æ–‡æ¡£$$d_i$$äº§ç”Ÿä¸»é¢˜$$z_k$$å’Œä¸»é¢˜$$z_k$$äº§ç”Ÿè¯é¡¹$$w_j$$çš„æ¦‚ç‡éƒ½æ˜¯éšæœºå˜é‡)</li><li>Dirichletå…ˆéªŒä¸ºæ–‡æ¡£$$d_i$$ç”Ÿæˆä¸»é¢˜åˆ†å¸ƒ$$\Theta$$ï¼Œç„¶åæ ¹æ®ä¸»é¢˜åˆ†å¸ƒ$$\Theta$$äº§ç”Ÿä¸»é¢˜$$z_k$$</li><li>ä»æ— ç©·å¤šä¸ªä¸»é¢˜åˆ†å¸ƒä¸­æŒ‰ç…§Dirichletå…ˆéªŒéšæœºæŠ½å–å‡ºæŸä¸ªä¸»é¢˜åˆ†å¸ƒå‡ºæ¥</li><li><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=YzgwODJiZjFlYWUzNTQ0N2YxMGJiM2ViMjZlMTU3YmNfZHlCY1NXOE5ObWxsdDFoajBPS1dnU3FWRTZJdklHbGJfVG9rZW46V3hma2IzRnRobzI1TXJ4bkVYUGNtR2g4blFkXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></li></ul></li></ul></li><li>ä¾‹å­<ul><li>å¥½æ¯”ï¼Œå»ä¸€æœ‹å‹å®¶ï¼š<ul><li>æŒ‰ç…§<strong>é¢‘ç‡æ´¾</strong>çš„æ€æƒ³ï¼Œæˆ‘ä¼°è®¡ä»–åœ¨å®¶çš„æ¦‚ç‡æ˜¯1/2ï¼Œä¸åœ¨å®¶çš„æ¦‚ç‡ä¹Ÿæ˜¯1/2ï¼Œæ˜¯ä¸ª<strong>å®šå€¼</strong>ã€‚</li><li>è€ŒæŒ‰ç…§è´å¶æ–¯æ´¾çš„æ€æƒ³ï¼Œä»–åœ¨å®¶ä¸åœ¨å®¶çš„æ¦‚ç‡ä¸å†è®¤ä¸ºæ˜¯ä¸ªå®šå€¼1/2ï¼Œè€Œæ˜¯éšæœºå˜é‡ã€‚æ¯”å¦‚æŒ‰ç…§æˆ‘ä»¬çš„ç»éªŒï¼ˆæ¯”å¦‚å½“å¤©å‘¨æœ«ï¼‰ï¼ŒçŒœæµ‹ä»–åœ¨å®¶çš„æ¦‚ç‡æ˜¯0.6ï¼Œä½†è¿™ä¸ª0.6ä¸æ˜¯è¯´å°±æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯0.7ã€‚å¦‚æ­¤ï¼Œè´å¶æ–¯æ´¾æ²¡æ³•ç¡®åˆ‡ç»™å‡ºå‚æ•°çš„ç¡®å®šå€¼ï¼ˆ0.3,0.4ï¼Œ0.6,0.7ï¼Œ0.8,0.9éƒ½æœ‰å¯èƒ½ï¼‰ï¼Œä½†è‡³å°‘æ˜ç™½åœ¨å“ªä¸ªèŒƒå›´æˆ–å“ªäº›å–å€¼ï¼ˆ0.6,0.7ï¼Œ0.8,0.9ï¼‰æ›´æœ‰å¯èƒ½ï¼Œå“ªä¸ªèŒƒå›´æˆ–å“ªäº›å–å€¼ï¼ˆ0.3,0.4ï¼‰ ä¸å¤ªå¯èƒ½ã€‚è¿›ä¸€æ­¥ï¼Œè´å¶æ–¯ä¼°è®¡ä¸­ï¼Œå‚æ•°çš„å¤šä¸ªä¼°è®¡å€¼æœä»ä¸€å®šçš„å…ˆéªŒåˆ†å¸ƒï¼Œè€Œåæ ¹æ®å®è·µè·å¾—çš„æ•°æ®ï¼ˆä¾‹å¦‚å‘¨æœ«ä¸æ–­è·‘ä»–å®¶ï¼‰ï¼Œä¸æ–­ä¿®æ­£ä¹‹å‰çš„å‚æ•°ä¼°è®¡ï¼Œä»å…ˆéªŒåˆ†å¸ƒæ…¢æ…¢è¿‡æ¸¡åˆ°åéªŒåˆ†å¸ƒã€‚</li></ul></li></ul></li></ul><h3 id="4-3-2LDAç”Ÿæˆæ–‡æ¡£â€“ä¸‰ç»´åæ ‡ç³»"><a href="#4-3-2LDAç”Ÿæˆæ–‡æ¡£â€“ä¸‰ç»´åæ ‡ç³»" class="headerlink" title="4.3.2LDAç”Ÿæˆæ–‡æ¡£â€“ä¸‰ç»´åæ ‡ç³»"></a>4.3.2LDAç”Ÿæˆæ–‡æ¡£â€“ä¸‰ç»´åæ ‡ç³»</h3><p><a href="https://blog.csdn.net/v_JULY_v/article/details/41209515?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&amp;utm_relevant_index=2">çœ‹</a></p><h3 id="4-3-3pLSAå’ŒLDAæ¦‚ç‡å›¾å¯¹æ¯”"><a href="#4-3-3pLSAå’ŒLDAæ¦‚ç‡å›¾å¯¹æ¯”" class="headerlink" title="4.3.3pLSAå’ŒLDAæ¦‚ç‡å›¾å¯¹æ¯”"></a>4.3.3pLSAå’ŒLDAæ¦‚ç‡å›¾å¯¹æ¯”</h3><p>zè·Ÿwéƒ½å¾—æ˜¯å°å†™ï¼Œé˜´å½±åœ†åœˆè¡¨ç¤ºå¯è§‚æµ‹çš„å˜é‡ï¼Œéé˜´å½±åœ†åœˆè¡¨ç¤ºéšå˜é‡æˆ–å‚æ•°ï¼Œç®­å¤´è¡¨ç¤ºä¸¤å˜é‡é—´çš„æ¡ä»¶ä¾èµ–æ€§ï¼Œæ–¹æ¡†è¡¨ç¤ºé‡å¤æŠ½æ ·ï¼Œæ–¹æ¡†å³ä¸‹è§’çš„æ•°å­—ä»£è¡¨é‡å¤æŠ½æ ·çš„æ¬¡æ•°</p><ul><li>pLSA<ul><li><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA5OGI5MTU5OWMyZTk3ZGY2MDJmYmEwYmQ3NWE3MjVfVk80STExMjAxQlpSZ0FiVDhSdExUVU5uYUQwZjgyV0dfVG9rZW46S29FQWJhTG9Sb3ZJZFh4RnN4M2NNS2p6bmZWXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></li></ul></li><li>LDA <ul><li><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk4MDRmYTNmNDY1Y2FlODQ4NGY1NzNmMzE3ZjQ0ODZfNWx2azF5cm5LTjd0c3dxSU45WVlZSzU3NTYwRGg3NHRfVG9rZW46STBtZGI5WjE4b1JmenZ4RjVJMGNrR2xhblJiXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p></li><li><p>å‡å®šè¯­æ–™åº“ä¸­å…±æœ‰Mç¯‡æ–‡ç« ï¼Œæ¯ç¯‡æ–‡ç« ä¸‹çš„Topicçš„ä¸»é¢˜åˆ†å¸ƒæ˜¯ä¸€ä¸ªä»å‚æ•°ä¸º$$\alpha$$çš„Dirichletå…ˆéªŒåˆ†å¸ƒä¸­é‡‡æ ·å¾—åˆ°çš„Multinomialåˆ†å¸ƒï¼Œæ¯ä¸ªTopicä¸‹çš„è¯åˆ†å¸ƒæ˜¯ä¸€ä¸ªä»å‚æ•°$$\beta$$ä¸ºçš„Dirichletå…ˆéªŒåˆ†å¸ƒä¸­é‡‡æ ·å¾—åˆ°çš„Multinomialåˆ†å¸ƒã€‚</p></li><li><p>å¯¹äºæŸç¯‡æ–‡ç« ä¸­çš„ç¬¬nä¸ªè¯ï¼Œé¦–å…ˆä»è¯¥æ–‡ç« ä¸­å‡ºç°çš„æ¯ä¸ªä¸»é¢˜çš„Multinomialåˆ†å¸ƒä¸­é€‰æ‹©æˆ–é‡‡æ ·ä¸€ä¸ªä¸»é¢˜ï¼Œç„¶åå†åœ¨è¿™ä¸ªä¸»é¢˜å¯¹åº”çš„è¯çš„Multinomialåˆ†å¸ƒä¸­é€‰æ‹©æˆ–é‡‡æ ·ä¸€ä¸ªè¯ã€‚ä¸æ–­é‡å¤è¿™ä¸ªéšæœºç”Ÿæˆè¿‡ç¨‹ï¼Œç›´åˆ°Mç¯‡æ–‡ç« å…¨éƒ¨ç”Ÿæˆå®Œæˆã€‚</p></li><li><p>M ç¯‡æ–‡æ¡£ä¼šå¯¹åº”äº M ä¸ªç‹¬ç«‹çš„ Dirichlet-Multinomial å…±è½­ç»“æ„ï¼ŒK ä¸ª topic ä¼šå¯¹åº”äº K ä¸ªç‹¬ç«‹çš„ Dirichlet-Multinomial å…±è½­ç»“æ„</p><ul><li>$$\alpha\rightarrow\theta\rightarrow z$$è¡¨ç¤ºç”Ÿæˆæ–‡æ¡£ä¸­çš„æ‰€æœ‰è¯å¯¹åº”çš„ä¸»é¢˜<ul><li>$$\alpha\rightarrow\theta$$å¯¹åº”çš„æ˜¯Dirichletåˆ†å¸ƒ</li><li>$$\theta\rightarrow z$$å¯¹åº”çš„æ˜¯Multinomialåˆ†å¸ƒ</li><li>â€‹      å› æ­¤æ•´ä½“æ˜¯ä¸€ä¸ªDirichlet-Multinomialå…±è½­ç»“æ„</li></ul></li><li>$$\beta\rightarrow\theta\rightarrow w$$è¡¨ç¤ºæŸä¸ªä¸»é¢˜å¯¹åº”çš„è¯<ul><li>åŒä¸Š</li></ul></li></ul></li></ul></li></ul><h3 id="4-3-4pLSAå’ŒLDAå‚æ•°ä¼°è®¡æ–¹æ³•çš„å¯¹æ¯”"><a href="#4-3-4pLSAå’ŒLDAå‚æ•°ä¼°è®¡æ–¹æ³•çš„å¯¹æ¯”" class="headerlink" title="4.3.4pLSAå’ŒLDAå‚æ•°ä¼°è®¡æ–¹æ³•çš„å¯¹æ¯”"></a>4.3.4pLSAå’ŒLDAå‚æ•°ä¼°è®¡æ–¹æ³•çš„å¯¹æ¯”</h3><ul><li>pLSA<ul><li>ä½¿ç”¨EMç®—æ³•ä¼°è®¡$$\Phi$$å’Œ$$\Theta$$ï¼Œä½¿ç”¨çš„æ€æƒ³æ˜¯æå¤§ä¼¼ç„¶ä¼°è®¡</li></ul></li><li>LDA<ul><li>ä¼°è®¡$$\Phi$$å’Œ$$\Theta$$å¯ç”¨å˜åˆ†(Variational inference)-EMç®—æ³•<strong>ï¼Œ</strong>ä¹Ÿå¯ä»¥ç”¨gibbsé‡‡æ ·<strong>ï¼Œ</strong>å‰è€…çš„æ€æƒ³æ˜¯æœ€å¤§åéªŒä¼°è®¡MAPï¼ˆMAPä¸MLEç±»ä¼¼ï¼Œéƒ½æŠŠæœªçŸ¥å‚æ•°å½“ä½œå›ºå®šçš„å€¼ï¼‰ï¼Œåè€…çš„æ€æƒ³æ˜¯è´å¶æ–¯ä¼°è®¡</li></ul></li></ul><h3 id="4-3-5Gibbsé‡‡æ ·"><a href="#4-3-5Gibbsé‡‡æ ·" class="headerlink" title="4.3.5Gibbsé‡‡æ ·"></a>4.3.5Gibbsé‡‡æ ·</h3><p>GibbsæŠ½æ ·æ˜¯é©¬å°”å¯å¤«é“¾è’™ç‰¹å¡å°”ç†è®ºï¼ˆMCMCï¼‰ä¸­ç”¨æ¥è·å–ä¸€ç³»åˆ—è¿‘ä¼¼ç­‰äºæŒ‡å®šå¤šç»´æ¦‚ç‡åˆ†å¸ƒï¼ˆæ¯”å¦‚2ä¸ªæˆ–è€…å¤šä¸ªéšæœºå˜é‡çš„è”åˆæ¦‚ç‡åˆ†å¸ƒï¼‰è§‚å¯Ÿæ ·æœ¬çš„ç®—æ³•ã€‚</p><h1 id="5-ä»£ç å®ç°"><a href="#5-ä»£ç å®ç°" class="headerlink" title="5.ä»£ç å®ç°"></a>5.ä»£ç å®ç°</h1><p>This content is only supported in a Feishu Docs</p><h2 id="5-1corpora-Dictionary-texts"><a href="#5-1corpora-Dictionary-texts" class="headerlink" title="5.1corpora.Dictionary(texts):"></a>5.1<strong>corpora.Dictionary(texts)</strong>:</h2><p>ä¸ºæ¯ä¸ªå‡ºç°åœ¨è¯­æ–™åº“ä¸­çš„å•è¯åˆ†é…äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·id</p><h2 id="5-2dictionary-doc2bow"><a href="#5-2dictionary-doc2bow" class="headerlink" title="5.2dictionary.doc2bow():"></a>5.2<strong>dictionary.doc2bow()</strong>:</h2><p>æŠŠæ–‡æ¡£å˜æˆä¸€ä¸ªç¨€ç–å‘é‡ï¼Œ[(0,1), (1,1)]ï¼Œè¡¨æ˜idä¸º0ï¼Œ1çš„è¯æ±‡å‡ºç°äº†ä¸€æ¬¡ï¼Œè€Œå…¶ä»–è¯æ±‡æ²¡æœ‰å‡ºç°</p><h2 id="5-3models-Ldamodel"><a href="#5-3models-Ldamodel" class="headerlink" title="5.3models.Ldamodel:"></a>5.3<strong>models.Ldamodel</strong>:</h2><p><strong>å‚æ•°ï¼š</strong></p><p>corpusï¼šä¸€ç»„æ–‡æ¡£çš„è¯­æ–™åº“ï¼Œæ˜¯list of list of tupleçš„å½¢å¼ï¼Œæ¯ä¸ªlistå†…çš„å…ƒç´ æ˜¯(word_id, count)ï¼Œè¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£ä¸­æ¯ä¸ªè¯å‡ºç°çš„æ¬¡æ•°</p><p>num_topicsï¼šä¸»é¢˜æ•°é‡</p><p>id2wordï¼šå°†æ¯ä¸ªè¯çš„idæ˜ å°„åˆ°è¯¥è¯çš„å­—ç¬¦ä¸²è¡¨ç¤º</p><p>passesï¼šåœ¨æ‹Ÿåˆæ¨¡å‹ä¸­è¦æ‰§è¡Œçš„è¿­ä»£æ¬¡æ•°</p><p>random_stateï¼šéšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­</p><h2 id="5-4ldamodel-show-topics"><a href="#5-4ldamodel-show-topics" class="headerlink" title="5.4ldamodel.show_topics"></a>5.4ldamodel.show_topics</h2><p>ç”¨äºå±•ç¤ºLDAæ¨¡å‹çš„ä¸»é¢˜å‡½æ•°</p><h3 id="5-4-1x"><a href="#5-4-1x" class="headerlink" title="5.4.1x"></a>5.4.1x</h3><p>æ ¼å¼ï¼š</p><p>[</p><p>(ä¸»é¢˜1ï¼Œ[(å…³é”®è¯1.1ï¼Œæ¦‚ç‡1.1),(å…³é”®è¯1.2ï¼Œæ¦‚ç‡1.2)â€¦])ï¼Œ</p><p>(ä¸»é¢˜2ï¼Œ[(å…³é”®è¯2.1ï¼Œæ¦‚ç‡2.1),(å…³é”®è¯2.2ï¼Œæ¦‚ç‡2.2)â€¦])ï¼Œ</p><p>()ï¼Œ</p><p>â€¦.]</p><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=NmRmY2QzNWM1MTFmYWM3OTk2YWJmZDFkZTFjZTdmZmRfc080bTB6YlBKeEQ2VjdjZ3l3N0VyQTN2dDhZM1lTSUVfVG9rZW46SmtmY2JxWHRSbzBOczN4WVJ6RmM1NERLbnRjXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><h3 id="5-4-2tp"><a href="#5-4-2tp" class="headerlink" title="5.4.2tp"></a>5.4.2tp</h3><p>tp[0]â€“&gt;ä¸»é¢˜</p><p>tp[1]â€“&gt;[(å…³é”®è¯1ï¼Œæ¦‚ç‡1),(å…³é”®è¯2ï¼Œæ¦‚ç‡2)â€¦]</p><h3 id="5-4-3æ‰“å°æ¯ä¸ªä¸»é¢˜ä¸‹æ¯ä¸ªå•è¯çš„æ¦‚ç‡"><a href="#5-4-3æ‰“å°æ¯ä¸ªä¸»é¢˜ä¸‹æ¯ä¸ªå•è¯çš„æ¦‚ç‡" class="headerlink" title="5.4.3æ‰“å°æ¯ä¸ªä¸»é¢˜ä¸‹æ¯ä¸ªå•è¯çš„æ¦‚ç‡"></a>5.4.3æ‰“å°æ¯ä¸ªä¸»é¢˜ä¸‹æ¯ä¸ªå•è¯çš„æ¦‚ç‡</h3><p>This content is only supported in a Feishu Docs</p><p>ğŸ‘‡ç”¨.split()å‡½æ•°</p><ul><li>å…ˆæŒ‰ç…§â€+â€å·è¿›è¡Œæ‹†åˆ†</li><li>ç„¶åå¯¹äºä»¥â€+â€å·æ‹†åˆ†å‡ºæ¥çš„ä¸œè¥¿ï¼Œå†ä»¥â€*â€å·è¿›è¡Œæ‹†åˆ†</li><li>æ‰“å°æ ¼å¼ï¼šâ€å•è¯â€(å•è¯å‡ºç°çš„æ¦‚ç‡)</li></ul><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ2NTAzNTA0OTc3Mjc0OGNmZDBlN2UwY2NlOTYzMzVfRnM5RHRNRGpLMHpweU5ZTTA3bm5USzZSQ3RnZDBRMDBfVG9rZW46U3VUVGJGaFI5b1BCcDN4ZFkxQ2NMRXVSbjNnXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><h3 id="5-4-4è®¡ç®—ä¸€è‡´æ€§"><a href="#5-4-4è®¡ç®—ä¸€è‡´æ€§" class="headerlink" title="5.4.4è®¡ç®—ä¸€è‡´æ€§"></a>5.4.4è®¡ç®—ä¸€è‡´æ€§</h3><p><strong>CoherenceModel(model, texts, dictionary, coherence)</strong></p><p>modelï¼šæŒ‡å®šç”¨äºè®¡ç®—ä¸€è‡´æ€§çš„ä¸»é¢˜æ¨¡å‹å¯¹è±¡(ldamodel)</p><p>textï¼šæŒ‡å®šä¸€ä¸ªæ–‡æœ¬åˆ—è¡¨</p><p>dictionaryï¼šæŒ‡å®šä¸€ä¸ªè¯å…¸å¯¹è±¡</p><p>coherenceï¼šæŒ‡å®šè¦è®¡ç®—çš„ä¸€è‡´æ€§æŒ‡æ ‡</p><ul><li>C_Vï¼šè¡¡é‡ä¸»é¢˜å†…éƒ¨çš„ä¸€è‡´æ€§å’Œä¸»é¢˜ä¹‹é—´çš„äº’å¼‚æ€§</li></ul><p>è¿”å›çš„æ˜¯ä¸€è‡´æ€§è¯„åˆ†ï¼Œåˆ†æ•°è¶Šé«˜ï¼Œè¡¨ç¤ºä¸»é¢˜æ¨¡å‹çš„ä¸»é¢˜æ›´å…·æœ‰ä¸€è‡´æ€§ï¼Œä¸€è‡´æ€§è¯„åˆ†ä»…ç”¨äºæ¯”è¾ƒä¸åŒä¸»é¢˜æ¨¡å‹ä¹‹é—´çš„ä¸€è‡´æ€§</p><p>This content is only supported in a Feishu Docs</p><p>å‘ç°ï¼Œå½“ä¸»é¢˜æ•°ç›®ä¸º10çš„æ—¶å€™ï¼Œåä¸ªä¸åŒçš„ä¸»é¢˜ä¹‹é—´çš„coherenceå€¼è¾ƒå¤§ï¼Œä¸€è‡´æ€§è¾ƒé«˜ã€‚è¿™å››ä¸ªä¸»é¢˜ä¸‹çš„å…³é”®è¯èƒ½å¤Ÿå¾ˆå¥½åœ°æ¦‚æ‹¬æ‰€æœ‰æ–‡æ¡£çš„å…³é”®è¯</p><h1 id="6-æ²¡æ‡‚çš„åœ°æ–¹"><a href="#6-æ²¡æ‡‚çš„åœ°æ–¹" class="headerlink" title="6.æ²¡æ‡‚çš„åœ°æ–¹"></a>6.æ²¡æ‡‚çš„åœ°æ–¹</h1><ol><li>ç¬¬å››è¡Œåˆ°ç¬¬äº”è¡Œ</li></ol><p><img src="https://oa7vrw2neqh.feishu.cn/space/api/box/stream/download/asynccode/?code=YmNmYjVmYjU0MjZmNGU5MTI4YzVmZTM5OTg0MWRiYTVfQ0pCQWxKM1c3ZzczU3o4MGRqQW55aENYeUhmd05kSXVfVG9rZW46SGI4M2JSOTlob1FuTEN4YVhNRWNCQm9Pbk5lXzE2OTA0NjAwNjY6MTY5MDQ2MzY2Nl9WNA" alt="img"></p><p>$$\newcommand{\sigmoid}{\text{sigmoid}}$$</p><p>$$\sigmoid(x)$$</p>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DMIRè€ƒæ ¸ </tag>
            
            <tag> NLP </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> LDA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åŸâ€”â€”â€”â€”DMIRè€ƒæ ¸ä»“åº“</title>
      <link href="/2023/05/02/ru-fen-dmir-kao-he/"/>
      <url>/2023/05/02/ru-fen-dmir-kao-he/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/Wabbybabb0/DMIR_assessment">è€ƒæ ¸å†…å®¹åŠæäº¤</a></p>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DMIRè€ƒæ ¸ </tag>
            
            <tag> NLP </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿™ç¢Œçš„äº”æœˆâ€”â€”â€”â€”è€ƒæ ¸ï¼Œæ¯”èµ›ä¸ç—…ç—›</title>
      <link href="/2023/05/01/2023.5-yue-zong-jie/"/>
      <url>/2023/05/01/2023.5-yue-zong-jie/</url>
      
        <content type="html"><![CDATA[<ul><li>åœ¨äº”ä¸€åŠ³åŠ¨èŠ‚å‘å¸ƒçš„è€ƒæ ¸é¢˜(ä¸ºæœŸä¸€ä¸ªæœˆ)</li><li>4æœˆ29åˆ°5æœˆ7çš„æ•°æ¨¡æ ¡èµ›</li><li>5æœˆ4åˆ°5æœˆ10ğŸäº†</li><li>5æœˆ13ç„Šæ¥æ¯”èµ›</li><li>å‰©ä¸‹çš„æ—¶é—´è¡¥ä¹‹å‰çš„è¯¾å†…å’Œå¼€å§‹åšDMIRè€ƒæ ¸**(æµ“ç¼©çš„ä¸æ˜¯ç²¾åï¼Œæ˜¯å¯¿å‘½T^T)**</li></ul>]]></content>
      
      
      <categories>
          
          <category> æœˆæ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœˆæ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åŸâ€”â€”â€”â€”QGå·¥ä½œå®¤è®­ç»ƒè¥â€”â€”â€”â€”å¤§ç»„ä½œä¸šä»“åº“</title>
      <link href="/2023/03/25/ru-fen-qg-kao-he-zhi-da-zu-zuo-ye/"/>
      <url>/2023/03/25/ru-fen-qg-kao-he-zhi-da-zu-zuo-ye/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/Wabbybabb0/QG_big_group">WB-QGå¤§ç»„ä½œä¸šä»“åº“</a></p><p>weekdayä¸Šè¯¾å¯¹äºæˆ‘æ¥è¯´å°±æ˜¯æ”¾å‡å•Š</p><p>å‘¨äº”æ™šä¸Šå¸ˆå…„å¸ˆå§å¸ƒç½®å®Œä½œä¸šï¼Œå‘¨æ—¥æ™šä¸Š23:59:59å°±è¦äº¤äº†</p><p>è°è·Ÿæˆ‘è¯´ä¸Šäº†å¤§å­¦å°±è½»æ¾çš„(<strong>é€ä½ ä¸€é”¤!</strong>)</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> QGè€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åŸâ€”â€”â€”â€”QGå·¥ä½œå®¤è®­ç»ƒè¥â€”â€”â€”â€”å°ç»„ä½œä¸šä»“åº“</title>
      <link href="/2023/03/25/ru-fen-qg-kao-he-zhi-xiao-zu-zuo-ye/"/>
      <url>/2023/03/25/ru-fen-qg-kao-he-zhi-xiao-zu-zuo-ye/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/Wabbybabb0/QG_small_group">WB-QGå°ç»„ä½œä¸šä»“åº“</a></p><p>æ²¡é€å°±å¥½</p><p>è®°å½•ä¸€ä¸‹ä¸­æœŸè€ƒæ ¸æ—¶é—´2023_04_02â€”2023_04_10</p><p>æ²¡åšæœ€ç»ˆè€ƒæ ¸æ˜¯å› ä¸ºè·‘è·¯æƒ³å»å¦ä¸€ä¸ªå›¢é˜Ÿäº†</p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> QGè€ƒæ ¸ </tag>
            
            <tag> æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ </tag>
            
            <tag> å¤šæ™ºèƒ½ä½“å…±è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”æ–‡ä»¶</title>
      <link href="/2023/02/10/xiao-bai-wen-jian/"/>
      <url>/2023/02/10/xiao-bai-wen-jian/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€-æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"><a href="#ä¸€-æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ" class="headerlink" title="ä¸€.æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"></a>ä¸€.æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ</h3><p>æ–‡ä»¶ç»“æ„ç±»å‹<strong>FILE</strong></p><p>å…¶ä¸­FILE(ç»“æ„ä½“)åŒ…å«</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span>_ptr<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ptr</strong>è¡¨ç¤ºå½“å‰çš„ä½ç½®æŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰çš„è¯»å†™ä½ç½®</p><h3 id="äºŒ-è·Ÿè¸ªæ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"><a href="#äºŒ-è·Ÿè¸ªæ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ" class="headerlink" title="äºŒ.è·Ÿè¸ªæ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"></a>äºŒ.è·Ÿè¸ªæ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ</h3><h4 id="ftellå‡½æ•°"><a href="#ftellå‡½æ•°" class="headerlink" title="ftellå‡½æ•°"></a>ftellå‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">long</span> <span class="token function">ftell</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ“ä½œæˆåŠŸï¼Œè¿”å›filepointeræ–‡ä»¶åœ°å½“å‰ä½ç½®æŒ‡é’ˆï¼Œ<code>å³ç›¸å¯¹äºæ–‡ä»¶å¼€å¤´çš„ä½ç§»é‡(å­—èŠ‚æ•°)</code></p><p>å¦åˆ™è¿”å›-1L</p><h4 id="feofå‡½æ•°"><a href="#feofå‡½æ•°" class="headerlink" title="feofå‡½æ•°"></a>feofå‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">feof</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æµ‹è¯•filepointeræ–‡ä»¶åœ°ä½ç½®æŒ‡é’ˆæ˜¯å¦æŒ‡å‘æ–‡ä»¶çš„æœ«å°¾</p><p>å¦‚æœfilepointeræ–‡ä»¶çš„ä½ç½®æŒ‡é’ˆå·²æŒ‡å‘æ–‡ä»¶çš„æœ«å°¾ï¼Œåˆ™è¿”å›é€»è¾‘çœŸï¼Œå¦åˆ™è¿”å›é€»è¾‘å‡</p><h3 id="ä¸‰-å®šä½æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"><a href="#ä¸‰-å®šä½æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ" class="headerlink" title="ä¸‰.å®šä½æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ"></a>ä¸‰.å®šä½æ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆ</h3><h4 id="rewindå‡½æ•°"><a href="#rewindå‡½æ•°" class="headerlink" title="rewindå‡½æ•°"></a>rewindå‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">rewind</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>rewindå‡½æ•°å°†filepointeræ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆå¼ºè¡Œå®šä½åˆ°æ–‡ä»¶çš„å¼€å¤´</p><h4 id="fseekå‡½æ•°"><a href="#fseekå‡½æ•°" class="headerlink" title="fseekå‡½æ•°"></a>fseekå‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">fseek</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">,</span> <span class="token keyword">long</span> offest<span class="token punctuation">,</span> <span class="token keyword">int</span> origin<span class="token punctuation">)</span><span class="token comment">//filepointeræ˜¯æ–‡ä»¶æŒ‡é’ˆ</span><span class="token comment">/***offsetæ˜¯åç§»é‡ï¼Œç±»å‹ä¸ºlong intæ–‡ä»¶å¼€å¤´------SEEK_SET--0æ–‡ä»¶å½“å‰ä½ç½®---SEEK_CUR--1æ–‡ä»¶æœ«å°¾------SEEK_END--2//originæ˜¯èµ·å§‹ä½ç½®ï¼Œç±»å‹ä¸ºint</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>fseekå°†filepointeræ–‡ä»¶çš„å½“å‰ä½ç½®æŒ‡é’ˆç§»åŠ¨åˆ°<code>è·ç¦»originçš„offsetä½ç½®å¤„</code></p><p>offset&gt;0ï¼Œè¡¨ç¤ºæ–°ä½ç½®åœ¨originåï¼Œåä¹‹äº¦ç„¶</p><p>è‹¥æ“ä½œæˆåŠŸåˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›é0</p><h3 id="å››-æ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­"><a href="#å››-æ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­" class="headerlink" title="å››.æ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­"></a>å››.æ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­</h3><h4 id="fopen-å‡½æ•°"><a href="#fopen-å‡½æ•°" class="headerlink" title="fopen()å‡½æ•°"></a>fopen()å‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c">FILE <span class="token operator">*</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>filename<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//filenameæ˜¯è¦æ‰“å¼€çš„æ–‡ä»¶åï¼Œæ–‡ä»¶åå‰å¯ä»¥å¸¦è·¯å¾„</span><span class="token comment">//modeæ˜¯æ‰“å¼€æ–¹å¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ–‡ä»¶æ‰“å¼€æˆåŠŸï¼Œåˆ™è¿”å›æŒ‡å‘è¯¥æ–‡ä»¶çš„æŒ‡é’ˆ</p><p>å¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œåˆ™è¿”å›ç©ºæŒ‡é’ˆNULL</p><p>e.g.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">FILE <span class="token operator">*</span>fp<span class="token punctuation">;</span>fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"f1.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ¨èå†™æ³•</span><span class="token comment">//r:æ–‡ä»¶ä¸€å®šè¦å·²å­˜åœ¨</span>fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"c:\\aaa\\f1.txt"</span><span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸æ¨èå†™æ³•</span><span class="token comment">//w+:è‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼Œå¯è¯»å¯å†™</span><span class="token keyword">char</span> filename<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"file\\f1.txt"</span><span class="token punctuation">;</span><span class="token comment">//å­˜å‚¨åˆ°å½“å‰ç›®å½•çš„fileå­ç›®å½•ä¸‹</span>fp <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">"a+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a+:è‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼Œå¯è¯»å¯å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="fclose-å‡½æ•°"><a href="#fclose-å‡½æ•°" class="headerlink" title="fclose()å‡½æ•°"></a>fclose()å‡½æ•°</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">fclose</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ­£å¸¸å…³é—­ï¼Œè¿”å›0ï¼Œå¦åˆ™è¿”å›é0</p><h3 id="äº”-æ–‡ä»¶è¯»å†™"><a href="#äº”-æ–‡ä»¶è¯»å†™" class="headerlink" title="äº”.æ–‡ä»¶è¯»å†™"></a>äº”.æ–‡ä»¶è¯»å†™</h3><h4 id="fgetcå‡½æ•°â€”å­—ç¬¦æ–¹å¼æ–‡ä»¶è¯»å†™"><a href="#fgetcå‡½æ•°â€”å­—ç¬¦æ–¹å¼æ–‡ä»¶è¯»å†™" class="headerlink" title="fgetcå‡½æ•°â€”å­—ç¬¦æ–¹å¼æ–‡ä»¶è¯»å†™"></a>fgetcå‡½æ•°â€”å­—ç¬¦æ–¹å¼æ–‡ä»¶è¯»å†™</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">fgetc</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>fgetcä»filepointeræ–‡ä»¶çš„<code>å½“å‰ä½ç½®</code>è¯»å‡ºä¸€ä¸ªå­—ç¬¦ï¼ŒåŒæ—¶å°†æ–‡ä»¶çš„<code>ä½ç½®æŒ‡é’ˆ_ptr</code>åç§»ä¸€ä¸ªå­—èŠ‚ã€‚è¯»å‡ºçš„å­—èŠ‚ä¸€èˆ¬è¦ä¿å­˜åˆ°ä¸€ä¸ªå­—ç¬¦å‹å˜é‡ä¸­</p><p>å¦‚æœè¯»å–æˆåŠŸï¼Œè¿”å›<strong>è¯»å–çš„å­—èŠ‚å€¼</strong>ï¼›</p><p>å¦‚æœè¯»åˆ°æ–‡ä»¶å°¾æˆ–å‡ºé”™ï¼Œè¿”å›<strong>EOF</strong></p><h4 id="fgetså‡½æ•°â€”å­—ç¬¦ä¸²æ–¹å¼æ–‡ä»¶è¯»å†™"><a href="#fgetså‡½æ•°â€”å­—ç¬¦ä¸²æ–¹å¼æ–‡ä»¶è¯»å†™" class="headerlink" title="fgetså‡½æ•°â€”å­—ç¬¦ä¸²æ–¹å¼æ–‡ä»¶è¯»å†™"></a>fgetså‡½æ•°â€”å­—ç¬¦ä¸²æ–¹å¼æ–‡ä»¶è¯»å†™</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">fgets</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>str<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//*stræ˜¯è¯»å‡ºçš„å­—ç¬¦ä¸²è¦å­˜æ”¾çš„åœ°æ–¹</span><span class="token comment">//n:è¯»å–é•¿åº¦ä¸ºn-1ï¼Œåœ¨æœ«å°¾åŠ ä¸Š'\0'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯»å–æˆåŠŸï¼Œè¿”å›æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆ</p><p>å¤±è´¥æˆ–å‡ºé”™ï¼Œè¿”å›NULL</p><h4 id="fprintfå‡½æ•°å’Œfscanfå‡½æ•°â€”æ ¼å¼åŒ–è¯»å–"><a href="#fprintfå‡½æ•°å’Œfscanfå‡½æ•°â€”æ ¼å¼åŒ–è¯»å–" class="headerlink" title="fprintfå‡½æ•°å’Œfscanfå‡½æ•°â€”æ ¼å¼åŒ–è¯»å–"></a>fprintfå‡½æ•°å’Œfscanfå‡½æ•°â€”æ ¼å¼åŒ–è¯»å–</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">fscanf</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>format<span class="token punctuation">[</span><span class="token punctuation">,</span>adress<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">fprintf</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>filepointer<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>format<span class="token punctuation">[</span><span class="token punctuation">,</span>adress<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>e.g.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> x<span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>str<span class="token punctuation">;</span><span class="token function">fscanf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token string">"%d%s"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä»æ–‡ä»¶ä¸­è¯»å–</span><span class="token keyword">int</span> y<span class="token punctuation">;</span><span class="token keyword">float</span> y <span class="token operator">=</span><span class="token number">5.8</span><span class="token punctuation">;</span><span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token string">"%d,%6.2f"</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å†™å…¥æ–‡ä»¶ä¸­</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤±è´¥è¿”å›EOF</p><h4 id="fwriteå‡½æ•°å’Œfreadå‡½æ•°â€”äºŒè¿›åˆ¶æ–¹å¼æ–‡ä»¶è¯»å†™"><a href="#fwriteå‡½æ•°å’Œfreadå‡½æ•°â€”äºŒè¿›åˆ¶æ–¹å¼æ–‡ä»¶è¯»å†™" class="headerlink" title="fwriteå‡½æ•°å’Œfreadå‡½æ•°â€”äºŒè¿›åˆ¶æ–¹å¼æ–‡ä»¶è¯»å†™"></a>fwriteå‡½æ•°å’Œfreadå‡½æ•°â€”äºŒè¿›åˆ¶æ–¹å¼æ–‡ä»¶è¯»å†™</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">,</span><span class="token keyword">unsigned</span> size<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> n<span class="token punctuation">,</span> FILE <span class="token operator">*</span>filepointer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ptr:æ•°æ®å­˜å‚¨ä½ç½®</span><span class="token comment">//size:æ•°æ®æ‰€å å­—èŠ‚æ•°</span><span class="token comment">//n:å†™å…¥nä¸ªæ•°æ®</span><span class="token comment">//filepointer:å‘è¿™ä¸ªæ–‡ä»¶å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>freadåŒç†</p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”ä¸‡å¹´å†</title>
      <link href="/2023/02/08/xiao-bai-wan-nian-li/"/>
      <url>/2023/02/08/xiao-bai-wan-nian-li/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdbool.h&gt;</span></span><span class="token keyword">void</span> <span class="token function">printMonth</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">printMonthBody</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">getStartDay</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">getTotalNumOfDays</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">getNumOfDaysInMonth</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span>bool <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> month<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è¦æŸ¥è¯¢çš„å¹´ä»½ï¼š\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è¦æŸ¥è¯¢çš„æœˆä»½ï¼š\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printMonth</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">printMonth</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%då¹´%dæœˆä»½çš„æ—¥å†\n"</span><span class="token punctuation">,</span>year<span class="token punctuation">,</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"--------------------------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ—¥\tä¸€\täºŒ\tä¸‰\tå››\täº”\tå…­\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printMonthBody</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">printMonthBody</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> week <span class="token operator">=</span> <span class="token function">getStartDay</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> days <span class="token operator">=</span> <span class="token function">getNumOfDaysInMonth</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> date <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> circulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç¬¬ä¸€è¡Œçš„æ—¥æœŸ</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> week <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  \t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> week<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span> date<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä»ç¬¬äºŒè¡Œå¼€å§‹çš„æ—¥æœŸ</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> date<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> days<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>circulation <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>circulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>circulation<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getStartDay</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> week<span class="token punctuation">;</span>week <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">getTotalNumOfDays</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>week <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> week<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getTotalNumOfDays</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> yearChange <span class="token operator">=</span> year<span class="token punctuation">;</span><span class="token keyword">int</span> sum1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sum2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> daysOfYear<span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> year <span class="token operator">-</span> <span class="token number">1800</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span>yearChange<span class="token punctuation">)</span><span class="token punctuation">)</span>daysOfYear <span class="token operator">=</span> <span class="token number">366</span><span class="token punctuation">;</span><span class="token keyword">else</span>daysOfYear <span class="token operator">=</span> <span class="token number">365</span><span class="token punctuation">;</span>sum1 <span class="token operator">+=</span> daysOfYear<span class="token punctuation">;</span>yearChange<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> month <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>sum2 <span class="token operator">+=</span> <span class="token function">getNumOfDaysInMonth</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>sum <span class="token operator">=</span> sum1 <span class="token operator">+</span> sum2<span class="token punctuation">;</span><span class="token keyword">return</span> sum<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getNumOfDaysInMonth</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">7</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">8</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">10</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">31</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">6</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">9</span> <span class="token operator">||</span> month <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">31</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">29</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> <span class="token number">28</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>bool <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">4</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”æ’åº</title>
      <link href="/2023/02/07/xiao-bai-pai-xu/"/>
      <url>/2023/02/07/xiao-bai-pai-xu/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><h3 id="ä¸€-å†’æ³¡æ’åºbubbleSort"><a href="#ä¸€-å†’æ³¡æ’åºbubbleSort" class="headerlink" title="ä¸€.å†’æ³¡æ’åºbubbleSort"></a>ä¸€.å†’æ³¡æ’åºbubbleSort</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> size <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> a<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> temp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="äºŒ-é€‰æ‹©æ’åº"><a href="#äºŒ-é€‰æ‹©æ’åº" class="headerlink" title="äºŒ.é€‰æ‹©æ’åº"></a>äºŒ.é€‰æ‹©æ’åº</h3><p>æ¯æ¬¡æŠŠæœ€å°çš„æ‰¾å‡ºæ¥è·Ÿç¬¬ä¸€ä¸ªæ•°å€¼æ¢ä½ç½®</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> temp<span class="token punctuation">;</span><span class="token keyword">int</span> min<span class="token punctuation">;</span><span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>min <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">&gt;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>min <span class="token operator">=</span> j<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">!=</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>temp <span class="token operator">=</span> a<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸‰-å¿«é€Ÿæ’åº"><a href="#ä¸‰-å¿«é€Ÿæ’åº" class="headerlink" title="ä¸‰.å¿«é€Ÿæ’åº"></a>ä¸‰.å¿«é€Ÿæ’åº</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">findPos</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">quickSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> pos<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span>pos <span class="token operator">=</span> <span class="token function">findPos</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> low <span class="token punctuation">,</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">quickSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> low<span class="token punctuation">,</span> pos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">quickSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">findPos</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> val <span class="token operator">=</span> a<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> val<span class="token punctuation">)</span><span class="token operator">--</span>high<span class="token punctuation">;</span>a<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>high<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> val<span class="token punctuation">)</span><span class="token operator">++</span>low<span class="token punctuation">;</span>a<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span><span class="token keyword">return</span> low<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å››-æ’å…¥æ’åº-äºŒåˆ†æ³•"><a href="#å››-æ’å…¥æ’åº-äºŒåˆ†æ³•" class="headerlink" title="å››.æ’å…¥æ’åº+äºŒåˆ†æ³•"></a>å››.æ’å…¥æ’åº+äºŒåˆ†æ³•</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> temp<span class="token punctuation">;</span><span class="token keyword">int</span> low<span class="token punctuation">,</span> high<span class="token punctuation">,</span>mid<span class="token punctuation">;</span><span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>temp <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>low <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>high <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>mid <span class="token operator">=</span> <span class="token punctuation">(</span>high <span class="token operator">+</span> low<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">!=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> high <span class="token operator">!=</span> low<span class="token punctuation">)</span><span class="token punctuation">{</span>mid <span class="token operator">=</span> <span class="token punctuation">(</span>high <span class="token operator">+</span> low<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>high <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> mid <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>temp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>high <span class="token operator">==</span> low<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;</span> low<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>temp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span>low <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">&gt;</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> high <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>temp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”FirstGameç¬”è®°</title>
      <link href="/2023/01/21/ru-men-firtgame/"/>
      <url>/2023/01/21/ru-men-firtgame/</url>
      
        <content type="html"><![CDATA[<h4 id="Input-GetAxis"><a href="#Input-GetAxis" class="headerlink" title="Input.GetAxis"></a>Input.GetAxis</h4><p>GetAxis()ä¸¤ç§ï¼š</p><ul><li><p>Vertical:è·å¾—å‚ç›´æ–¹å‘</p></li><li><p>Horizontal:è·å¾—æ°´å¹³æ–¹å‘</p></li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">horizontalmove = Input.GetAxis("Horizontal");//æ£€æµ‹æ°´å¹³æ–¹å‘é”®verticalmove = Input.GetAxis("Vertical"); //æ£€æµ‹å‚ç›´æ–¹å‘é”®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/Unity/1.png"></p><p>ğŸ‘†Edit-&gt;Project Settings-&gt;Input Manager-&gt;Axes-&gt;Horizontal</p><p>ä»ä¸Šå›¾å¯çŸ¥<code>Negative Button</code> <code>-1</code>å¯¹åº”<code>left</code>å’Œ<code>a</code>ï¼›<code>Positive Button</code>å¯¹åº”<code>1</code>å’Œ<code>right</code></p><p>æ‰€ä»¥åœ¨ç¨‹åºä¸­åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªå˜é‡æ¥æ”¶<code>-1</code>æˆ–è€…<code>1</code>æ¥åˆ¤æ–­æ˜¯æŒ‰äº†<code>a</code> <code>left</code>è¿˜æ˜¯<code>d</code> <code>right</code></p><h4 id="Input-GetAxisRaw"><a href="#Input-GetAxisRaw" class="headerlink" title="Input.GetAxisRaw"></a>Input.GetAxisRaw</h4><p><strong>~ vs Input.GetAxis</strong>ğŸ‘‡</p><p>å‰è€…è·å¾—çš„æ•°æ®åªæœ‰<code>-1</code> <code>0</code> <code>1</code></p><p>åè€…è·å¾—çš„æ•°æ®æ˜¯<code>-1~0</code> <code>0~1</code></p><h4 id="Time-deltaTime"><a href="#Time-deltaTime" class="headerlink" title="Time.deltaTime"></a>Time.deltaTime</h4><p><img src="/../../../../medias/blog_picture/Unity/2.png"></p><p><img src="/../../../../medias/blog_picture/Unity/3.png"></p><h4 id="Mathf-Abs"><a href="#Mathf-Abs" class="headerlink" title="Mathf.Abs()"></a>Mathf.Abs()</h4><p>å–ç»å¯¹å€¼</p><h4 id="transform-Transform"><a href="#transform-Transform" class="headerlink" title="transform&amp;Transform"></a>transform&amp;Transform</h4><ul><li>Transformåšå‡½æ•°</li><li>transformæ‰æ˜¯å½“å‰çœŸæ­£éœ€è¦æ“ä½œçš„</li></ul><h4 id="é•œå¤´è®¾ç½®çš„ä¸¤ç§æ–¹æ³•"><a href="#é•œå¤´è®¾ç½®çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="é•œå¤´è®¾ç½®çš„ä¸¤ç§æ–¹æ³•"></a>é•œå¤´è®¾ç½®çš„ä¸¤ç§æ–¹æ³•</h4><h5 id="1-åœ¨Main-Cameraä¸­åŠ new-script"><a href="#1-åœ¨Main-Cameraä¸­åŠ new-script" class="headerlink" title="1.åœ¨Main Cameraä¸­åŠ new script"></a>1.åœ¨Main Cameraä¸­åŠ new script</h5><p>ğŸ‘‡Scriptä»£ç </p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">public class CameraControl : MonoBehaviour{//â‘ è®¾ç½®ä¸€ä¸ªå«"player"çš„Transformç±»å‹çš„å˜é‡    public Transform player;    // Update is called once per frame    void Update()    {    //â‘¡æŠŠMain Cameraä¸­çš„transformæ ç›®ä¸­çš„positionæ”¹ä¸ºä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹æ˜¯3Dçš„ï¼Œxyzå„è‡ªå¯¹åº”        transform.position = new Vector3(player.position.x, 0, -10f);      }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‡æœ€åæŠŠè¦ç»™é•œå¤´çš„å¯¹è±¡ç§»åŠ¨åˆ°Playerå¤„å³å¯</p><p><img src="/../../../../medias/blog_picture/Unity/4.png"></p><h5 id="2-cinimachine"><a href="#2-cinimachine" class="headerlink" title="2.cinimachine"></a>2.cinimachine</h5><p>GameObject-&gt;Cinimachine-&gt;2D Cinima-&gt;å¾—åˆ°ä¸‹å›¾æ‰€ç¤ºçš„é€‰é¡¹</p><p><img src="/../../../../medias/blog_picture/Unity/5.png"></p><p><img src="/../../../../medias/blog_picture/Unity/6.png"></p><ul><li><p>Followå¤„æ‹‰æ‹½ä¸Šéœ€è¦è·Ÿè¸ªé•œå¤´çš„å¯¹è±¡</p></li><li><p>ç„¶ååœ¨Lenså¤„è°ƒæ•´é•œå¤´è·ç¦»ç­‰å‚æ•°</p></li></ul><p><img src="/../../../../medias/blog_picture/Unity/7.png"></p><ul><li><p>Dead Zone</p><ul><li>å¯ä»¥æ‹‰æ‹½èŒƒå›´ï¼Œå¦‚æœè¶…å‡ºèŒƒå›´åˆ™é•œå¤´ç§»åŠ¨ï¼Œæœªè¶…å‡ºåˆ™ä¸ç§»åŠ¨</li></ul></li><li><p>ä¸ç¦»å¼€èƒŒæ™¯å›¾</p><ul><li>CM vcam1-&gt;Body-&gt;Add Extension-&gt;Cinimachine Confiner-&gt;</li><li><img src="/../../../../medias/blog_picture/Unity/8.png"></li></ul></li><li><p>å›åˆ°Backgroundå›¾å±‚æ‹‰æ‹½èŒƒå›´</p></li></ul><h4 id="è™šå‡½æ•°ä¸ç±»çš„ä½¿ç”¨"><a href="#è™šå‡½æ•°ä¸ç±»çš„ä½¿ç”¨" class="headerlink" title="è™šå‡½æ•°ä¸ç±»çš„ä½¿ç”¨"></a>è™šå‡½æ•°ä¸ç±»çš„ä½¿ç”¨</h4><p><strong>çˆ¶çº§</strong></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">public class Enemy : MonoBehaviour{    protected Animator Anim;    //ğŸ‘†æ‰€æœ‰Enemyéƒ½éœ€è¦æœ‰â€œè¢«å‡»æ€â€çš„åŠ¨ç”»ï¼Œå› æ­¤å…ˆåˆ›å»ºä¸€ä¸ªåä¸º"Anim"çš„Animatorå˜é‡    //"protected"â†’1.1    protected virtual void Start()    //"virtual"çˆ¶çº§çš„"Start"æ˜¯å¯ä»¥è¢«å­çº§é‡æ–°ç¼–å†™çš„(å› ä¸ºå­çº§åœ¨"Start"ä¸­æœ‰ä¸€äº›æœ¬ä½“çš„å±æ€§)    {        Anim = GetComponent&lt;Animator&gt;();    }    public void Death()    {        Destroy(gameObject);    }    public void JumpOn()    {        Anim.SetTrigger("death");    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å­çº§</strong></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">public class Enemy_Frog : Enemy//éš¶å±äºEnemyçš„å­çº§ï¼Œç¡®å®šçˆ¶å­å…³ç³»{protected override void Start()//ğŸ‘†override å‘¼åº”virtual{     base.Start();//è°ƒç”¨çˆ¶çº§çš„Start}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Player</strong></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Enemy enemy = collision.gameObject.GetComponent&lt;Enemy&gt;();//å¯ä»¥è°ƒç”¨åä¸º"Enemy"çš„ç±»çš„çˆ¶å­çº§<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="1-1protected"><a href="#1-1protected" class="headerlink" title="1.1protected"></a>1.1protected</h5><ul><li><p>è‡ªèº«ç±»å’Œæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®ç›¸å½“äºè‡ªèº«çš„privateå‹æˆå‘˜ <code>åˆ›å»ºçš„å‡½æ•°æˆ–è€…å˜é‡åœ¨å­çˆ¶çº§ä¸­éƒ½å¯ä»¥ä½¿ç”¨</code></p></li><li><p>å¯ä»¥è¢«<code>1.è¯¥ç±»ä¸­çš„å‡½æ•°</code>ã€<code>2.å­ç±»çš„å‡½æ•°</code>ã€ä»¥åŠ<code>3.å…¶å‹å…ƒå‡½æ•°</code>è®¿é—®ã€‚ä½†ä¸èƒ½è¢«è¯¥ç±»çš„å¯¹è±¡è®¿é—®</p></li><li><p>ä½¿ç”¨protectedç»§æ‰¿ï¼Œçˆ¶ç±»çš„protectedå’Œpublicå±æ€§åœ¨å­ç±»ä¸­å˜ä¸ºprotected</p></li></ul><h4 id="åœºæ™¯è½¬æ¢"><a href="#åœºæ™¯è½¬æ¢" class="headerlink" title="åœºæ™¯è½¬æ¢"></a>åœºæ™¯è½¬æ¢</h4><p>ä»ç¬¬ä¸€å…³è¿›å…¥ç¬¬äºŒå…³</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">using UnityEngine.SceneManagement;//.//.if(Input.GetKeyDown(KeyCode.E)){    SceneManager.LoadScene(SceneManager.GetActiveScene().bulidIndex + 1);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”æ“ä½œç¬¦</title>
      <link href="/2023/01/13/xiao-bai-cao-zuo-fu/"/>
      <url>/2023/01/13/xiao-bai-cao-zuo-fu/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-æ“ä½œç¬¦"><a href="#ä¸€-æ“ä½œç¬¦" class="headerlink" title="ä¸€.æ“ä½œç¬¦"></a>ä¸€.æ“ä½œç¬¦</h2><p><strong>æ“ä½œç¬¦å‡½æ•°æ˜¯æ–¹æ³•å‡½æ•°çš„ç®€è®°æ³•</strong></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace CreatOperator{    class Program    {        static void Main(string[] args)        {            Person person1 = new Person();            Person person2 = new Person();            person1.Name = "Deer";            person2.Name = "Deer's wife";            List&lt;Person&gt; nation = Person.GetMarry(person1,person2);            //ä¸Šé¢è¿™è¡Œæ”¹æˆ            //List&lt;Person&gt; nation = person1 + person2;            foreach (var p in nation)            {                Console.WriteLine(p.Name);            }        }    }        class Person    {        public string Name;        public static List&lt;Person&gt;GetMarry(Person p1,Person p2)        //ä¸Šé¢è¿™è¡Œæ”¹æˆ public static List&lt;Person&gt; operator+(Person p1,Person p2)        {            List&lt;Person&gt; people = new List&lt;Person&gt;();            people.Add(p1);            people.Add(p2);            for (int i = 0; i &lt; 11; i++)            {                Person child = new Person();                child.Name = p1.Name + "&amp;" + p2.Name + "s child";                people.Add(child);            }            return people;        }    }}//ä¸¤ç§æ–¹æ³•çš„ç»“æœä¸€æ ·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åªæœ‰åœ†æ‹¬å·æ¥æé«˜ä¼˜å…ˆçº§</p><h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int[] myIntArray = new int[]{};//[]å¡«æ•°ç»„å¤§å°ï¼Œ{}(åˆå§‹åŒ–å™¨)å¡«å…·ä½“æ•°å€¼<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Type t = typeof(int);Console.WriteLine(t.Namespace);Console.WriteLine(t.FullName);Console.WriteLine(t.Name);/**SystemSystem.Int32Int32*/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><p>è·å–ä¸€ä¸ªç±»å‹çš„é»˜è®¤å€¼</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x = default(int);Console.WriteLine(x);//0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Form myForm = default(Form);Console.WriteLine(myForm==null);//true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">class Program{static void Main(string[] args)    {        Level level = default(Level);        Console.WriteLine(level);    }}//â‘ enum Level{Low,Mid,High}//Low//â‘¡enum Level{Mid,Low,High}//Mid//â‘¢enum Level{Mid = 1,Low = 0,High = 2}//Low//â‘£enum Level{Low = 1,Mid = 2,High = 3}//0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><p>å£°æ˜éšå¼ç±»å‹å˜é‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x = 100;//æ˜¾å¼var y = 100;//éšå¼æ ¹æ®èµ‹çš„å€¼â€œ100â€æ¥ç»™yåˆ¤æ–­ç±»å‹Console.WriteLine(y.GetType().Name);//Int32<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><ul><li>è°ƒç”¨å®ä¾‹æ„é€ å™¨</li></ul><p>å¸®åŠ©æˆ‘ä»¬åœ¨å†…å­˜å½“ä¸­<code>åˆ›å»ºç±»å‹çš„å®ä¾‹</code></p><p>æœ‰<code>()</code>æ—¶è¡¨ç¤º<code>è°ƒç”¨å®ƒçš„å®ä¾‹æ„é€ å™¨</code></p><p>å¦‚æœåœ¨newæ“ä½œç¬¦<code>å·¦è¾¹æœ‰èµ‹å€¼ç¬¦å·</code>çš„è¯ï¼Œé‚£ä¹ˆnewæ“ä½œç¬¦ä¼šæŠŠè‡ªå·±æ‹¿åˆ°çš„è¿™ä¸ª<code>å®ä¾‹çš„å†…å­˜åœ°å€</code>é€šè¿‡<code>èµ‹å€¼æ“ä½œç¬¦</code>äº¤ç»™è´Ÿè´£è®¿é—®è¿™ä¸ªå®ä¾‹çš„<code>å˜é‡</code></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Form myForm = new Form();//myFormä¸ºè¯¥å®ä¾‹çš„å˜é‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>è°ƒç”¨å®ä¾‹çš„åˆå§‹åŒ–å™¨</li></ul><p>èŠ±æ‹¬å·<code>{}</code>å†…å¯ä»¥ä¸ºè¿™ä¸ªå®ä¾‹çš„å±æ€§è®¾ç½®å®ƒçš„å€¼ï¼Œå¯ä»¥é€šè¿‡<code>,</code>æ¥åŒæ—¶è®¾ç½®å¤šä¸ªå±</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Form myForm = new Form(){Text."Hello"};<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ğŸ‘†ğŸ‘‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Form myForm = new Form();myForm.Text = "Hello"; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>ä¸€æ¬¡æ€§è®¿é—®ï¼Œæ²¡å¿…è¦åˆ›å»ºå˜é‡è®¿é—®å®ä¾‹</li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">new Form(){Text = "Hello"}.ShowDialog();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ğŸ‘†ğŸ‘‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Form myForm = new Form();myForm.Text = "Hello";myForm.ShowDialog();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>åŒ¿åç±»å‹åˆ›å»ºå¯¹è±¡</li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">var person = new{Name = "Mr.Okay", Age = 18};//è‡ªåŠ¨åˆ¤æ–­ç±»å‹Console.WriteLine(person.Age);Console.WriteLine(person.Name);Console.WriteLine(person.GetType().Name);//Mr.Okay//18//&lt;&gt;f__AnonymousType0`2//ç±»å‹çš„è§£é‡Šï¼š//&lt;&gt;f__AnonymousTypeæ˜¯çº¦å®šçš„ä¸€ä¸ªå‰ç¼€//0æŒ‡çš„æ˜¯åœ¨ç¨‹åºä¸­åˆ›å»ºçš„ç¬¬ä¸€ä¸ª//`2æŒ‡çš„æ˜¯è¿™ä¸ªç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œæ„æˆè¿™ä¸ªç±»å‹æ—¶éœ€è¦ä¸¤ä¸ªç±»å‹æ¥æ„æˆå®ƒï¼Œä¸€ä¸ªæ˜¯stringï¼Œä¸€ä¸ªæ˜¯int<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å­ç±»éšè—çˆ¶ç±»(å…³é”®å­—)(äº†è§£å³å¯)</li></ul><h4 id="checked-unchecked"><a href="#checked-unchecked" class="headerlink" title="checked&amp;unchecked"></a>checked&amp;unchecked</h4><p>æ£€æŸ¥æ˜¯å¦å¼‚å¸¸</p><h4 id="å–éæ“ä½œç¬¦"><a href="#å–éæ“ä½œç¬¦" class="headerlink" title="!å–éæ“ä½œç¬¦"></a>!å–éæ“ä½œç¬¦</h4><p>å®é™…åº”ç”¨ï¼Œæ£€æŸ¥</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace CreatOperator{    class Program    {        static void Main(string[] args)        {            Student stu = new Student(null);            Console.WriteLine(stu.Name);        }    }    class Student    {        public string Name;        public Student(string initName)        {            if(!string.IsNullOrEmpty(initName))            {                this.Name = initName;            }            else             {                throw new ArgumentException("initName cannot be null or empty");            }        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="T-xå¼ºåˆ¶è½¬æ¢ç±»å‹æ“ä½œç¬¦"><a href="#T-xå¼ºåˆ¶è½¬æ¢ç±»å‹æ“ä½œç¬¦" class="headerlink" title="(T)xå¼ºåˆ¶è½¬æ¢ç±»å‹æ“ä½œç¬¦"></a>(T)xå¼ºåˆ¶è½¬æ¢ç±»å‹æ“ä½œç¬¦</h4><h2 id="äºŒ-æ•°æ®ç±»å‹è½¬æ¢"><a href="#äºŒ-æ•°æ®ç±»å‹è½¬æ¢" class="headerlink" title="äºŒ.æ•°æ®ç±»å‹è½¬æ¢"></a>äºŒ.æ•°æ®ç±»å‹è½¬æ¢</h2><h4 id="convert"><a href="#convert" class="headerlink" title="convert"></a>convert</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">string str1 = Console.ReadLine();string str2 = Console.ReadLine();int x = Convert.ToInt32(str1);int y = Convert.ToInt32(str2);Console.WriteLine(str1 + str2);Console.WriteLine(x + y);//12//34//1234//46s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="éšå¼ç±»å‹è½¬æ¢"><a href="#éšå¼ç±»å‹è½¬æ¢" class="headerlink" title="éšå¼ç±»å‹è½¬æ¢"></a>éšå¼ç±»å‹è½¬æ¢</h4><ul><li>ä¸ä¸¢å¤±ç²¾åº¦çš„è½¬æ¢</li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x = int.MaxValue;long y = x;Console.WriteLine(y);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>C#è¯­è¨€æ•°æ®æ–‡æ¡£6.1.2æœ‰éšå¼æ•°å€¼è½¬æ¢</p><p><img src="/../../../../medias/blog_picture/C#/5.png"></p><ul><li>å­ç±»å‘çˆ¶ç±»çš„è½¬æ¢</li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace CreatOperator{    class Program    {        static void Main(string[] args)        {            Teacher t = new Teacher();            Human h = t;//hä»åªæœ‰Eatå’ŒAnimal            Animal a = h;//è®¿é—®çš„æ˜¯Animalï¼Œå¼•ç”¨ä¸äº†å®ä¾‹hï¼Œåªæœ‰Eat            a.Eat();        }    }//çˆ¶ç±»    class Animal    {        public void Eat()        {            Console.WriteLine("Eating");        }    }//å­ç±»    class Human:Animal    {        public void Think()        {            Console.WriteLine("Who am I?");        }    }//å­ç±»çš„å­ç±»    class Teacher : Human    {        public void Teach()        {            Console.WriteLine("I teach programming.");        }    }}//Eating<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è£…ç®±</li></ul><h4 id="æ˜¾å¼ç±»å‹è½¬æ¢"><a href="#æ˜¾å¼ç±»å‹è½¬æ¢" class="headerlink" title="æ˜¾å¼ç±»å‹è½¬æ¢"></a>æ˜¾å¼ç±»å‹è½¬æ¢</h4><ul><li>æœ‰å¯èƒ½ä¸¢å¤±ç²¾åº¦çš„è½¬æ¢<strong>cast</strong>(é“¸é€ )</li></ul><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Console.WriteLine(ushort.MaxValue);uint x = 65536;ushort y = (ushort)x;//å¼ºåˆ¶æŠŠè¾ƒå¤§çš„å€¼è£…åˆ°å°çš„ç©ºé—´é‡ŒConsole.WriteLine(y);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‹†ç®±</li><li>convert<ul><li>æ•°å€¼ç±»å‹å¾€å­—ç¬¦ä¸²ç±»å‹è½¬æ¢</li></ul></li></ul><h4 id="ç±»å‹è½¬æ¢æ“ä½œç¬¦"><a href="#ç±»å‹è½¬æ¢æ“ä½œç¬¦" class="headerlink" title="ç±»å‹è½¬æ¢æ“ä½œç¬¦"></a>ç±»å‹è½¬æ¢æ“ä½œç¬¦</h4><p>æ˜¾å¼ç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªç›®æ ‡ç±»å‹çš„å®ä¾‹çš„æ„é€ å™¨ï¼Œå†™åœ¨è¢«è½¬æ¢çš„è¿™ä¸ªæ•°æ®ç±»å‹é‡Œ</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace CreatOperator{    class Program    {        static void Main(string[] args)        {            Stone stone = new Stone();            stone.Age = 5000;            Monkey wukongSun = (Monkey)stone;            //ç›®æ ‡æ˜¯æŠŠä¸€ä¸ªStoneç±»å‹çš„è½¬å˜ä¸ºMonkeyç±»å‹çš„            Console.WriteLine(wukongSun.Age);        }    }    class Stone    {        public int Age;        //æ˜¾å¼ç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªç›®æ ‡ç±»å‹çš„å®ä¾‹çš„æ„é€ å™¨ï¼Œå†™åœ¨è¢«è½¬æ¢çš„è¿™ä¸ªæ•°æ®ç±»å‹é‡Œ        //Monkey(Stone stone)å°±æ˜¯ä¸€ä¸ªæ„é€ å™¨        public static explicit operator Monkey(Stone stone)        {            Monkey m = new Monkey();            m.Age = stone.Age / 500;//æ„å»ºMonkeyå’ŒStoneçš„å…³ç³»            return m;        }    }    class Monkey    {        public int Age;    }}//10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ¯”éšå¼ç±»å‹è½¬æ¢</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace CreatOperator{    class Program    {        static void Main(string[] args)        {            Stone stone = new Stone();            stone.Age = 5000;            Monkey wukongSun = stone;//æ­¤å¤„å»æ‰äº†(Monkey)stoneçš„(Monkey)            Console.WriteLine(wukongSun.Age);        }    }    class Stone    {        public int Age;        public static implicit operator Monkey(Stone stone)//æ­¤å¤„å°†"explicit"æ”¹ä¸º"implicit"        {            Monkey m = new Monkey();            m.Age = stone.Age / 500;            return m;        }    }    class Monkey    {        public int Age;    }}//10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="is"><a href="#is" class="headerlink" title="is"></a>is</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Stone stone = new Stone();var result = stone is Stone;//æ£€éªŒçš„æ˜¯å˜é‡æ‰€å¼•ç”¨çš„å®ä¾‹Console.WriteLine(result.GetType().FullName);Console.WriteLine(result);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Nullableå¯ç©ºç±»å‹"><a href="#Nullableå¯ç©ºç±»å‹" class="headerlink" title="Nullable<>å¯ç©ºç±»å‹"></a>Nullable&lt;&gt;å¯ç©ºç±»å‹</h4><p>ä¾‹å­ï¼šä¸€ä¸ªåŒå­¦æ²¡äº¤ä½œä¸šï¼Œä½†æ˜¯ä¸æ˜¯é‚£ç§åšçš„æå·®çš„0åˆ†ï¼Œæƒ³ç»™ä»–ç©ºç€</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Nullable&lt;int&gt; x = null;//æ²¡äº¤ä½œä¸šx = 100;//äº¤äº†ä½œä¸š<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ğŸ‘†ğŸ‘‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int?x = null;x = 100;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½†æ˜¯å¦‚æœè¿™ä¸ªåŒå­¦ä¸€ç›´æ²¡äº¤ä½œä¸šï¼ŒæœŸæœ«éœ€è¦å½•å…¥æˆç»©æ—¶ç»™0åˆ†</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int?x = null;int y = x??0;//èµ‹0åˆ†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="ifelseçš„ç®€å†™"><a href="#ifelseçš„ç®€å†™" class="headerlink" title="?:(ifelseçš„ç®€å†™)"></a>?:(ifelseçš„ç®€å†™)</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x = 80;string str = string.Empty;str = (x &gt;= 60)?"Pass":"Failed";<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ğŸ‘†ğŸ‘‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x = 80;string str;if(x&gt;60){    str = "Pass";}else{    str = "Failed";}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”åŸºæœ¬å…ƒç´ å’Œç±»å‹</title>
      <link href="/2023/01/11/xiao-bai-ji-ben-yuan-su-he-shu-ju-lei-xing/"/>
      <url>/2023/01/11/xiao-bai-ji-ben-yuan-su-he-shu-ju-lei-xing/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-åŸºæœ¬å…ƒç´ "><a href="#ä¸€-åŸºæœ¬å…ƒç´ " class="headerlink" title="ä¸€.åŸºæœ¬å…ƒç´ "></a>ä¸€.åŸºæœ¬å…ƒç´ </h2><ul><li>æ ‡è®°Tokenï¼šå¯¹ç¼–è¯‘å™¨æœ‰æ„ä¹‰çš„ç¬¦å·<ul><li>å…³é”®å­—Keyword</li><li>æ“ä½œç¬¦Operator</li><li>æ ‡è¯†ç¬¦Identifier<ul><li>å…è®¸â€œ@â€å­—ç¬¦ä½œä¸ºå‰ç¼€ä»¥ä½¿å…³é”®å­—èƒ½å¤Ÿç”¨ä½œæ ‡è¯†ç¬¦</li></ul></li><li>æ ‡ç‚¹ç¬¦å·</li><li>æ–‡æœ¬(å­—é¢å€¼)</li></ul></li><li>æ³¨é‡Šä¸ç©ºç™½<ul><li>CTRL+K CTRL+CğŸ‘‰æ³¨é‡Š</li><li>CTRL+K CTRL+UğŸ‘‰å–æ¶ˆæ³¨é‡Š</li><li>CTRL+K CTRL+DğŸ‘‰è®¾ç½®æ–‡æ¡£æ ¼å¼(è‡ªåŠ¨å¯¹é½)</li></ul></li></ul><h2 id="äºŒ-æ•°æ®ç±»å‹"><a href="#äºŒ-æ•°æ®ç±»å‹" class="headerlink" title="äºŒ.æ•°æ®ç±»å‹"></a>äºŒ.æ•°æ®ç±»å‹</h2><ul><li><p>å€¼ç±»å‹</p><ul><li>ç»“æ„ä½“Structures</li><li>æšä¸¾Enumerations<ul><li>åªèƒ½ä»ä¸€ä¸ªé›†åˆä¸­é€‰å–æœ‰æ•ˆå€¼</li></ul></li></ul></li><li><p>å¼•ç”¨ç±»å‹</p><ul><li><p>ç±»Classes</p></li><li><p>æ¥å£Interfaces</p></li><li><p>å§”æ‰˜Delegates</p></li></ul></li></ul><h2 id="ä¸‰-å˜é‡"><a href="#ä¸‰-å˜é‡" class="headerlink" title="ä¸‰.å˜é‡"></a>ä¸‰.å˜é‡</h2><p>ğŸ‘‡ä»è¡¨é¢çœ‹ï¼Œå˜é‡æ˜¯ç”¨æ¥<strong>å­˜å‚¨æ•°æ®</strong>çš„</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">int x;x = 100;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®é™…ä¸Šï¼Œ<strong>å˜é‡è¡¨ç¤ºäº†å­˜å‚¨ä½ç½®ï¼Œå¹¶ä¸”æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œä»¥å†³å®šä»€ä¹ˆæ ·çš„å€¼èƒ½å¤Ÿå­˜å…¥å˜é‡</strong></p><p>ğŸ‘†äº†è§£ä¸ºï¼Œxæ˜¯ä¸€ä¸ª<code>æ ‡ç­¾</code>ï¼Œå¯¹åº”ç€å†…å­˜ä¸­çš„ä¸€ä¸ªåœ°å€ï¼Œ100è¿™ä¸ªå€¼å°±å­˜åœ¨è¯¥åœ°å€</p><p><strong>å˜é‡ = <code>ä»¥å˜é‡åæ‰€å¯¹åº”çš„å†…å­˜åœ°å€ä¸ºèµ·ç‚¹</code>ã€<code>ä»¥å…¶æ•°æ®ç±»å‹æ‰€è¦æ±‚çš„å­˜å‚¨ç©ºé—´ä¸ºé•¿åº¦</code>çš„ä¸€å—å†…å­˜åŒºåŸŸ</strong></p><p><img src="/../../../../medias/blog_picture/C#/2.png" alt="å †ï¼Œæ ˆï¼Œåœ°å€çš„ç†è§£"></p><p>å¼•ç”¨å˜é‡å­˜çš„æ˜¯å®ä¾‹çš„åœ°å€</p><h4 id="è£…ç®±å’Œæ‹†ç®±"><a href="#è£…ç®±å’Œæ‹†ç®±" class="headerlink" title="è£…ç®±å’Œæ‹†ç®±"></a>è£…ç®±å’Œæ‹†ç®±</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">//è£…ç®±int x = 100;object obj;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“å‘ç°objå¼•ç”¨çš„å®ä¾‹åœ¨å †ä¸Šè€Œä¸åœ¨æ ˆä¸Šæ—¶ï¼ŒæŠŠè¯¥å®ä¾‹å¯¹åº”çš„å€¼çš„å†…å­˜å¤§å°åœ¨æ ˆä¸Šæ‰¾ä¸€å—ç©ºé—´ï¼Œå†æŠŠè¿™ä¸ªåœ°å€å­˜å‚¨å›objçš„å†…å­˜ç©ºé—´</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">//æ‹†ç®±int y = (int)obj;Console.WriteLine(y);//100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/C#/3.png" alt="è£…ç®±å’Œæ‹†ç®±"></p><h2 id="å››-æ–¹æ³•"><a href="#å››-æ–¹æ³•" class="headerlink" title="å››.æ–¹æ³•"></a>å››.æ–¹æ³•</h2><p>æ–¹æ³•æ˜¯ç±»æˆ–ç»“æ„ä½“çš„æˆå‘˜</p><p>æ–¹æ³•ç›¸å½“äºè‡ªå®šä¹‰å‡½æ•°</p><p><img src="/../../../../medias/blog_picture/C#/4.png"></p><p>ğŸ‘†å¤ç”¨ï¼Œå¦‚æœè¦æ›´æ”¹3.14159ä¸º3.14æˆ–è€…Math.PIå¯ä»¥ç›´æ¥åœ¨GetCircleAreaå¤„æ”¹</p><p>å®ä¾‹æ–¹æ³•ğŸ‘‡</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Calculator c = new Calculator();c.Add(2.0,3.0);class Calculator{    public double Add(double a,double b);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™æ€æ–¹æ³•</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">Calculator c = new Calculator();//c.Add(2.0,3.0);æ­¤æ—¶è¿™å¥è¯æ— ç”¨class Calculator{    public static double Add(double a,double b);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”-æ„é€ å™¨"><a href="#äº”-æ„é€ å™¨" class="headerlink" title="äº”.æ„é€ å™¨"></a>äº”.æ„é€ å™¨</h2><p><strong>ä¸å¸¦ä»¥0ä¸ºé»˜è®¤å‚æ•°çš„æ„é€ å™¨</strong></p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace ConstructExample{    class Program    {        static void Main(string[]args)        {            Student stu = new Student;            Console.WriteLine(stu.ID);            Console.WriteLine(stu.Name);        }    }    class Student    {        //ä¸å¸¦å‚æ•°çš„æ„é€ ä½“    public Student()        {            this.ID = 1;            this.Name = "No name";        }        //        public int ID;        public string Name;    }}//1//No Name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¼ºåˆ¶ç¨‹åºå‘˜ç»™æ„é€ å™¨è®¾ç½®å‚æ•°</strong>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¦‚æœä¸æƒ³è®¾ç½®å‚æ•°ä½†æ˜¯è¦è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå°±éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªé»˜è®¤å‚æ•°ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">namespace ConstructExample{    class Program    {        static void Main(string[]args)        {            Student stu = new Student(1,"No name");//ä¸èƒ½å†å†™æˆnew Student();            Console.WriteLine(stu.ID);            Console.WriteLine(stu.Name);        }    }    class Student    {        //ä¸å¸¦å‚æ•°çš„æ„é€ ä½“    public Student(int initId,string initName)        {            this.ID = initId;            this.Name = initName;        }        //        public int ID;        public string Name;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ„é€ å™¨å¿«æ·é”®ï¼šctor+tab*2</strong>ctor=Code snippet(å°ç‰‡æ®µ)</p><h4 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h4><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">class Calculator{    //â‘     public double Add(int a, int b)    {        return a + b;    }    //â‘¡    public int Add(int a, int b)    {        return a + b;    }    â‘¢    public double Add(int a, int b, int c)    {        return a + b + c;    } }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘†â‘ ä¸â‘¡ä¸èƒ½å…±å­˜ï¼Œé‡è½½ä¸æ–¹æ³•çš„ç±»å‹æ— å…³</p><p>â‘ å’Œâ‘¢ã€â‘¡å’Œâ‘¢å¯å…±å­˜</p><h2 id="è°ƒç”¨æ–¹æ³•å®é™…ä¸Šæ˜¯å‹æ ˆçš„è¿‡ç¨‹"><a href="#è°ƒç”¨æ–¹æ³•å®é™…ä¸Šæ˜¯å‹æ ˆçš„è¿‡ç¨‹" class="headerlink" title="è°ƒç”¨æ–¹æ³•å®é™…ä¸Šæ˜¯å‹æ ˆçš„è¿‡ç¨‹"></a>è°ƒç”¨æ–¹æ³•å®é™…ä¸Šæ˜¯å‹æ ˆçš„è¿‡ç¨‹</h2>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”ç±»å’Œå‘½åç©ºé—´</title>
      <link href="/2023/01/10/xiao-bai-lei-he-ming-ming-kong-jian/"/>
      <url>/2023/01/10/xiao-bai-lei-he-ming-ming-kong-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-ç±»"><a href="#ä¸€-ç±»" class="headerlink" title="ä¸€.ç±»"></a>ä¸€.ç±»</h2><p>æ˜¯å¯¹<code>ç°å®ä¸–ç•Œäº‹ç‰©</code>è¿›è¡Œ<strong>æŠ½è±¡</strong>æ‰€å¾—åˆ°çš„ç»“æœ</p><h4 id="1-ç±»å’Œå¯¹è±¡çš„å…³ç³»ğŸ‘‡"><a href="#1-ç±»å’Œå¯¹è±¡çš„å…³ç³»ğŸ‘‡" class="headerlink" title="1.ç±»å’Œå¯¹è±¡çš„å…³ç³»ğŸ‘‡"></a>1.ç±»å’Œå¯¹è±¡çš„å…³ç³»ğŸ‘‡</h4><ul><li><p><code>å¯¹è±¡</code>ä¹Ÿå«<code>å®ä¾‹</code>ï¼Œæ˜¯<code>ç±»</code>ç»è¿‡â€œå®ä¾‹åŒ–â€åå¾—åˆ°çš„å†…å­˜ä¸­æ˜¯å®ä½“</p><ul><li>e.g. â€œé£æœºâ€å’Œâ€œä¸€æ¶é£æœºâ€ï¼Œå‰è€…æ˜¯æ¦‚å¿µï¼Œåè€…æ˜¯å®ä½“</li><li>e.g. è“å›¾å’Œå»ºç­‘</li></ul></li><li><p><code>å®ä¾‹åŒ–</code>ï¼Œä½¿ç”¨<code>new</code>æ“ä½œç¬¦åˆ›å»ºç±»çš„å®ä¾‹</p><ul><li><pre><code class="c#">new + ç±»å();//å®ä¾‹åŒ–æ ¼å¼<pre class="line-numbers language-none"><code class="language-none">* ```c#  (new Form()).ShowDialog();//å®ä¾‹åŒ–ä¾‹å­<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li><li><p>å¼•ç”¨å˜é‡ä¸å®ä¾‹çš„å…³ç³»</p><ul><li><pre><code class="c#"></code></pre></li></ul><p>  Form myForm;//å¼•ç”¨å˜é‡å°æœ‹å‹<br>  myForm = new Form();//å®ä¾‹åŒ– =å°æœ‹å‹ç‰µç€æ°”çƒ<br>  myForm.Text = â€œMy Form!â€;//æ ‡é¢˜æ–‡æœ¬<br>  myForm.ShowDialog();//æ˜¾ç¤ºè¡¨å•</p><pre><code>* å¼•ç”¨å˜é‡ä¸å®ä¾‹çš„å…³ç³»å¯ä»¥è§†ä½œå°æœ‹å‹å’Œæ°”çƒçš„å…³ç³»</code></pre></li></ul><h4 id="2-ç±»çš„ä¸‰å¤§æˆå‘˜"><a href="#2-ç±»çš„ä¸‰å¤§æˆå‘˜" class="headerlink" title="2.ç±»çš„ä¸‰å¤§æˆå‘˜"></a>2.ç±»çš„ä¸‰å¤§æˆå‘˜</h4><ul><li><strong>å±æ€§Property</strong><ul><li>å­˜å‚¨æ•°æ®ï¼Œç»„åˆèµ·æ¥è¡¨ç¤ºç±»æˆ–å¯¹è±¡å½“å‰çš„çŠ¶æ€</li><li>e.g. èº«é«˜å¾ˆé«˜ï¼Œè´¢å¯Œå……è£•ï¼Œé•¿ç›¸ä¸é”™ï¼Œç»„åˆä¸ºé«˜å¯Œå¸…</li></ul></li><li><strong>æ–¹æ³•Method</strong><ul><li>è¡¨ç¤ºç±»æˆ–å¯¹è±¡â€œèƒ½åšä»€ä¹ˆâ€</li></ul></li><li><strong>äº‹ä»¶Event</strong></li></ul><h3 id="3-é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜"><a href="#3-é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜" class="headerlink" title="3.é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜"></a>3.é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜</h3><ul><li><strong>é™æ€Static</strong>æˆå‘˜è¡¨ç¤ºå®ƒæ˜¯<code>ç±»çš„æˆå‘˜</code></li><li><strong>å®ä¾‹</strong>æˆå‘˜è¡¨ç¤ºå®ƒæ˜¯<code>å¯¹è±¡çš„æˆå‘˜</code></li><li><strong>ç»‘å®šBing</strong>æŒ‡çš„æ˜¯ç¼–è¯‘å™¨å¦‚ä½•æŠŠä¸€ä¸ªæˆå‘˜ä¸ç±»æˆ–å¯¹è±¡å…³è”èµ·æ¥<ul><li>**.**æˆå‘˜è®¿é—®æ“ä½œç¬¦</li></ul></li></ul><h2 id="äºŒ-åç§°ç©ºé—´"><a href="#äºŒ-åç§°ç©ºé—´" class="headerlink" title="äºŒ.åç§°ç©ºé—´"></a>äºŒ.åç§°ç©ºé—´</h2><p>æŠŠç±»ç”¨è‰¯å¥½çš„ç»“æ„ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æ ‘å½¢ç»“æ„ç»„ç»‡ç±»</p><p><strong>åŒ…ï¼šæŸå¸‚â†’ç±»åº“ï¼šå›¾ä¹¦é¦†â†’åç§°ç©ºé—´ï¼šä¹¦æ¶â†’ç±»ï¼šä¹¦â†’æ–¹æ³•ï¼šç›®å½•</strong></p><h2 id="ä¸‰-ç±»åº“"><a href="#ä¸‰-ç±»åº“" class="headerlink" title="ä¸‰.ç±»åº“"></a>ä¸‰.ç±»åº“</h2><p>ç±»åº“çš„å¼•ç”¨</p><ul><li><p>DLLå¼•ç”¨(æ— æºä»£ç ï¼Œé»‘ç›’ç±»åº“)</p><ul><li><p>åœ¨<strong>è§£å†³æ–¹æ¡ˆ</strong>ä¸­çš„<strong>ä¾èµ–é¡¹</strong>å³é”®<strong>æ·»åŠ é¡¹ç›®å¼•ç”¨</strong>ä¸­å¯ä»¥æ·»åŠ ä»¥<code>dll</code>ä¸ºåç¼€çš„æ–‡ä»¶ä½œä¸ºç±»åº“å¼•ç”¨</p></li><li><p>NuGet</p><ul><li>åªæœ‰DLLæ²¡æœ‰æºä»£ç å¾ˆå±é™©ï¼Œæ¯”å¦‚å¼•ç”¨äº†ä¸€ä¸ª<code>ç±»åº“</code>ï¼Œä½†æ˜¯è¿™ä¸ª<code>ç±»åº“</code>ä¸­ä¸€äº›ä»£ç è¿˜æœ‰ä¸€äº›<code>åº•å±‚çš„ä¸œè¥¿</code>æ²¡æœ‰å¼•ç”¨è¿›æ¥å¯¼è‡´æŠ¥é”™</li></ul></li></ul></li><li><p>é¡¹ç›®å¼•ç”¨(æœ‰æºä»£ç ï¼Œç™½ç›’ç±»åº“)</p><ul><li>åŒä¸Šï¼Œä½†æ˜¯æ˜¯åœ¨<code>ç¨‹åºé›†ä¸­</code></li></ul></li></ul><p><img src="/../../../../medias/blog_picture/C#/1.png"></p>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²ç€æ²¡äº‹å¹² </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åœŸâ€”â€”â€”â€”AT24C02</title>
      <link href="/2022/11/27/ru-tu-at24c02/"/>
      <url>/2022/11/27/ru-tu-at24c02/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-å­˜å‚¨å™¨ä»‹ç»"><a href="#ä¸€-å­˜å‚¨å™¨ä»‹ç»" class="headerlink" title="ä¸€.å­˜å‚¨å™¨ä»‹ç»"></a>ä¸€.å­˜å‚¨å™¨ä»‹ç»</h1><h2 id="1-æ˜“å¤±æ€§å­˜å‚¨å™¨-RAM"><a href="#1-æ˜“å¤±æ€§å­˜å‚¨å™¨-RAM" class="headerlink" title="1.æ˜“å¤±æ€§å­˜å‚¨å™¨/RAM"></a>1.æ˜“å¤±æ€§å­˜å‚¨å™¨/RAM</h2><p>å…¨ç§°ï¼šRamdomAccessMemory</p><p>ç™¾åº¦ç™¾ç§‘ï¼š<strong>å®ƒåœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥è¯»å†™</strong>ï¼ŒRAMé€šå¸¸æ˜¯ä½œä¸ºæ“ä½œç³»ç»Ÿæˆ–å…¶ä»–æ­£åœ¨è¿è¡Œç¨‹åºçš„ä¸´æ—¶å­˜å‚¨ä»‹è´¨(å¯ç§°ä½œç³»ç»Ÿå†…å­˜)ã€‚ä¸è¿‡ï¼Œ<strong>å½“ç”µæºå…³é—­æ—¶RAMä¸èƒ½ä¿ç•™æ•°æ®</strong>ï¼Œå¦‚æœéœ€è¦ä¿å­˜æ•°æ®ï¼Œå°±å¿…é¡»æŠŠå®ƒä»¬å†™å…¥åˆ°ä¸€ä¸ª<strong>é•¿æœŸçš„å­˜å‚¨å™¨</strong>(å¦‚ç¡¬ç›˜)ä¸­ã€‚</p><p>â‘ SRAM(é™æ€RAM) steady</p><ul><li>ç”¨ç”µè·¯å‚¨å­˜ï¼ŒCPUç”¨åˆ°ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œå®¹é‡å°</li></ul><p>â‘¡DRAM(åŠ¨æ€RAM)</p><ul><li>ç”¨ç”µå®¹å……æ”¾ç”µçš„é«˜ä½ç”µå¹³æ¥å­˜å‚¨ï¼Œé€šå¸¸é…ä¸€ä¸ªæ‰«æç”µè·¯ï¼Œç»™å®ƒè¡¥ç”µ</li></ul><h2 id="2-éæ˜“å¤±æ€§å­˜å‚¨å™¨-ROM"><a href="#2-éæ˜“å¤±æ€§å­˜å‚¨å™¨-ROM" class="headerlink" title="2.éæ˜“å¤±æ€§å­˜å‚¨å™¨/ROM"></a>2.éæ˜“å¤±æ€§å­˜å‚¨å™¨/ROM</h2><p>å…¨ç§°ï¼šnon-volatile memory</p><p>ç™¾åº¦ç™¾ç§‘ï¼šæ˜¯æŒ‡å½“<strong>ç”µæµå…³æ‰å</strong>ï¼Œ<strong>æ‰€å­˜å‚¨çš„æ•°æ®ä¸ä¼šæ¶ˆå¤±</strong>çš„ç”µè„‘å­˜å‚¨å™¨ï¼Œç¼ºç‚¹æ˜¯å­˜å‚¨æ¯”è¾ƒæ…¢</p><p>â‘ Mask ROMï¼ˆæ©è†œROMï¼‰ï¼šåªè¯»ä¸å†™</p><p><img src="/../../../../medias/blog_picture/51/67.png"></p><p>â‘¡PROM(å¯ç¼–ç¨‹ROM)ï¼šåªèƒ½å†™ä¸€æ¬¡</p><p><img src="/../../../../medias/blog_picture/51/68.png"></p><ul><li>ç¼–ç¨‹æ—¶å·¦è¾¹ç»™é«˜ç”µå¹³ã€ä¸‹è¾¹ç»™0å¯ä»¥æŠŠè“è‰²çš„äºŒæç®¡<strong>å‡»ç©¿</strong>ï¼Œå®ç°å¯å†™ï¼Œæ‰€ä»¥ä¹Ÿå«<strong>çƒ§å½•ç¨‹åº</strong>å“ˆå“ˆ</li></ul><p>â‘¢EPROM(å¯æ“¦é™¤å¯ç¼–ç¨‹ROM)ï¼šå¯å†™</p><p>â‘£E2PROM(ç”µå¯æ“¦é™¤å¯ç¼–ç¨‹ROM)ï¼š5Vå‡ æ¯«ç§’å°±èƒ½æ“¦é™¤</p><p>â‘¤Flash(å†…å­˜)ï¼š</p><p>â‘¥ç¡¬ç›˜ã€è½¯ç›˜ã€å…‰ç›˜ç­‰ï¼šé€šè¿‡ç£ä»‹è´¨ä¼ é€’</p><h1 id="äºŒ-AT24C02ä»‹ç»"><a href="#äºŒ-AT24C02ä»‹ç»" class="headerlink" title="äºŒ.AT24C02ä»‹ç»"></a>äºŒ.AT24C02ä»‹ç»</h1><p><img src="/../../../../medias/blog_picture/51/69.png"></p><h1 id="ä¸‰-I2C"><a href="#ä¸‰-I2C" class="headerlink" title="ä¸‰.I2C"></a>ä¸‰.I2C</h1><p><img src="/../../../../medias/blog_picture/51/70.png"></p><h2 id="1-èµ·å§‹-ç»ˆæ­¢"><a href="#1-èµ·å§‹-ç»ˆæ­¢" class="headerlink" title="1.èµ·å§‹&amp;ç»ˆæ­¢"></a>1.èµ·å§‹&amp;ç»ˆæ­¢</h2><p><img src="/../../../../medias/blog_picture/51/71.png"></p><h2 id="2-å‘é€-æ¥å—å­—èŠ‚"><a href="#2-å‘é€-æ¥å—å­—èŠ‚" class="headerlink" title="2.å‘é€/æ¥å—å­—èŠ‚"></a>2.å‘é€/æ¥å—å­—èŠ‚</h2><p><img src="/../../../../medias/blog_picture/51/72.png"></p><p><img src="/../../../../medias/blog_picture/51/73.png"></p><p>ğŸ‘†æ³¨æ„ä¸»æœºå’Œä»æœºï¼Œåœ¨SDAä¸­ç´«è‰²æ˜¯ä»æœºï¼Œé»‘è‰²æ˜¯ä¸»æœº</p><p>åº”ç­”å¯ä»¥ä½œä¸ºç¬¬ä¹ä½</p><ul><li>ä¸»æœºé‡Šæ”¾äº†SDA**(ç»™SDAç½®1)**å˜æˆé«˜ç”µå¹³ï¼ŒæŠŠæ§åˆ¶æƒç»™ä»æœº</li><li>æ­¤æ—¶ä»æœºå¯ä»¥æ“æ§å‘1æˆ–å‘0</li><li>å½“SCLæ‹‰ä½ï¼Œä»æœºè‡ªåŠ¨å°†ä¸‹ä¸€ä½æ•°æ®æ”¾åˆ°æ€»çº¿ä¸Š</li></ul><h2 id="3-å‘é€-æ¥æ”¶åº”ç­”"><a href="#3-å‘é€-æ¥æ”¶åº”ç­”" class="headerlink" title="3.å‘é€/æ¥æ”¶åº”ç­”"></a>3.å‘é€/æ¥æ”¶åº”ç­”</h2><p><img src="/../../../../medias/blog_picture/51/74.png"></p><p>åº”ç­”å¯ä»¥ä½œä¸ºæ•°æ®çš„ç¬¬ä¹ä½</p><p>ç”¨æ¥åˆ¤æ–­ä»æœºæ˜¯å¦åº”ç­”æˆ–è€…ä¸»æœºæ˜¯å¦å‘é€åº”ç­”</p><p><img src="/../../../../medias/blog_picture/51/75.png"></p><p>å‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œ<strong>ä»1ï¼š15ï¼š21å¼€å§‹ï¼Œä»£ç ä¸èƒ½æ­£å¸¸è¿è¡Œ</strong>å‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œå‘œæ”¾å¼ƒäº†æ”¾å¼ƒäº†</p><h1 id="å››-å­¦åˆ°äº†å•¥"><a href="#å››-å­¦åˆ°äº†å•¥" class="headerlink" title="å››.å­¦åˆ°äº†å•¥"></a>å››.å­¦åˆ°äº†å•¥</h1><hr><p>æ„Ÿè§‰æ¯”è¾ƒæœ‰ç”¨çš„æ˜¯åœ¨å®šæ—¶å™¨é‡Œè°ƒç”¨å‡½æ•°ï¼ŒåŒæ—¶å¯¹ä¸åŒæ¨¡å—å‡½æ•°è®¡æ—¶</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Timer0_Routine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span><span class="token punctuation">{</span><span class="token keyword">static</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> T0Count1<span class="token punctuation">,</span>T0Count2<span class="token punctuation">;</span>TL0 <span class="token operator">=</span> <span class="token number">0x18</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>T0Count1<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>T0Count1<span class="token operator">&gt;=</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token comment">//20msè¿”å›ä¸€æ¬¡1æˆ–0</span><span class="token comment">//é€šè¿‡è®°å½•ä¸Šä¸€æ¬¡å’Œè¿™ä¸€æ¬¡çš„è¿”å›å€¼åˆ¤æ–­æ˜¯æŒ‰ä¸‹è¿˜æ˜¯æ¾å¼€</span><span class="token punctuation">{</span>T0Count1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token function">Key_Loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™æ—¶å€™Keyå‡½æ•°æ— ä¸­ç”Ÿæœ‰ï¼Œæœ‰äº†è‡ªå·±çš„ä¸­æ–­</span><span class="token punctuation">}</span>T0Count2<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>T0Count2<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>T0Count2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token function">Nixie_Loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Key_Loop</strong>   <strong>Nixie_Loop</strong></p><p>åªéœ€è¦æ”¹å˜T0Count&gt;=xå°±å¯ä»¥æœ‰é’ˆå¯¹çš„è®¡æ—¶</p><p>è¿™ä¸ªloopå‡½æ•°ç›¸å½“äºç»•äº†ä¸€ä¸ªåœˆæŠŠå­å‡½æ•°è°ƒç”¨äº†ä¸€æ¬¡ï¼Œä½†æ˜¯èµ·ç èµ·åˆ°äº†è®¡æ—¶çš„ä½œç”¨</p>]]></content>
      
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”é˜Ÿåˆ—</title>
      <link href="/2022/11/22/xiao-bai-dui-lie/"/>
      <url>/2022/11/22/xiao-bai-dui-lie/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-æ¦‚å¿µ"><a href="#ä¸€-æ¦‚å¿µ" class="headerlink" title="ä¸€.æ¦‚å¿µ"></a>ä¸€.æ¦‚å¿µ</h1><h2 id="1-å‰front-årear"><a href="#1-å‰front-årear" class="headerlink" title="1.å‰front årear"></a>1.å‰front årear</h2><ul><li><p>å‡ºé˜Ÿï¼Œä»å¤´å‡º</p></li><li><p>å…¥é˜Ÿï¼Œä»å°¾å…¥</p></li></ul><h2 id="2-åˆ†ç±»"><a href="#2-åˆ†ç±»" class="headerlink" title="2.åˆ†ç±»"></a>2.åˆ†ç±»</h2><p>é“¾å¼é˜Ÿåˆ—ï¼Œé™æ€é˜Ÿåˆ—ï¼Œå¾ªç¯é˜Ÿåˆ—</p><ul><li>é“¾å¼é˜Ÿåˆ—â€“ç”¨é“¾è¡¨å®ç°</li><li>é™æ€é˜Ÿåˆ—â€“ç”¨æ•°ç»„å®ç°ï¼Œé€šå¸¸éƒ½å¿…é¡»æ˜¯å¾ªç¯é˜Ÿåˆ—</li></ul><h2 id="3-é—®é¢˜"><a href="#3-é—®é¢˜" class="headerlink" title="3.é—®é¢˜"></a>3.é—®é¢˜</h2><h3 id="â‘ é™æ€é˜Ÿåˆ—ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å¾ªç¯é˜Ÿåˆ—"><a href="#â‘ é™æ€é˜Ÿåˆ—ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="â‘ é™æ€é˜Ÿåˆ—ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å¾ªç¯é˜Ÿåˆ—"></a>â‘ é™æ€é˜Ÿåˆ—ä¸ºä»€ä¹ˆ<strong>å¿…é¡»æ˜¯å¾ªç¯é˜Ÿåˆ—</strong></h3><p>râ†’râ†’</p><p>â€‹dd</p><p>â€‹cfâ†’c</p><p>â€‹b==&gt;  b</p><p>fâ†’   a a</p><p>ğŸ‘†aå’Œbå‡ºé˜Ÿä¹‹åï¼Œå¯¹äºæ•°ç»„aæ¥è¯´ï¼Œa[0]ã€a[1]è¿™ä¸¤ä¸ªç©ºé—´å°±è¢«æµªè´¹äº†ï¼Œå› ä¸ºfå’Œrä¸€ç›´åœ¨å¾€ä¸Šç§»åŠ¨ï¼Œæ‰€ä»¥ç›¸å½“äºa[0]ã€a[1]ä¸èƒ½å†ä½¿ç”¨äº†ã€‚ç”¨ä¼ ç»Ÿæ•°ç»„æ¥å®ç°é˜Ÿåˆ—ï¼Œæ— è®ºæ˜¯å…¥é˜Ÿè¿˜æ˜¯å‡ºé˜Ÿï¼Œå‚æ•°éƒ½åªèƒ½å¢ä¸èƒ½å‡</p><h3 id="â‘¡å¾ªç¯é˜Ÿåˆ—éœ€è¦å‡ ä¸ªå‚æ•°åŠå„ä¸ªå‚æ•°çš„å«ä¹‰"><a href="#â‘¡å¾ªç¯é˜Ÿåˆ—éœ€è¦å‡ ä¸ªå‚æ•°åŠå„ä¸ªå‚æ•°çš„å«ä¹‰" class="headerlink" title="â‘¡å¾ªç¯é˜Ÿåˆ—éœ€è¦å‡ ä¸ªå‚æ•°åŠå„ä¸ªå‚æ•°çš„å«ä¹‰"></a>â‘¡å¾ªç¯é˜Ÿåˆ—éœ€è¦<strong>å‡ ä¸ªå‚æ•°</strong>åŠå„ä¸ª<strong>å‚æ•°çš„å«ä¹‰</strong></h3><ul><li><p>éœ€è¦<strong>2ä¸ª</strong>å‚æ•°æ¥ç¡®å®š <strong>front</strong> <strong>rear</strong></p></li><li><p>2ä¸ªå‚æ•°åœ¨ä¸åŒåœºåˆæœ‰<strong>ä¸åŒçš„çš„å®šä¹‰</strong></p><ul><li><p>åœºåˆï¼š</p><blockquote><p> 1ï¼‰é˜Ÿåˆ—åˆå§‹åŒ–</p><p>â€‹frontå’Œrearçš„å€¼éƒ½æ˜¯<strong>é›¶</strong></p><p>2ï¼‰é˜Ÿåˆ—éç©º</p><p>â€‹frontä»£è¡¨çš„æ˜¯é˜Ÿåˆ—çš„<strong>ç¬¬ä¸€ä¸ªå…ƒç´ </strong></p><p>â€‹rearä»£è¡¨çš„æ˜¯é˜Ÿåˆ—çš„<strong>æœ€åä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„ä¸‹ä¸€ä¸ª</strong></p><p>3ï¼‰é˜Ÿåˆ—ç©º</p><p>â€‹frontå’Œrearçš„<strong>å€¼ç›¸ç­‰</strong>ï¼Œä½†ä¸ä¸€å®šæ˜¯é›¶</p></blockquote></li></ul></li></ul><h3 id="â‘¢å¾ªç¯é˜Ÿåˆ—å‡ºã€å…¥é˜Ÿä¼ªç®—æ³•è®²è§£"><a href="#â‘¢å¾ªç¯é˜Ÿåˆ—å‡ºã€å…¥é˜Ÿä¼ªç®—æ³•è®²è§£" class="headerlink" title="â‘¢å¾ªç¯é˜Ÿåˆ—å‡ºã€å…¥é˜Ÿä¼ªç®—æ³•è®²è§£"></a>â‘¢å¾ªç¯é˜Ÿåˆ—<strong>å‡ºã€å…¥é˜Ÿä¼ªç®—æ³•</strong>è®²è§£</h3><h4 id="1-å…¥é˜Ÿ"><a href="#1-å…¥é˜Ÿ" class="headerlink" title="1.å…¥é˜Ÿ"></a>1.å…¥é˜Ÿ</h4><ul><li><p>å°†å€¼å­˜å…¥ræ‰€ä»£è¡¨çš„ä½ç½®</p></li><li><p>r=(r+1)%æ•°ç»„çš„é•¿åº¦</p></li></ul><h4 id="2-å‡ºé˜Ÿ"><a href="#2-å‡ºé˜Ÿ" class="headerlink" title="2.å‡ºé˜Ÿ"></a>2.å‡ºé˜Ÿ</h4><ul><li>f=(f+1)%æ•°ç»„çš„é•¿åº¦</li></ul><h3 id="â‘£å¦‚ä½•åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€å·²æ»¡"><a href="#â‘£å¦‚ä½•åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€å·²æ»¡" class="headerlink" title="â‘£å¦‚ä½•åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€å·²æ»¡"></a>â‘£å¦‚ä½•åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸º<strong>ç©ºã€å·²æ»¡</strong></h3><h4 id="1-ç©º"><a href="#1-ç©º" class="headerlink" title="1.ç©º"></a>1.ç©º</h4><ul><li>f=r</li></ul><h4 id="2-æ»¡"><a href="#2-æ»¡" class="headerlink" title="2.æ»¡"></a>2.æ»¡</h4><ul><li><p>â… å¤šå¢åŠ ä¸€ä¸ªæ ‡è¯†å‚æ•°(é€šå¸¸ä¸ç”¨è¿™ä¸ª)</p></li><li><p>â…¡å°‘ç”¨ä¸€ä¸ªå…ƒç´ ã€‚æœ¬æ¥å¯ä»¥æ”¾nä¸ªå…ƒç´ ï¼Œ<strong>å®šä¹‰n-1ä¸ªæ˜¯æ»¡çš„</strong>(é€šå¸¸ä½¿ç”¨è¿™ç§æ–¹å¼)</p><ul><li><p>å¦‚ä½•åˆ¤æ–­é˜Ÿåˆ—å·²æ»¡ï¼šrå’Œfçš„å€¼ç´§æŒ¨ç€ï¼Œåˆ™é˜Ÿåˆ—å·²æ»¡</p></li><li><pre><code class="c">if((r+1)%æ•°ç»„çš„é•¿åº¦==f)    //å·²æ»¡else    //ä¸æ»¡<pre class="line-numbers language-none"><code class="language-none"># äºŒ.ä»£ç ```c#include&lt;stdio.h&gt;#include&lt;stdbool.h&gt;#include&lt;malloc.h&gt;#include&lt;stdlib.h&gt;typedef struct Queue{int *pBase;int front;int rear;}QUEUE,*PQUEUE;void init(PQUEUE);//åˆå§‹åŒ– bool fullQueue(PQUEUE);//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡ bool enQueue(PQUEUE,int);//å…¥é˜Ÿ bool emptyQueue(PQUEUE);//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºvoid traverse(PQUEUE);//éå†bool outQueue(PQUEUE,int*);//å‡ºé˜Ÿ int main(){//int val;int *pVal=(int*)malloc(sizeof(int)*4); QUEUE Q;init(&amp;Q);enQueue(&amp;Q,1);enQueue(&amp;Q,2);enQueue(&amp;Q,3);enQueue(&amp;Q,4);enQueue(&amp;Q,5);enQueue(&amp;Q,6);enQueue(&amp;Q,7);traverse(&amp;Q);if(outQueue(&amp;Q,pVal))printf("å‡ºé˜Ÿçš„æ•°å­—æ˜¯:%d\n",*pVal);//if (outQueue(&amp;Q,&amp;val))//printf("å‡ºé˜Ÿçš„æ•°å­—æ˜¯%d\n",val);elseprintf("å‡ºé˜Ÿå¤±è´¥ï¼\n"); traverse(&amp;Q);free(pVal);pVal=NULL;return 0;}void init(PQUEUE pQ){pQ-&gt;pBase=(int*)malloc(sizeof(int)*6);pQ-&gt;front=0;pQ-&gt;rear=0;}bool fullQueue(PQUEUE pQ){if((pQ-&gt;rear+1)%6==pQ-&gt;front)return true;elsereturn false;}bool enQueue(PQUEUE pQ,int val){if(fullQueue(pQ))return false;else{pQ-&gt;pBase[pQ-&gt;rear]=val;pQ-&gt;rear=(pQ-&gt;rear+1)%6;}}bool emptyQueue(PQUEUE pQ){if(pQ-&gt;rear==pQ-&gt;front)return true;elsereturn false;}void traverse(PQUEUE pQ){if(emptyQueue(pQ)){printf("é˜Ÿåˆ—ä¸ºç©º\n");exit(-1);}else{int i=pQ-&gt;front;while(pQ-&gt;rear!=i){printf("%d",pQ-&gt;pBase[i]); i=(i+1)%6;}printf("\n");}return;}bool outQueue(PQUEUE pQ,int *pVal){if(emptyQueue(pQ))return false;else{*pVal=pQ-&gt;pBase[pQ-&gt;front];pQ-&gt;front=(pQ-&gt;front+1)%6;return true;}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”æ ˆ</title>
      <link href="/2022/11/20/xiao-bai-zhan/"/>
      <url>/2022/11/20/xiao-bai-zhan/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-æ ˆå’Œå †"><a href="#ä¸€-æ ˆå’Œå †" class="headerlink" title="ä¸€.æ ˆå’Œå †"></a>ä¸€.æ ˆå’Œå †</h1><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">double</span> <span class="token operator">*</span>q<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>*q</strong>å°±æ˜¯<strong>æ ˆ</strong>é‡Œçš„ï¼Œ<strong>200</strong>æ˜¯å †é‡Œçš„</p><p>åŠ¨æ€åˆ†é…çš„éƒ½åœ¨å †é‡Œåˆ†é…ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨åˆ†é…</p><p>é™æ€åˆ†é…çš„éƒ½åœ¨æ ˆé‡Œåˆ†é…ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…</p><h2 id="æ ˆï¼š"><a href="#æ ˆï¼š" class="headerlink" title="æ ˆï¼š"></a>æ ˆï¼š</h2><p>1.å®šä¹‰ï¼š</p><ul><li>å®ç°â€œå…ˆè¿›åå‡ºâ€çš„å­˜å‚¨ç»“æ„</li></ul><p>2.åˆ†ç±»ï¼š</p><ul><li>é™æ€æ ˆ </li><li>åŠ¨æ€æ ˆï¼šå†…æ ¸å°±æ˜¯é“¾è¡¨</li></ul><p>3.ç®—æ³•</p><ul><li>å‡ºæ ˆ</li><li>å‹æ ˆ</li></ul><p>4.å˜é‡</p><ul><li>pTop</li><li>pBottom</li></ul><p><strong>æ ˆç©º</strong>ï¼špTop==pBottom</p><p>5.åº”ç”¨</p><ul><li>å‡½æ•°è°ƒç”¨</li><li>ä¸­æ–­</li><li>è¡¨è¾¾å¼æ±‚å€¼</li><li>å†…å­˜åˆ†é…</li><li>ç¼“å†²å¤„ç†</li><li>è¿·å®«</li></ul><h1 id="äºŒ-ä»£ç "><a href="#äºŒ-ä»£ç " class="headerlink" title="äºŒ.ä»£ç "></a>äºŒ.ä»£ç </h1><h2 id="1-ä¸¤ä¸ªç»“æ„ä½“çš„çš„å®šä¹‰"><a href="#1-ä¸¤ä¸ªç»“æ„ä½“çš„çš„å®šä¹‰" class="headerlink" title="1.ä¸¤ä¸ªç»“æ„ä½“çš„çš„å®šä¹‰"></a>1.ä¸¤ä¸ªç»“æ„ä½“çš„çš„å®šä¹‰</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">{</span><span class="token keyword">int</span> data<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span>NODE<span class="token punctuation">,</span><span class="token operator">*</span>PNODE<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Stack</span><span class="token punctuation">{</span>PNODE pTop<span class="token punctuation">;</span>PNODE pBottom<span class="token punctuation">;</span><span class="token punctuation">}</span>STACK<span class="token punctuation">,</span><span class="token operator">*</span>PSTACK<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‰å¯¹äºStackçš„ç†è§£ï¼š</p><p>Stackè¿™ä¸ªç»“æ„ä½“é‡Œæœ‰ä¸¤ä¸ªæˆå‘˜â€”â€”<strong>åå­—å«pTopå’ŒpBottomã€ç±»å‹ä¸ºNODEæŒ‡é’ˆ</strong></p><h2 id="2-åˆå§‹åŒ–"><a href="#2-åˆå§‹åŒ–" class="headerlink" title="2.åˆå§‹åŒ–"></a>2.åˆå§‹åŒ–</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token comment">//ä¼ å‚ï¼šæ ˆçš„åœ°å€</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»™æ ˆé¡¶ç”³è¯·å†…å­˜ç©ºé—´</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token comment">//æ­¤æ—¶pTå’ŒpBæŒ‡å‘åŒä¸€ä¸ªå†…å­˜</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment">//è®©pTå’ŒpBæŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ä¸”è¯¥èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸå­˜æ”¾çš„æ˜¯NULLï¼Œè¯¥èŠ‚ç‚¹ä½œä¸ºä¸€ä¸ªå¤´ç»“ç‚¹ã€‚</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-å‹æ ˆ"><a href="#3-å‹æ ˆ" class="headerlink" title="3.å‹æ ˆ"></a>3.å‹æ ˆ</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE pNew<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸ºæ–°èŠ‚ç‚¹ç”³è¯·ç©ºé—´</span><span class="token keyword">if</span><span class="token punctuation">(</span>pNew<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>pNew<span class="token operator">-&gt;</span>data<span class="token operator">=</span>val<span class="token punctuation">;</span>pNew<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>pNew<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">pNew<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ğŸ‘†ç†è§£ï¼š</p><p>ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ**pNew-&gt;pNext=pS-&gt;pTop;<strong>å’Œ</strong>pNew-&gt;pNext=pS-&gt;pBottom;**éƒ½å¯ä»¥ <code>ç†è§£ä¸ºæ’å…¥çš„æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸå’ŒpTã€pBæ˜¯ä¸€æ ·çš„ï¼Œå³æŒ‡å‘ä¸€æ ·ï¼Œéƒ½æŒ‡å‘å¤´ç»“ç‚¹</code></p><p><strong>ä½†æ˜¯ä»ç¬¬äºŒä¸ªèŠ‚ç‚¹å¼€å§‹</strong>ï¼Œä»–çš„æŒ‡é’ˆåŸŸå­˜æ”¾çš„åº”è¯¥å¾—æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œå¯¹åº”å›¾ä¸Šçš„å°±æ˜¯<code>å³è¾¹è“è‰²çš„ç®­å¤´åº”è¯¥==å·¦è¾¹è¢«è“è‰²xè¦†ç›–çš„çº¢è‰²ç®­å¤´</code>ï¼Œå³<strong>pNew-&gt;pNext=pS-&gt;pTop;</strong></p><h2 id="4-éå†"><a href="#4-éå†" class="headerlink" title="4.éå†"></a>4.éå†</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">traverse</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-å‡ºæ ˆ"><a href="#5-å‡ºæ ˆ" class="headerlink" title="5.å‡ºæ ˆ"></a>5.å‡ºæ ˆ</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ ˆä¸ºç©ºï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>PNODE a<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªåº”è¯¥ä¹Ÿå¾ˆå¥½ç†è§£ï¼šåˆ é™¤aæŒ‡å‘çš„èŠ‚ç‚¹ï¼ŒpTopè´Ÿè´£å¾€ä¸‹èµ°ï¼Œé˜²æ­¢å› ä¸ºåˆ æ‰ä¸Šé¢çš„èŠ‚ç‚¹è€Œä¸¢å¤±ä¸‹é¢çš„èŠ‚ç‚¹çš„åœ°å€</p><h2 id="6-æ¸…ç©º"><a href="#6-æ¸…ç©º" class="headerlink" title="6.æ¸…ç©º"></a>6.æ¸…ç©º</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ ˆä¸ºç©ºï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤§è‡´æ€è·¯å’Œå‡ºæ ˆç›¸ä¼¼ï¼Œå°±æ˜¯å¤šäº†ä¸ªå¾ªç¯ï¼Œå†è°ƒæ¢ä¸€ä¸‹è¯­å¥é¡ºåºå³å¯</p><h2 id="7-å®Œæ•´ä»£ç "><a href="#7-å®Œæ•´ä»£ç " class="headerlink" title="7.å®Œæ•´ä»£ç "></a>7.å®Œæ•´ä»£ç </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;malloc.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdbool.h&gt;</span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">{</span><span class="token keyword">int</span> data<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span>NODE<span class="token punctuation">,</span><span class="token operator">*</span>PNODE<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Stack</span><span class="token punctuation">{</span>PNODE pTop<span class="token punctuation">;</span>PNODE pBottom<span class="token punctuation">;</span><span class="token punctuation">}</span>STACK<span class="token punctuation">,</span><span class="token operator">*</span>PSTACK<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">traverse</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">)</span><span class="token punctuation">;</span>bool <span class="token function">empty</span><span class="token punctuation">(</span>PSTACK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>STACK S<span class="token punctuation">;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\nå‡ºæ ˆåç»“æœä¸ºï¼›\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ¸…é™¤æˆåŠŸï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ¸…é™¤å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE pNew<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pNew<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>pNew<span class="token operator">-&gt;</span>data<span class="token operator">=</span>val<span class="token punctuation">;</span>pNew<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>pNew<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">traverse</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ ˆä¸ºç©ºï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>PNODE a<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>bool <span class="token function">empty</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span>PSTACK pS<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">==</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ ˆä¸ºç©ºï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span>pS<span class="token operator">-&gt;</span>pBottom<span class="token punctuation">)</span><span class="token punctuation">{</span>pS<span class="token operator">-&gt;</span>pTop<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>p<span class="token operator">=</span>pS<span class="token operator">-&gt;</span>pTop<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”é“¾è¡¨</title>
      <link href="/2022/11/18/xiao-bai-lian-biao/"/>
      <url>/2022/11/18/xiao-bai-lian-biao/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-typedef"><a href="#ä¸€-typedef" class="headerlink" title="ä¸€.typedef"></a>ä¸€.typedef</h1><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Student</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> sid<span class="token punctuation">;</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token punctuation">}</span>ST<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">Student</span> student<span class="token punctuation">;</span><span class="token comment">//&lt;==&gt;ST student;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Student</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> sid<span class="token punctuation">;</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">*</span>PST<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">Student</span> <span class="token operator">*</span>p<span class="token punctuation">;</span><span class="token comment">//&lt;==&gt;PST *p;</span><span class="token comment">//PST&lt;==&gt;struct Student *</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-C" data-language="C"><code class="language-C">typedef struct Student{    int sid;    int age;}*PST,ST;//æ•ˆæœæ˜¯ä¸Šé¢çš„æ•´åˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="äºŒ-é“¾è¡¨"><a href="#äºŒ-é“¾è¡¨" class="headerlink" title="äºŒ.é“¾è¡¨"></a>äºŒ.é“¾è¡¨</h1><h2 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1.å®šä¹‰"></a>1.å®šä¹‰</h2><ul><li>nä¸ªèŠ‚ç‚¹ç¦»æ•£åˆ†é…</li><li>æ‰¹æ¬¡é€šè¿‡æŒ‡é’ˆç›¸è¿</li><li>æ¯éš”èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå‰é©±èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªåç»­èŠ‚ç‚¹</li><li>é¦–èŠ‚ç‚¹æ²¡æœ‰å‰é©±èŠ‚ç‚¹ï¼Œå°¾èŠ‚ç‚¹æ²¡æœ‰åç»­èŠ‚ç‚¹</li><li>[ç¦»æ•£å­˜å‚¨]</li></ul><h2 id="2-ä¸“ä¸šæœ¯è¯­"><a href="#2-ä¸“ä¸šæœ¯è¯­" class="headerlink" title="2.ä¸“ä¸šæœ¯è¯­"></a>2.ä¸“ä¸šæœ¯è¯­</h2><ul><li>é¦–èŠ‚ç‚¹ï¼šç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹</li><li>å°¾èŠ‚ç‚¹ï¼šæœ€åä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹</li><li>å¤´ç»“ç‚¹ï¼šç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹<ul><li>æ²¡æœ‰å­˜æ”¾æœ‰æ•ˆæ•°æ®</li></ul></li><li>å¤´æŒ‡é’ˆï¼šæŒ‡å‘å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆå˜é‡</li><li>å°¾æŒ‡é’ˆï¼šæŒ‡å‘å°¾èŠ‚ç‚¹çš„æŒ‡é’ˆå˜é‡</li></ul><h2 id="3-ç¡®å®šä¸€ä¸ªé“¾è¡¨éœ€è¦çš„å‚æ•°"><a href="#3-ç¡®å®šä¸€ä¸ªé“¾è¡¨éœ€è¦çš„å‚æ•°" class="headerlink" title="3.ç¡®å®šä¸€ä¸ªé“¾è¡¨éœ€è¦çš„å‚æ•°"></a>3.ç¡®å®šä¸€ä¸ªé“¾è¡¨éœ€è¦çš„å‚æ•°</h2><p><strong>åªéœ€è¦ä¸€ä¸ªå¤´æŒ‡é’ˆ</strong></p><p>ğŸ‘‰ä¸ºä»€ä¹ˆä¸ç”¨å¤´ç»“ç‚¹</p><ul><li><p>å› ä¸ºå¤´ç»“ç‚¹çš„æ•°æ®ç±»å‹å’Œåé¢æœ‰æ•°æ®åŸŸçš„èŠ‚ç‚¹çš„æ•°æ®ç±»å‹æ˜¯ä¸€æ ·çš„(è™½ç„¶å¤´ç»“ç‚¹æ²¡æœ‰æ•°æ®åŸŸï¼Œä½†æ˜¯ä»–ä¼šæœ‰åƒåœ¾å€¼ï¼Œä¼šå å†…å­˜)</p></li><li><p>å¤´æŒ‡é’ˆåªå å››ä¸ªå­—èŠ‚æ¥å­˜æ”¾å¤´ç»“ç‚¹çš„åœ°å€</p></li></ul><h2 id="4-èŠ‚ç‚¹"><a href="#4-èŠ‚ç‚¹" class="headerlink" title="4.èŠ‚ç‚¹"></a>4.èŠ‚ç‚¹</h2><ul><li>éƒ½è¦æœ‰ä¸€ä¸ªæŒ‡é’ˆåŸŸå’Œæ•°æ®åŸŸ</li><li>ç»“æ„ä½“çš„æŸä¸€ä¸ªæˆå‘˜æŒ‡å‘çš„æ˜¯è·Ÿå®ƒä¸€æ‘¸ä¸€æ ·çš„æ•°æ®ç±»å‹çš„æ•°æ®</li><li>è¦ä¸ºåˆ›å»ºçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ç”³è¯·ç©ºé—´</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> data<span class="token punctuation">;</span><span class="token comment">//æ•°æ®åŸŸ</span>    <span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span>pNext<span class="token punctuation">;</span><span class="token comment">//æŒ‡é’ˆåŸŸ</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-åˆ†ç±»"><a href="#5-åˆ†ç±»" class="headerlink" title="5.åˆ†ç±»"></a>5.åˆ†ç±»</h2><ul><li>å•é“¾è¡¨</li><li>åŒé“¾è¡¨ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªæŒ‡é’ˆåŸŸ</li><li>å¾ªç¯é“¾è¡¨ï¼šèƒ½é€šè¿‡ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ‰¾åˆ°å…¶ä»–èŠ‚ç‚¹</li><li>éå¾ªç¯é“¾è¡¨</li></ul><h1 id="ä¸‰-ä½œç”¨"><a href="#ä¸‰-ä½œç”¨" class="headerlink" title="ä¸‰.ä½œç”¨"></a>ä¸‰.ä½œç”¨</h1><h2 id="1-åˆ›å»º-åˆå§‹åŒ–"><a href="#1-åˆ›å»º-åˆå§‹åŒ–" class="headerlink" title="1.åˆ›å»º/åˆå§‹åŒ–"></a>1.åˆ›å»º/åˆå§‹åŒ–</h2><ul><li>éœ€è¦ç”¨åˆ°çš„å˜é‡ï¼šæœ€åˆåˆ›å»ºçš„é“¾è¡¨çš„é•¿åº¦<strong>len</strong>ã€æ¯ä¸ªç»“æ„ä½“æ•°æ®åŸŸçš„æ•°æ®<strong>val</strong>ã€å¤´èŠ‚ç‚¹<strong>pHead</strong>ã€å°¾èŠ‚ç‚¹<strong>pTail</strong></li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//xxxxxxx</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">pNew<span class="token operator">-&gt;</span>data<span class="token operator">=</span>val<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>pTail=pHead<ul><li>å¯ä»¥ç†è§£ä¸ºç”¨å°¾æŒ‡é’ˆæ˜¯é’ˆçº¿ï¼ŒæŠŠåŸæœ‰é“¾è¡¨æœ€åä¸€ä¸ªèŠ‚ç‚¹å’Œæ–°åŠ å…¥çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥</li></ul></li></ul><h2 id="2-æ’å…¥"><a href="#2-æ’å…¥" class="headerlink" title="2.æ’å…¥"></a>2.æ’å…¥</h2><ul><li><p>éœ€è¦ç”¨åˆ°çš„å‚æ•°ï¼šå¤´ç»“ç‚¹ï¼Œæ–°æ’å…¥çš„ç»“æ„ä½“çš„ä½ç½®ï¼Œæ–°æ’å…¥çš„ç»“æ„ä½“çš„æ•°æ®åŸŸä¸­çš„æ•°å€¼</p></li><li><p>éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼šè¦æ€ä¹ˆé€šè¿‡è¾“å…¥çš„<strong>pos</strong>æ‰¾åˆ°è¦<strong>æŒ‡å‘æ–°æ’å…¥ç»“æ„ä½“ä½ç½®çš„ç»“æ„ä½“æŒ‡é’ˆ</strong></p></li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c">PNODE p<span class="token operator">=</span>pHead<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">&lt;</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//i&lt;p-1å°±æ˜¯è®©pæŒ‡å‘è¦æ’å…¥ä½ç½®çš„ä¸Šä¸€ä¸ªç»“æ„ä½“ </span><span class="token punctuation">{</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/*æ¡ä»¶â‘ ï¼šç¡®ä¿æ˜¯åœ¨ä¸€ä¸ªä¸æ˜¯ç©ºçš„ç»“æ„ä½“åæ’å…¥çš„æ¡ä»¶â‘¡ï¼špè¦æŒ‡å‘å³å°†è¦æ’å…¥çš„ä½ç½®çš„å‰ä¸€ä¸ªç»“æ„ä½“*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬è¦é€šè¿‡éå†çš„æ–¹å¼æ‰¾åˆ°ç›®æ ‡ç»“æ„ä½“ï¼Œå‡è®¾æˆ‘ä»¬è¦æ’å…¥åˆ°pos=3</p><ul><li><strong>i&lt;pos=1</strong>è¿™é‡Œ i=0æ—¶ p=ç¬¬ä¸€ä¸ªæœ‰æ•ˆç»“æ„ä½“</li><li>i=1æ—¶ï¼Œp=ç¬¬äºŒä¸ªæœ‰æ•ˆç»“æ„ä½“</li><li>i=2ä¸ç¬¦åˆå¾ªç¯æ¡ä»¶</li><li>æ‰€ä»¥whileç»“æŸåï¼Œpå°±æ˜¯ç¬¬äºŒä¸ªæœ‰æ•ˆç»“æ„ä½“çš„æŒ‡é’ˆå˜é‡</li></ul><h2 id="3-åˆ é™¤"><a href="#3-åˆ é™¤" class="headerlink" title="3.åˆ é™¤"></a>3.åˆ é™¤</h2><ul><li><p>åˆ é™¤æ˜¯é€šè¿‡ä¿®æ”¹å‰ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆçš„æŒ‡å‘æ¥åˆ é™¤çš„</p></li><li><p>æ‰€ä»¥åˆ é™¤çš„ä½ç½®çš„å‰ä¸€ä¸ªæŒ‡é’ˆçš„æŒ‡å‘ä¸èƒ½æ˜¯NULL</p></li><li><p>å¦‚æœè¦åˆ é™¤çš„å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå·²ç»æ˜¯NULLäº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç»§ç»­éå†ä¸‹å» </p></li><li><p><strong>vsæ’å…¥</strong>ï¼Œå¦‚æœè¦æ’å…¥çš„ä½ç½®æ˜¯æœ€åä¸€ä¸ªï¼Œå³p-&gt;</p></li></ul><h1 id="å››-å…¨éƒ¨ä»£ç "><a href="#å››-å…¨éƒ¨ä»£ç " class="headerlink" title="å››.å…¨éƒ¨ä»£ç "></a>å››.å…¨éƒ¨ä»£ç </h1><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;malloc.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdbool.h&gt;</span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">{</span><span class="token keyword">int</span> data<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span>NODE<span class="token punctuation">,</span><span class="token operator">*</span>PNODE<span class="token punctuation">;</span><span class="token comment">//å‡½æ•°å£°æ˜</span>PNODE <span class="token function">creatList</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">traverseList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">;</span>bool <span class="token function">isEmpty</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">lengthList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">;</span>bool <span class="token function">insertList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>bool <span class="token function">deleteList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span>pVal<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">sortList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">lengthList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> val<span class="token punctuation">;</span>PNODE pHead<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>pHead<span class="token operator">=</span><span class="token function">creatList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//traverseList(pHead);</span><span class="token comment">/*if(isEmpty(pHead))printf("é“¾è¡¨ä¸ºç©ºï¼\n");elseprintf("é“¾è¡¨ä¸ç©ºï¼\n");return 0;*/</span><span class="token comment">/*int len=lengthList(pHead);printf("é•¿é“¾è¡¨çš„é•¿åº¦æ˜¯%d",len);*/</span><span class="token comment">//sortList(pHead);</span><span class="token comment">//traverseList(pHead);</span><span class="token comment">//insertList(pHead,4,23);</span><span class="token comment">//traverseList(pHead);</span><span class="token function">deleteList</span><span class="token punctuation">(</span>pHead<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">traverseList</span><span class="token punctuation">(</span>pHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>PNODE <span class="token function">creatList</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> val<span class="token punctuation">;</span>PNODE pHead<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pHead<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>PNODE pTail<span class="token operator">=</span>pHead<span class="token punctuation">;</span>pTail<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ‚¨éœ€è¦ç”Ÿæˆçš„é“¾è¡¨èŠ‚ç‚¹çš„ä¸ªæ•°ï¼šlen="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%è¯·è¾“å…¥ç¬¬%dä¸ªèŠ‚ç‚¹çš„å€¼"</span><span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>PNODE pNew<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pNew<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>pNew<span class="token operator">-&gt;</span>data<span class="token operator">=</span>val<span class="token punctuation">;</span>pTail<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>pNew<span class="token punctuation">;</span>pNew<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>pTail<span class="token operator">=</span>pNew<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> pHead<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">void</span> <span class="token function">traverseList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pHead<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>bool <span class="token function">isEmpty</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token operator">==</span>pHead<span class="token operator">-&gt;</span>pNext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">lengthList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pHead<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">++</span>len<span class="token punctuation">;</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> len<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">sortList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">)</span><span class="token punctuation">{</span>PNODE p<span class="token operator">=</span>pHead<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>PNODE q<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> temp<span class="token punctuation">;</span><span class="token keyword">int</span> len<span class="token operator">=</span><span class="token function">lengthList</span><span class="token punctuation">(</span>pHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>q<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>data <span class="token operator">&gt;</span> q<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>temp<span class="token operator">=</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>p<span class="token operator">-&gt;</span>data<span class="token operator">=</span>q<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>q<span class="token operator">-&gt;</span>data<span class="token operator">=</span>temp<span class="token punctuation">;</span><span class="token punctuation">}</span>q<span class="token operator">=</span>q<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">insertList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>PNODE p<span class="token operator">=</span>pHead<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">&lt;</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//i&lt;p-1å°±æ˜¯è®©pæŒ‡å‘è¦æ’å…¥ä½ç½®çš„ä¸Šä¸€ä¸ªç»“æ„ä½“ </span><span class="token punctuation">{</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&gt;</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token operator">||</span><span class="token constant">NULL</span><span class="token operator">==</span>p<span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span>PNODE pNew<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pNew<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> pNew<span class="token operator">-&gt;</span>data<span class="token operator">=</span>val<span class="token punctuation">;</span>PNODE q<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>p<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>pNew<span class="token punctuation">;</span>pNew<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>q<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span> bool <span class="token function">deleteList</span><span class="token punctuation">(</span>PNODE pHead<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span>pVal<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>PNODE p<span class="token operator">=</span>pHead<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>pNext<span class="token operator">!=</span><span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">&lt;</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//i&lt;p-1å°±æ˜¯è®©pæŒ‡å‘è¦åˆ é™¤ä½ç½®çš„ä¸Šä¸€ä¸ªç»“æ„ä½“ </span><span class="token punctuation">{</span>p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&gt;</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token operator">||</span><span class="token constant">NULL</span><span class="token operator">==</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span>PNODE pNew<span class="token operator">=</span><span class="token punctuation">(</span>PNODE<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>NODE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pNew<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> PNODE q<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span><span class="token operator">*</span>pVal<span class="token operator">=</span>q<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>p<span class="token operator">-&gt;</span>pNext<span class="token operator">=</span>p<span class="token operator">-&gt;</span>pNext<span class="token operator">-&gt;</span>pNext<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”è¿ç»­å‚¨å­˜æ•°ç»„</title>
      <link href="/2022/11/13/xiao-bai-lian-xu-chu-cun-shu-zu/"/>
      <url>/2022/11/13/xiao-bai-lian-xu-chu-cun-shu-zu/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-æ•°ç»„"><a href="#ä¸€-æ•°ç»„" class="headerlink" title="ä¸€.æ•°ç»„"></a>ä¸€.æ•°ç»„</h1><ul><li>å­˜æ”¾ç±»å‹ç›¸åŒï¼Œå¤§å°ç›¸ç­‰çš„å…ƒç´ </li></ul><h1 id="äºŒ-ä»£ç éƒ¨åˆ†"><a href="#äºŒ-ä»£ç éƒ¨åˆ†" class="headerlink" title="äºŒ.ä»£ç éƒ¨åˆ†"></a>äºŒ.ä»£ç éƒ¨åˆ†</h1><h2 id="1-å¯¹äºä¼ å‚"><a href="#1-å¯¹äºä¼ å‚" class="headerlink" title="1.å¯¹äºä¼ å‚"></a>1.å¯¹äºä¼ å‚</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">struct</span> <span class="token class-name">Arr</span><span class="token punctuation">{</span><span class="token keyword">int</span> <span class="token operator">*</span>pBase<span class="token punctuation">;</span><span class="token comment">//å­˜å‚¨çš„æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ </span><span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token comment">//æ•°ç»„æ‰€èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ çš„ä¸ªæ•° </span><span class="token keyword">int</span> cnt<span class="token punctuation">;</span><span class="token comment">//å½“å‰æ•°ç»„æœ‰æ•ˆå…ƒç´ çš„ä¸ªæ•° </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">initArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> arr<span class="token punctuation">;</span><span class="token function">initArr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœ°å€åªç”¨ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€è¡¨ç¤ºï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€å 4ä¸ªå­—èŠ‚ </span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">initArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token comment">//æ­¤æ—¶æŒ‡å‘arrçš„ç¬¬ä¸€ä¸ªåœ°å€ï¼Œç°åœ¨pArrå­˜æ”¾çš„æ˜¯arrç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€ </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">.</span>len<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">initArr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*å¯¹äºè¿™ä¸€è¡Œï¼Œå¦‚æœå†™çš„æ˜¯ğŸ‘‡initArr(arr);åœ¨å®šä¹‰å˜é‡æ—¶ä¼ å‚ä¼ çš„æ˜¯(struct Arr array)æ­¤æ—¶è¿”å›åˆ°ä¸»å‡½æ•°é‡Œçš„arrçš„lenæ˜¯åƒåœ¾å€¼ï¼Œå› ä¸ºæ˜¯é™æ€åˆ†é…å†…å­˜ï¼Œå½“è°ƒç”¨å®ŒinitArrä¹‹åä¼ å‚çš„å°±ä¸å­˜åœ¨äº†æ‰€ä»¥è¦ç”¨åˆ°"&amp;arr"ï¼Œå°†æŒ‡é’ˆçš„åœ°å€ä¼ ç»™initArrä¸­é‚£ä¹ˆåœ¨initArrå‡½æ•°é‡Œï¼Œ*pArrå°±æ˜¯arrè¿™æ ·åšçš„ä¼˜ç‚¹ï¼šå¯¹æ¯”ç”¨arrä¼ å‚(éœ€è¦ç”¨åˆ°12ä¸ªå­—èŠ‚)ï¼Œè¿™æ ·å­ä¼ å‚çœç©ºé—´(arrçš„ç¬¬ä¸€ä¸ªåœ°å€åªå 4ä¸ªå­—èŠ‚)*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å¯¹ç»“æ„ä½“çš„ç†è§£"><a href="#2-å¯¹ç»“æ„ä½“çš„ç†è§£" class="headerlink" title="2.å¯¹ç»“æ„ä½“çš„ç†è§£"></a>2.å¯¹ç»“æ„ä½“çš„ç†è§£</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">Arr</span><span class="token punctuation">{</span><span class="token keyword">int</span> <span class="token operator">*</span>pBase<span class="token punctuation">;</span><span class="token comment">//å­˜å‚¨çš„æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ </span><span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token comment">//æ•°ç»„æ‰€èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ çš„ä¸ªæ•° </span><span class="token keyword">int</span> cnt<span class="token punctuation">;</span><span class="token comment">//å½“å‰æ•°ç»„æœ‰æ•ˆå…ƒç´ çš„ä¸ªæ•° </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‰å› ä¸ºæ•°ç»„åå°±æ˜¯æ•°ç»„é¦–åœ°å€å…ƒç´ ï¼Œæ‰€ä»¥åœ¨å®šä¹‰*<em>int <em>pBase</em></em> æ—¶ï¼ŒpBaseæ˜¯æŒ‡é’ˆå˜é‡ï¼Œä¹Ÿå°±æ˜¯åœ°å€ï¼ŒåŒæ—¶å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„å</p><p>ğŸ‘‰å…¶å®ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œè¿™ä¸ªç»“æ„ä½“ï¼Œä¸»ä½“éƒ¨åˆ†æ˜¯pBaseï¼Œå…¶ä»–æˆå‘˜æ˜¯è¿™ä¸ªæ•°ç»„çš„ä¸€äº›å±æ€§çš„è¯´æ˜</p><p>ğŸ‘‰ä¸ºäº†æŠŠè¿™äº›å±æ€§å’Œæ•°ç»„ä¸»ä½“è”ç³»èµ·æ¥ï¼Œæäº†ä¸€ä¸ªç»“æ„ä½“æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·</p><h2 id="3-åˆå§‹åŒ–"><a href="#3-åˆå§‹åŒ–" class="headerlink" title="3.åˆå§‹åŒ–"></a>3.åˆå§‹åŒ–</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">initArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">,</span><span class="token keyword">int</span> length<span class="token punctuation">)</span><span class="token comment">//æ­¤æ—¶æŒ‡å‘arrçš„ç¬¬ä¸€ä¸ªåœ°å€ï¼Œç°åœ¨pArrå­˜æ”¾çš„æ˜¯arrç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€ </span><span class="token punctuation">{</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token operator">==</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"åŠ¨æ€å†…å­˜åˆ†é…å¤±è´¥ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>pArr<span class="token operator">-&gt;</span>len<span class="token operator">=</span>length<span class="token punctuation">;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//å‘Šè¯‰ç¨‹åºè¿™ä¸ªå‡½æ•°ç»“æŸäº† </span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‰pBaseæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…ˆç»™ä»–åˆ†é…ç©ºé—´</p><ul><li>å¯¹pBaseå†…å­˜æ˜¯å¦åˆ†é…æˆåŠŸè¦åšä¸€ä¸ªåˆ¤å®š</li><li>åˆ¤å®šæˆåŠŸäº†å°±ç»™ä»–è¿™ä¸ªç»“æ„ä½“èµ‹å€¼</li></ul><h2 id="4-æ‰“å°"><a href="#4-æ‰“å°" class="headerlink" title="4.æ‰“å°"></a>4.æ‰“å°</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">showArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>pArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æ•°ç»„ä¸ºç©ºï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-åˆ¤æ–­æ•°ç»„é‡Œæ˜¯å¦æœ‰å…ƒç´ "><a href="#5-åˆ¤æ–­æ•°ç»„é‡Œæ˜¯å¦æœ‰å…ƒç´ " class="headerlink" title="5.åˆ¤æ–­æ•°ç»„é‡Œæ˜¯å¦æœ‰å…ƒç´ "></a>5.åˆ¤æ–­æ•°ç»„é‡Œæ˜¯å¦æœ‰å…ƒç´ </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-åˆ¤æ–­æ•°ç»„æ˜¯å¦æ˜¯æ»¡çš„"><a href="#6-åˆ¤æ–­æ•°ç»„æ˜¯å¦æ˜¯æ»¡çš„" class="headerlink" title="6.åˆ¤æ–­æ•°ç»„æ˜¯å¦æ˜¯æ»¡çš„"></a>6.åˆ¤æ–­æ•°ç»„æ˜¯å¦æ˜¯æ»¡çš„</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">==</span>pArr<span class="token operator">-&gt;</span>len<span class="token punctuation">)</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-è¿½åŠ å…ƒç´ "><a href="#7-è¿½åŠ å…ƒç´ " class="headerlink" title="7.è¿½åŠ å…ƒç´ "></a>7.è¿½åŠ å…ƒç´ </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">appendArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token comment">//valæ˜¯è¦åŠ å…¥çš„å…ƒç´ </span><span class="token punctuation">{</span><span class="token comment">//æ»¡æ—¶è¿”å›falseï¼Œä¸åŠ </span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span>pArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token comment">//ä¸æ»¡æ—¶è¿½åŠ </span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">]</span><span class="token operator">=</span>val<span class="token punctuation">;</span> <span class="token punctuation">(</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‰cntçš„å€¼=æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡+1</p><p>ğŸ‘‰æœ€åè®°å¾—è¦ç»™æœ‰æ•ˆå€¼+1</p><h2 id="8-æ’å…¥å…ƒç´ "><a href="#8-æ’å…¥å…ƒç´ " class="headerlink" title="8.æ’å…¥å…ƒç´ "></a>8.æ’å…¥å…ƒç´ </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">insertArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span>pArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pos<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">||</span>pos<span class="token operator">&gt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&gt;=</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>val<span class="token punctuation">;</span><span class="token punctuation">(</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ»¡äº†ã€è¾“å…¥çš„ä½ç½®ä¸ç¬¦åˆæ•°ç»„ç°æœ‰çš„â†’è¿”å›é”™è¯¯ï¼Œåœ¨ä¸»ç¨‹åºé‡Œä¸æ‰§è¡Œ</li></ul><p>ğŸ‘‰å¯¹äºforé‡Œçš„</p><ul><li><strong>i=pArr-&gt;cnt-1</strong> iå¯¹åº”ç€ä¸‹æ ‡</li><li><strong>i=pos-1</strong> æ’å…¥æ—¶åªå˜åŠ¨è¦æ’å…¥ä½ç½®çš„è¯¥ä½ä¸Šå’Œè¯¥ä½åçš„å…ƒç´ </li><li><strong>â€“i</strong> è¿›è¡Œæ’å…¥çš„é€»è¾‘æ˜¯ï¼Œå…ˆå¯¹æœ€åä¸€ä½æ“ä½œï¼Œæœ€åä¸€ä½å…ˆå¾€åç§»åŠ¨ï¼Œç„¶åå‰é¢çš„å†å¾€åç§»åŠ¨ï¼Œæœ€åç©ºå‡ºä¸€ä¸ªä½ç½®ç»™è¦æ’å…¥çš„å…ƒç´ æ’å…¥</li></ul><p>ğŸ‘‰ç„¶å</p><ul><li><p>å‰ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°åä¸€ä¸ªå…ƒç´ ä¸Š</p></li><li><p>æ”¾ç½®æ–°å…ƒç´ </p></li><li><p>æœ‰æ•ˆå€¼+1</p></li></ul><h2 id="9-åˆ é™¤å…ƒç´ "><a href="#9-åˆ é™¤å…ƒç´ " class="headerlink" title="9.åˆ é™¤å…ƒç´ "></a>9.åˆ é™¤å…ƒç´ </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">deleteArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">,</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span>pVal<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">;</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>pArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>pos<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">||</span>pos<span class="token operator">&gt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">)</span><span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token operator">*</span>pVal<span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>pos<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">--</span><span class="token punctuation">;</span><span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç©ºçš„ã€è¾“å…¥ä¸ç¬¦åˆæ•°ç»„ç°æœ‰çš„â†’è¿”å›é”™è¯¯ï¼Œå†ä¸»ç¨‹åºä¸­ä¸æ‰§è¡Œ</li></ul><p>æ„Ÿè§‰è·Ÿæ’å…¥ä¸€ä¸ªæ„æ€â€¦.</p><h2 id="10-å…ƒç´ å€’ç½®"><a href="#10-å…ƒç´ å€’ç½®" class="headerlink" title="10.å…ƒç´ å€’ç½®"></a>10.å…ƒç´ å€’ç½®</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">inversionArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span> <span class="token operator">*</span>pArr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> j<span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> t<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>t<span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-å…ƒç´ æ’åº"><a href="#11-å…ƒç´ æ’åº" class="headerlink" title="11.å…ƒç´ æ’åº"></a>11.å…ƒç´ æ’åº</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">sortArr</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Arr</span><span class="token operator">*</span> pArr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>t<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>pArr<span class="token operator">-&gt;</span>cnt<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>t<span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>pArr<span class="token operator">-&gt;</span>pBase<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>t<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åœŸâ€”â€”â€”â€”DS1302æ—¶é’Ÿ</title>
      <link href="/2022/11/12/ru-tu-ds1302-shi-zhong/"/>
      <url>/2022/11/12/ru-tu-ds1302-shi-zhong/</url>
      
        <content type="html"><![CDATA[<p><strong>DS1302</strong></p><h1 id="ä¸€-å¼•è„šåˆ†è£…"><a href="#ä¸€-å¼•è„šåˆ†è£…" class="headerlink" title="ä¸€.å¼•è„šåˆ†è£…"></a>ä¸€.å¼•è„šåˆ†è£…</h1><p>1.DIPç›´æ’</p><p>2.SOè´´ç‰‡</p><p><img src="/../../../../medias/blog_picture/51/59.png"></p><p><img src="/../../../../medias/blog_picture/51/60.png"></p><p>å…¶ä¸­ï¼Œ<strong>CEä¸ºé«˜ç”µå¹³çš„æ—¶å€™ä¸‹é¢çš„å‘½ä»¤(ioå’ŒSCLK)æ‰æœ‰ç”¨ã€‚</strong>æ—¶é—´å­˜å‚¨åœ¨å®æ—¶æ—¶é’Ÿé‡Œï¼Œåœ¨å·¦è¾¹è¢«è®¿é—®å’Œè¯»å†™</p><h1 id="äºŒ-å†…éƒ¨å¯„å­˜å™¨"><a href="#äºŒ-å†…éƒ¨å¯„å­˜å™¨" class="headerlink" title="äºŒ.å†…éƒ¨å¯„å­˜å™¨"></a>äºŒ.å†…éƒ¨å¯„å­˜å™¨</h1><p><img src="/../../../../medias/blog_picture/51/61.png"></p><p>WPæ˜¯è¯»å†™ä¿æŠ¤</p><h1 id="ä¸‰-è€ƒè™‘çš„é—®é¢˜"><a href="#ä¸‰-è€ƒè™‘çš„é—®é¢˜" class="headerlink" title="ä¸‰.è€ƒè™‘çš„é—®é¢˜"></a>ä¸‰.è€ƒè™‘çš„é—®é¢˜</h1><p>åœ¨å“ª(xxå¯„å­˜å™¨) å†™å…¥ ä»€ä¹ˆ</p><p>åœ¨å“ª(xxå¯„å­˜å™¨) è¯»å‡º ä»€ä¹ˆ(1302èŠ¯ç‰‡è¿”å›çš„ï¼Œå•ç‰‡æœºéœ€è¦è¯»åˆ°)</p><p><img src="/../../../../medias/blog_picture/51/62.png"></p><p>ç¬¬å…­ä½ï¼šç»™1â€”â€”RAMï¼Œç»™0â€”â€”CK</p><p>6~1å®Œæˆâ€œåœ¨å“ªâ€çš„ä»»åŠ¡</p><p>ç¬¬é›¶ä½ï¼šå®Œæˆâ€œè¯»/å†™â€çš„ä»»åŠ¡ï¼Œç»™1â€”â€”è¯»ï¼Œç»™0â€”â€”å†™</p><p>åœ¨<strong>äºŒ</strong>çš„è¡¨ä¸­å·²ç»æŠŠâ€œè¯»/å†™â€çš„å‘½ä»¤åˆ—å‡ºæ¥äº†</p><h2 id="1-æ—¶åºå®šä¹‰"><a href="#1-æ—¶åºå®šä¹‰" class="headerlink" title="1.æ—¶åºå®šä¹‰"></a>1.æ—¶åºå®šä¹‰</h2><p><img src="/../../../../medias/blog_picture/51/63.png"></p><p>ä¸Šå‡æ²¿(ioå£çš„ç”µå¹³è¢«)å†™å…¥(/å‘æ—¶é’ŸèŠ¯ç‰‡å†™å…¥æ•°æ®)ï¼Œä¸‹é™æ²¿(DS1302æŠŠä»–çš„æ•°æ®)è¾“å‡º(æ—¶é’ŸèŠ¯ç‰‡å‘å•ç‰‡æœºå†™å…¥æ•°æ®)ï¼Œ<strong>æ‰€ä»¥ï¼Œåªæœ‰READä¸­çš„D0~D7æ˜¯èŠ¯ç‰‡å†™å…¥çš„</strong></p><p>å†™å…¥æ—¶ï¼Œå…ˆå†™å…¥æ•°æ®å†è¿›è¡Œä¸Šå‡æ²¿ã€‚</p><h2 id="2-æ¯ä¸ªæŒ‰é”®çš„åŠŸèƒ½"><a href="#2-æ¯ä¸ªæŒ‰é”®çš„åŠŸèƒ½" class="headerlink" title="2.æ¯ä¸ªæŒ‰é”®çš„åŠŸèƒ½"></a>2.æ¯ä¸ªæŒ‰é”®çš„åŠŸèƒ½</h2><ul><li>K1é€‰æ‹©æ¨¡å¼ MODE=1ğŸ‘‰è®¾ç½®æ—¶é—´ MODE=0ğŸ‘‰æ˜¾ç¤ºæµåŠ¨çš„æ—¶é—´</li><li>K2é€‰æ‹©è¦æ›´æ”¹çš„æ—¶é—´å€¼(å¹´æœˆæ—¥æ—¶åˆ†ç§’)</li><li>K3æ›´æ”¹æŸä¸ªæ—¶é—´å€¼ï¼Œ+</li><li>K4æ›´æ”¹æŸä¸ªæ—¶é—´å€¼ï¼Œ-</li></ul><h1 id="å››-ä»£ç "><a href="#å››-ä»£ç " class="headerlink" title="å››.ä»£ç "></a>å››.ä»£ç </h1><h2 id="DS1302-C"><a href="#DS1302-C" class="headerlink" title="DS1302.C"></a>DS1302.C</h2><p><strong>1.</strong></p><pre class="line-numbers language-C" data-language="C"><code class="language-C">void DS1302_WriteByte(unsigned char Command,Data)//å†™å…¥{unsigned char i;DS1302_CE=1;for(i=0;i&lt;8;i++){DS1302_IO=Command&amp;(0x01&lt;&lt;i);//1~7ä½ç›´æ¥æ¸…é›¶ï¼Œåªç•™ç¬¬0ä½DS1302_SCLK=1;DS1302_SCLK=0;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºæ¯ä¸€ä½ï¼Œå…ˆå†™å…¥æ“ä½œæŒ‡ä»¤å†ç»™ä¸Šå‡æ²¿</p><p><strong>2.</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">DS1302_ReadByte</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Command<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span>Data<span class="token operator">=</span><span class="token number">0x00</span><span class="token punctuation">;</span>Command<span class="token operator">|=</span><span class="token number">0x01</span><span class="token punctuation">;</span><span class="token comment">//å°†æŒ‡ä»¤è½¬æ¢ä¸ºè¯»æŒ‡ä»¤</span>DS1302_CE<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//è¯»å‡º-æŒ‡ä»¤</span><span class="token punctuation">{</span>DS1302_IO<span class="token operator">=</span>Command<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>DS1302_SCLK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>DS1302_SCLK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//è¯»å‡º-æ•°æ®</span><span class="token punctuation">{</span>DS1302_SCLK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//çœ‹æ—¶åºå›¾ï¼Œå…ˆå°‘ä¸€ä¸ªé«˜ç”µå¹³</span>DS1302_SCLK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æœ€åæ˜¯ä½ç”µå¹³</span><span class="token keyword">if</span><span class="token punctuation">(</span>DS1302_IO<span class="token punctuation">)</span><span class="token punctuation">{</span>Data<span class="token operator">|=</span><span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>DS1302_CE<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>DS1302_IO<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//è¯»å–åå°†IOè®¾ç½®ä¸º0ï¼Œå¦åˆ™è¯»å‡ºçš„æ•°æ®ä¼šå‡ºé”™</span><span class="token keyword">return</span> Data<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºä¸ºä»€ä¹ˆè¦return DataXï¼ŒğŸ‘‡æˆ‘çš„ç†è§£</p><ul><li>é¦–å…ˆåœ¨<strong>DS1302_WriteByte</strong>ä¸­å†™å…¥æ•°æ®ï¼Œæ˜¯å¤šå°‘ç§’(0~15)ï¼Œå°±è¾“å…¥0x xxï¼Œç„¶å16è¿›åˆ¶è½¬2è¿›åˆ¶</li><li>åœ¨<strong>DS1302_ReadByte</strong>ä¸­è¯»å–æ•°æ®ï¼Œå¯¹æ¯ä¸€ä½è¿›è¡Œåˆ¤æ–­</li><li>e.g. å†™å…¥æ—¶å†™å…¥äº†0x03â€”16è½¬2â€”&gt;0000 0100ï¼Œç„¶ååœ¨readå‡½æ•°é‡Œå¯¹æ¯ä¸€ä½è¿›è¡Œåˆ¤æ–­ï¼Œæ‰§è¡Œå®Œè¯»å‘½ä»¤å­—åï¼Œæ•°æ®ä¼ è¾“åˆ°IOå£ä¸Šï¼Œæ˜¯1çš„ï¼ŒDataå°±ç½®1ï¼Œå¦åˆ™ç½®0ï¼Œæ‰€ä»¥Dataå°±æ˜¯ä¸ªæ¥æ”¶æ•°æ®çš„ä¸­è½¬ç«™ç½¢äº†ã€‚</li><li>ç„¶åreturnä¹‹åï¼ŒLCDé‚£é‡Œçš„å®šä¹‰æ˜¯<strong>unsigned int Number</strong>åœ¨ä¼ å‚æ—¶ï¼Œå·²ç»è‡ªåŠ¨æŠŠ2è¿›åˆ¶è½¬æ¢ä¸º10è¿›åˆ¶äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºå‡ºæ¥çš„æ•°æ®å°±æ˜¯10è¿›åˆ¶çš„ã€‚</li></ul><p><strong>3.è‡ªåŠ¨æ¸…é›¶</strong></p><p>e.g.å¸Œæœ›è®©aè¶…è¿‡5ä¹‹åæ¸…é›¶ï¼Œä»0å¼€å§‹å†é€’å¢</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;=</span><span class="token operator">=</span><span class="token operator">&gt;</span>a<span class="token operator">=</span><span class="token operator">%</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">//a=6%6=0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>4.</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">3</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">5</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">7</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">8</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">10</span><span class="token operator">||</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">31</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">{</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//12-31è°ƒå›11-xxæ—¶ä¼šæ˜¾ç¤º11-31ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Šè¿™å¥è¯</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºä¸ºä»€ä¹ˆè¦åœ¨K4-è¿™é‡Œå¤åˆ¶ä¸€éƒ¨åˆ†K3+çš„ä»£ç </p><ul><li>ä»12-31è°ƒå›11æœˆä»½æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸º11-31ï¼Œæ‰€ä»¥è¦åŠ ä¸Šé‚£éƒ¨åˆ†ä»£ç </li></ul><p><strong>5.</strong></p><p>æŸä¸ªæ—¶é—´å€¼è¢«é€‰ä¸­åè·³åŠ¨</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>TimeSetSelect<span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>TimeSetFlashFlag<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>DS1302_Time<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®šæ—¶å™¨æ¯éš”500mså¯¹TimeSetFlashFlagç½®1æˆ–0ï¼Œå½“TSFFä¸º1ä¸”æ—¶é—´å€¼é€‰ä¸­çš„æ˜¯0â€“æ—¶ æ—¶ï¼Œåœ¨åŸæœ¬æ˜¾ç¤ºæ—¶çš„æ—¶é—´é‚£ä¸€å—åœ°æ–¹æ˜¾ç¤ºç©ºæ ¼ï¼›å¦‚æœä¸ç¬¦åˆifçš„æ¡ä»¶ï¼Œåˆ™æ˜¾ç¤ºæ—¶é—´ï¼Œæ‰€ä»¥TSFFåœ¨0å’Œ1è·³åŠ¨æ—¶ï¼Œå†³å®šäº†é¢‘é—ªçš„æ˜¾ç¤ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”LCD1602</title>
      <link href="/2022/10/30/ru-men-lcd1602/"/>
      <url>/2022/10/30/ru-men-lcd1602/</url>
      
        <content type="html"><![CDATA[<h1 id="LCD1602-16-2"><a href="#LCD1602-16-2" class="headerlink" title="LCD1602(16*2)"></a>LCD1602(16*2)</h1><h2 id="ä¸€-åŸç†éƒ¨åˆ†"><a href="#ä¸€-åŸç†éƒ¨åˆ†" class="headerlink" title="ä¸€.åŸç†éƒ¨åˆ†"></a>ä¸€.åŸç†éƒ¨åˆ†</h2><h3 id="1-å¼•è„š"><a href="#1-å¼•è„š" class="headerlink" title="1.å¼•è„š"></a>1.å¼•è„š</h3><p>æ˜¾ç¤ºå®¹é‡ï¼š16*2ä¸ªå­—ç¬¦</p><p><img src="/../../../../medias/blog_picture/51/76.png"></p><p>VO(å¯¹æ¯”åº¦)ï¼š<strong>å€¼å¤ªå°</strong>æ˜¾ç¤ºä¼šå¾ˆæµ…ï¼Œ<strong>çœ‹ä¸æ¸…</strong>ï¼Œ<strong>å€¼å¤ªå¤§</strong>æ¯ä¸ªåƒç´ éƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œ<strong>æ— æ³•è¾¨åˆ«</strong>å“ªäº›æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œ<strong>æˆ‘ä»¬ç”¨R1æ¥è°ƒèŠ‚</strong></p><p>D1~D7ï¼š<strong>å¹¶è¡Œä¼ é€æ¨¡å¼</strong>ï¼Œæœ€å¥½æ¥åœ¨<strong>ä¸€ç»„ioå£</strong>ä¸Šï¼ŒD0â€“P0_1ï¼ŒD7â€“P0_7(é«˜ä½å¯¹é«˜ä½ï¼Œä½ä½å¯¹ä½ä½)</p><p>RS(åœ¨å“ªå†™)&amp;RW(å†™ä»€ä¹ˆ)&amp;Eï¼šæ§åˆ¶å¼•è„šï¼Œæ§åˆ¶D1~D7</p><p>Eï¼šä¸Šå‡æ²¿çš„æ—¶å€™æŠŠæ•°æ®ä¼ åˆ°D1~D7ï¼Œä¸‹é™æ²¿çš„æ—¶å€™æ‰§è¡Œå‘½ä»¤</p><h3 id="2-å†…éƒ¨ç»“æ„"><a href="#2-å†…éƒ¨ç»“æ„" class="headerlink" title="2.å†…éƒ¨ç»“æ„"></a>2.å†…éƒ¨ç»“æ„</h3><p><img src="/../../../../medias/blog_picture/51/77.png"></p><p>C(character)G(generater)å­—ç¬¦ç”Ÿæˆ</p><p>CGRAMæ˜¯å¯å†™çš„ï¼Œæ˜¯è‡ªå®šä¹‰å­˜å‚¨æ•°æ®</p><p>CGROMä¸å¯å†™ï¼Œæ—©å·²è§„å®šï¼Œç›¸å½“äºå­—å…¸</p><p>å­—æ¨¡åº“å°±æ˜¯æ®µç è¡¨</p><p>D(data)D(display)æ•°æ®æ˜¾ç¤º</p><p>DDRAMï¼Œç”¨æˆ·å¯å†™ï¼Œå¯¹åº”åˆ°å±å¹•çš„è¯åªä¼šæ˜¾ç¤ºå‰16åˆ—(å‰16åˆ—æ˜ å°„åˆ°å±å¹•ä¸Š)ï¼Œä»ç¬¬17åˆ—å¼€å§‹å¯ä»¥å†™ï¼Œå› ä¸ºå±å¹•ä¸å¤Ÿå¤§æ‰€ä»¥æ˜¾ç¤ºä¸äº†(é—®é¢˜ä¸å¤§)</p><h3 id="3-æ®µç è¡¨"><a href="#3-æ®µç è¡¨" class="headerlink" title="3.æ®µç è¡¨"></a>3.æ®µç è¡¨</h3><p>æˆ‘ä»¬å…ˆè¦æœ‰ä¸€ä¸ªæ®µç è¡¨ï¼Œç„¶åæ‰¾ç´¢å¼•å¯¹åº”å±å¹•é‡Œçš„</p><p><img src="/../../../../medias/blog_picture/51/78.png"></p><p>å¯å†™çš„åªæœ‰å…«ä¸ªï¼Œåœ¨0001 0000-0001 0111</p><p>ä¸å¯å†™e.g.æ¯”å¦‚Aï¼Œå¯¹åº”0100 0001â€“è½¬16è¿›åˆ¶â€“&gt;0x41</p><h3 id="4-æ—¶åºå›¾"><a href="#4-æ—¶åºå›¾" class="headerlink" title="4.æ—¶åºå›¾"></a>4.æ—¶åºå›¾</h3><p><img src="/../../../../medias/blog_picture/51/79.png"></p><p><img src="/../../../../medias/blog_picture/51/80.png"></p><p>æœ€é«˜ä½ä¸º1ä½ç½®ä¸åŒå¯ä»¥åŒºåˆ†ä¸åŒçš„æŒ‡ä»¤</p><ul><li>ç‰¹åˆ«æ˜¯åœ¨DB7ç½®1ç»å¯¹æ˜¯è¦æ“ä½œDDRAM</li></ul><h3 id="5-è®¾ç½®å…‰æ ‡ä½ç½®DDRAM-æ•°æ®æ˜¾ç¤º"><a href="#5-è®¾ç½®å…‰æ ‡ä½ç½®DDRAM-æ•°æ®æ˜¾ç¤º" class="headerlink" title="5.è®¾ç½®å…‰æ ‡ä½ç½®DDRAM(æ•°æ®æ˜¾ç¤º)"></a>5.è®¾ç½®å…‰æ ‡ä½ç½®DDRAM(æ•°æ®æ˜¾ç¤º)</h3><p><img src="/../../../../medias/blog_picture/51/81.png"></p><p>ç¬¬ä¸€è¡Œï¼š<strong>1</strong>000 0000 â€“&gt;0x80</p><p>ç¬¬äºŒè¡Œï¼š<strong>1</strong>100 0000 â€“&gt;0xC0</p><p>ä¸¤ä¸²çš„ç¬¬ä¸€ä¸ª<strong>1</strong>éƒ½ä»£è¡¨è¦è¿›å…¥DDRAMè¿™ä¸ªæŒ‡ä»¤</p><p>å› ä¸ºç¬¬ä¸€è¡Œçš„åœ°å€æ˜¯00æ‰€ä»¥åæ¥000 0000ï¼Œç¬¬äºŒè¡Œçš„åœ°å€æ˜¯40æ‰€ä»¥åæ¥100(äºŒè½¬åå°±æ˜¯4) 0000</p><h2 id="äºŒ-ä»£ç éƒ¨åˆ†"><a href="#äºŒ-ä»£ç éƒ¨åˆ†" class="headerlink" title="äºŒ.ä»£ç éƒ¨åˆ†"></a>äºŒ.ä»£ç éƒ¨åˆ†</h2><h3 id="1-å­å‡½æ•°"><a href="#1-å­å‡½æ•°" class="headerlink" title="1.å­å‡½æ•°"></a>1.å­å‡½æ•°</h3><h4 id="â‘ LCD-WriteCommand"><a href="#â‘ LCD-WriteCommand" class="headerlink" title="â‘ LCD_WriteCommand"></a>â‘ LCD_WriteCommand</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Command<span class="token punctuation">)</span><span class="token punctuation">{</span>LCD_RS<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//0ä¸ºæŒ‡ä»¤</span>LCD_RW<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//0ä¸ºè¾“å…¥</span>LCD_DataPort<span class="token operator">=</span>Command<span class="token punctuation">;</span>LCD_E<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token function">LCD_Delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶ç¼“å¿«é€Ÿä¸Šä¸‹æ‹‰</span>LCD_E<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token function">LCD_Delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶ç¼“å¿«é€Ÿä¸Šä¸‹æ‹‰</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘¡LCD-DataCommand"><a href="#â‘¡LCD-DataCommand" class="headerlink" title="â‘¡LCD_DataCommand"></a>â‘¡LCD_DataCommand</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">LCD_WriteData</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Data<span class="token punctuation">)</span><span class="token punctuation">{</span>LCD_RS<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//0ä¸ºæ•°æ®</span>LCD_RW<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//0ä¸ºè¾“å…¥</span>LCD_DataPort<span class="token operator">=</span>Data<span class="token punctuation">;</span>LCD_E<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token function">LCD_Delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶ç¼“å¿«é€Ÿä¸Šä¸‹æ‹‰</span>LCD_E<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token function">LCD_Delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶ç¼“å¿«é€Ÿä¸Šä¸‹æ‹‰</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘¢LCD-Init"><a href="#â‘¢LCD-Init" class="headerlink" title="â‘¢LCD_Init"></a>â‘¢LCD_Init</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">LCD_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token number">0x38</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å…«ä½æ•°æ®æ¥å£ï¼Œä¸¤è¡Œæ˜¾ç¤ºï¼Œ5x7ç‚¹é˜µå±</span><span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token number">0x0C</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ˜¾ç¤ºå¼€ï¼Œå…‰æ ‡å…³ï¼Œé—ªçƒå…³</span><span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token number">0x06</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ•°æ®è¯»å†™æ“ä½œåï¼Œå…‰æ ‡è‡ªåŠ¨åŠ ä¸€ï¼Œç”»é¢ä¸åŠ¨</span><span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token number">0x01</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ¸…å±</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘£-LCD-ShowChar"><a href="#â‘£-LCD-ShowChar" class="headerlink" title="â‘£.LCD_ShowChar"></a>â‘£.LCD_ShowChar</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">LCD_WriteCommand</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">|</span>Column<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ğŸ‘†ç†è§£ï¼šColumnæ˜¯åˆ—ã€‚åˆ—-1å†å¹¶ä¸Š0x80æ‰è½¬æ¢ä¸ºå¯¹åº”çš„åœ°å€</p><ul><li>e.g. å½“é€‰æ‹©**(1,2)<strong>æ—¶ï¼Œç”±</strong>DDRAM**çš„è¡¨æ ¼æˆ‘ä»¬å¾—çŸ¥è¯¥ä½ç½®çš„åœ°å€æ˜¯01H</li><li>æ­¤æ—¶ä¼ å‚åˆ°Columnçš„æ˜¯2ï¼Œ2-1=1ï¼Œ1â€“10è¿›åˆ¶è½¬2è¿›åˆ¶â€“&gt;0001</li><li>1000 0000|0000 0001=1000 0001</li><li>æŠŠ<code>1</code> <code>000 0001</code>åˆ†æˆä¸¤ä¸ªæ¨¡å—</li><li><code>1</code>æ˜¯æŒ‡è¿›å…¥DDRAMæ¨¡å¼</li><li><code>000 0001</code>å¯¹åº”01Hï¼Œå†™å…¥åˆ°(1,2)ä½ä¸Š</li></ul>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”èœ‚é¸£å™¨</title>
      <link href="/2022/10/18/ru-men-feng-ming-qi/"/>
      <url>/2022/10/18/ru-men-feng-ming-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="èœ‚é¸£å™¨"><a href="#èœ‚é¸£å™¨" class="headerlink" title="èœ‚é¸£å™¨"></a>èœ‚é¸£å™¨</h1><p><img src="/../../../../medias/blog_picture/51/64.png"></p><p>æ— æºèœ‚é¸£å™¨ä¸èƒ½ä¸€ç›´é€šç”µæµï¼Œå®ƒå†…éƒ¨ç½®äº†çº¿åœˆï¼Œè¦ç»™ä»–äº¤æµéœ‡è¡</p><p><img src="/../../../../medias/blog_picture/51/65.png"></p><p>VCCé«˜ç”µå¹³ï¼Œåªæœ‰èœ‚é¸£å™¨æ¥å£å¤„ä¸º0æ‰èƒ½é©±åŠ¨ï¼›ç™½è‰²ä¸‰è§’æ˜¯éé—¨ï¼Œå·¦è¾¹ç»™1/0å³è¾¹å0/1</p><p><img src="/../../../../medias/blog_picture/51/66.png"></p><h2 id="ç»å…¸ä¸Šä»£ç "><a href="#ç»å…¸ä¸Šä»£ç " class="headerlink" title="ç»å…¸ä¸Šä»£ç "></a>ç»å…¸ä¸Šä»£ç </h2><h4 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Key.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Nixie.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Buzzer.h"</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNum<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>KeyNum<span class="token operator">=</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Buzzer_Time</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>KeyNum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Key-c"><a href="#Key-c" class="headerlink" title="Key.c"></a>Key.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token comment">/**  * @brief  è·å–ç‹¬ç«‹æŒ‰é”®é”®ç   * @param  æ—   * @retval æŒ‰ä¸‹æŒ‰é”®çš„é”®ç ï¼ŒèŒƒå›´ï¼š0~4ï¼Œæ— æŒ‰é”®æŒ‰ä¸‹æ—¶è¿”å›å€¼ä¸º0  */</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNumber<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_0<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_0<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> KeyNumber<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Nixie-c"><a href="#Nixie-c" class="headerlink" title="Nixie.c"></a>Nixie.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span><span class="token comment">//åŒ…å«Delayå¤´æ–‡ä»¶</span></span><span class="token comment">//æ•°ç ç®¡æ®µç è¡¨</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> NixieTable<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x5B</span><span class="token punctuation">,</span><span class="token number">0x4F</span><span class="token punctuation">,</span><span class="token number">0x66</span><span class="token punctuation">,</span><span class="token number">0x6D</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x6F</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//æ•°ç ç®¡æ˜¾ç¤ºå­å‡½æ•°</span><span class="token keyword">void</span> <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Location<span class="token punctuation">,</span>Number<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">switch</span><span class="token punctuation">(</span>Location<span class="token punctuation">)</span><span class="token comment">//ä½ç è¾“å‡º</span><span class="token punctuation">{</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>P2_4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P2_2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P0<span class="token operator">=</span>NixieTable<span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//æ®µç è¾“å‡º</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Buzzer-c"><a href="#Buzzer-c" class="headerlink" title="Buzzer.c"></a>Buzzer.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;INTRINS.H&gt;</span></span><span class="token comment">//èœ‚é¸£å™¨ç«¯å£ï¼š</span>sbit Buzzer<span class="token operator">=</span>P2<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">/**  * @brief  èœ‚é¸£å™¨ç§æœ‰å»¶æ—¶å‡½æ•°ï¼Œå»¶æ—¶500ms  * @param  æ—   * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">Buzzer_Delay500us</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//@11.0592MHzï¼Œä¸“é—¨ä¸ºèœ‚é¸£å™¨å†™äº†ä¸€ä¸ª</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">;</span><span class="token function">_nop_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">=</span> <span class="token number">227</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/**  * @brief  èœ‚é¸£å™¨å‘å£°  * @param  msï¼Œå‘å£°çš„æ—¶é•¿  * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">Buzzer_Time</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> ms<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//åŸæ¥çš„Delayæœ€å°æ˜¯1ms(åŠä¸ªå‘¨æœŸ)ï¼Œé‚£ä¹ˆ1ä¸ªå‘¨æœŸæ˜¯2msï¼Œèƒ½è¾¾åˆ°çš„èœ‚é¸£å™¨æœ€å¤§é¢‘ç‡æ˜¯1/2*0.1^3=500Hzï¼Œèœ‚é¸£å™¨æ ‡å‡†æç¤ºéŸ³æ˜¯1000Hz</span><span class="token comment">//æ ¹æ®f=1/Tï¼ŒDelay(æ¨¡å—ï¼Œä¸å»ºè®®ä¿®æ”¹)çš„åº”è¯¥è¦æ›´å°ï¼Œä½†æ˜¯1å·²ç»æ˜¯æœ€å°çš„</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>ms<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//ç”¨forå¾ªç¯æ˜¯ä¸ºäº†è®©èœ‚é¸£å™¨å“çš„ä¹…ä¸€ç‚¹</span>        <span class="token comment">//*2çš„åŸå› ï¼šç°åœ¨çš„msä»£è¡¨500usï¼Œä¸ä¹˜äºŒï¼Œå®ƒåªå“ms/2æ¯«ç§’ï¼Œä¹˜ä»¥äºŒæ‰æ˜¯å“msæ¯«ç§’</span><span class="token punctuation">{</span>Buzzer<span class="token operator">=</span><span class="token operator">!</span>Buzzer<span class="token punctuation">;</span><span class="token comment">//å‘å£°éœ€è¦ç¿»è½¬ä¸¤æ¬¡ioå£</span><span class="token function">Buzzer_Delay500us</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠä¸ªå‘¨æœŸ500usï¼Œä¸€ä¸ªå‘¨æœŸ1000usï¼Œé¢‘ç‡1000Hz=1/1000*0.1^6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Buzzer-h"><a href="#Buzzer-h" class="headerlink" title="Buzzer.h"></a>Buzzer.h</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__Buzzer_H__</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__Buzzer_H__</span></span>sbit Buzzer<span class="token operator">=</span>P2<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Buzzer_Time</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éŸ³ä¹"><a href="#éŸ³ä¹" class="headerlink" title="éŸ³ä¹"></a>éŸ³ä¹</h2><p>éŸ³ç¬¦â€“&gt;é¢‘ç‡(Hz)â€“&gt;å‘¨æœŸ(us)â€“&gt;å‘¨æœŸ/2(us)â€“&gt;å–æ•´â€“&gt;<strong>é‡è£…æ•°å€¼(ç”¨åˆ°å®šæ—¶å™¨)</strong></p><p><strong>å‘¨æœŸ</strong>=1/é¢‘ç‡</p><p><strong>å‘¨æœŸ/2</strong>ï¼šåŠä¸ªå‘¨æœŸç¿»è½¬ä¸€æ¬¡</p><p>å‘¨æœŸ/2-å°æ•°ç‚¹=<strong>å–æ•´</strong></p><p>65535-å–æ•´=<strong>é‡è£…æ•°å€¼</strong></p><h4 id="ç”¨å®šæ—¶å™¨æ“æ§é¢‘ç‡"><a href="#ç”¨å®šæ—¶å™¨æ“æ§é¢‘ç‡" class="headerlink" title="ç”¨å®šæ—¶å™¨æ“æ§é¢‘ç‡"></a>ç”¨å®šæ—¶å™¨æ“æ§é¢‘ç‡</h4><h4 id="main-c-1"><a href="#main-c-1" class="headerlink" title="main.c"></a>main.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Time0.h"</span></span>sbit Buzzer<span class="token operator">=</span>P2<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> FreqTable<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">63628</span><span class="token punctuation">,</span><span class="token number">63731</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//å­˜æ”¾æ¯ä¸ªéŸ³çš„é‡è½½æ•°å€¼</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> FreqSelect<span class="token punctuation">;</span><span class="token comment">//å¯¹äºæ•°ç»„FreqTableä¸­æ¯ä¸ªæ•°æ®å¯¹åº”çš„Index</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Timer0Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>FreqSelect<span class="token operator">++</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœ¨ä¸­æ–­é‡Œæ¯ä¸ª500msè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªéŸ³</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">Timer0_Routine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span><span class="token comment">//å®šæ—¶å™¨åˆå§‹åŒ–æ¯éš”1msè¿›è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥æ¯éš”1msä¸­æ–­ä¸€æ¬¡</span><span class="token punctuation">{</span>TL0 <span class="token operator">=</span> FreqTable<span class="token punctuation">[</span>FreqSelect<span class="token punctuation">]</span><span class="token operator">%</span><span class="token number">256</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> FreqTable<span class="token punctuation">[</span>FreqSelect<span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">256</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span><span class="token comment">//è·Ÿå­å‡½æ•°é‡Œçš„è®¾ç½®ä¸åŒåœ¨äºï¼Œä¹‹åçš„æº¢å‡ºéƒ½æ˜¯è¿™é‡Œç®¡ç†çš„ï¼Œå­å‡½æ•°é‚£åªç®¡ç†ä¸€æ¬¡</span>Buzzer<span class="token operator">=</span><span class="token operator">!</span>Buzzer<span class="token punctuation">;</span> <span class="token comment">//ç›´æ¥ç¿»è½¬ï¼Œä¸€ä¸ªå‘¨æœŸæ˜¯2*1ms(ç¿»è½¬ä¸¤æ¬¡æ‰æ˜¯ä¸€ä¸ªå‘¨æœŸ)ï¼Œé¢‘ç‡=1/2*1*0.1^3=500Hz</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Timer0-c"><a href="#Timer0-c" class="headerlink" title="Timer0.c"></a>Timer0.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token comment">/**  * @brief  å®šæ—¶å™¨0åˆå§‹åŒ–ï¼Œ1ms@11.0592MH  * @param  æ—   * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">Timer0Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token comment">//1æ¯«ç§’@11.0592MHz</span><span class="token punctuation">{</span>TMOD <span class="token operator">&amp;=</span> <span class="token number">0xF0</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼</span>TMOD <span class="token operator">|=</span> <span class="token number">0x01</span><span class="token punctuation">;</span>TL0 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span><span class="token comment">//TH0å’ŒTL0æ— å…³ç´§è¦ï¼Œä»–ä»¬åªå†³å®šç¬¬ä¸€æ¬¡ä¸­æ–­æ—¶é—´ï¼Œå› ä¸ºæº¢å‡ºä¹‹åä»–ä»¬ä¸æ¸…é›¶ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æ”¹ï¼Œåªæ”¹ä¸»å‡½æ•°é‡Œçš„</span>TF0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æ¸…é™¤TF0æ ‡å¿—</span>TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//å®šæ—¶å™¨0å¼€å§‹è®¡æ—¶</span>ET0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">//å…è®¸ä¸­æ–­</span>EA<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>PT0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/*å®šæ—¶å™¨ä¸­æ–­å‡½æ•°æ¨¡æ¿void Timer0_Routine() interrupt 1{static unsigned int T0Count;//ä¸ºäº†ä¸ä¸¢å¤±è¿™ä¸ªæ•°å­—TL0 = 0x66;//è®¾ç½®å®šæ—¶åˆå€¼TH0 = 0xFC;//è®¾ç½®å®šæ—¶åˆå€¼T0Count++;if(T0Count&gt;=1000){T0Count=0;}}*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½â€”â€”â€”â€”Calculator</title>
      <link href="/2022/10/13/xiao-bai-jian-yi-ji-suan-qi/"/>
      <url>/2022/10/13/xiao-bai-jian-yi-ji-suan-qi/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;windows.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h&gt;</span></span><span class="token keyword">int</span> o_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç¬¦å·æ ˆå¤´</span><span class="token keyword">int</span> num_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æ•°å­—æ ˆå¤´ </span><span class="token keyword">char</span> o_s<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//ç¬¦å·æ ˆ </span><span class="token keyword">int</span> num_s<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//æ•°å­—æ ˆ </span><span class="token keyword">int</span> <span class="token function">jop</span><span class="token punctuation">(</span><span class="token keyword">char</span> o<span class="token punctuation">)</span><span class="token comment">//åˆ¤æ–­ç¬¦å·ç­‰çº§ judge_operator_priority</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'('</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'+'</span> <span class="token operator">||</span> o <span class="token operator">==</span> <span class="token char">'-'</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'*'</span> <span class="token operator">||</span> o <span class="token operator">==</span> <span class="token char">'/'</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'^'</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//æ“ä½œç¬¦å‡ºæ ˆ </span><span class="token keyword">void</span> <span class="token function">o_push</span><span class="token punctuation">(</span><span class="token keyword">char</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>o_top<span class="token operator">++</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> o<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//æ“ä½œæ•°å‡ºæ ˆ </span><span class="token keyword">void</span> <span class="token function">num_push</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>num_top<span class="token operator">++</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//è‡ªå®šä¹‰ä¸¤å…ƒè¿ç®—</span><span class="token comment">//è¯´æ˜:operand1å…ˆè¿›åå‡ºï¼Œoperand2åè¿›å…ˆå‡ºï¼Œæ‰€ä»¥è¿ç®—çš„è¡¨è¾¾å¼åº”è¯¥ä¸º&lt;operand1&gt;&lt;oeprator&gt;&lt;operand2&gt; </span><span class="token keyword">int</span> <span class="token function">math</span><span class="token punctuation">(</span><span class="token keyword">int</span> n1<span class="token punctuation">,</span> <span class="token keyword">int</span> n2<span class="token punctuation">,</span> <span class="token keyword">char</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'+'</span><span class="token punctuation">)</span><span class="token keyword">return</span> n1 <span class="token operator">+</span> n2<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'-'</span><span class="token punctuation">)</span><span class="token keyword">return</span> n1 <span class="token operator">-</span> n2<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'*'</span><span class="token punctuation">)</span><span class="token keyword">return</span> n1 <span class="token operator">*</span> n2<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'/'</span> <span class="token operator">&amp;&amp;</span> n2 <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> n1 <span class="token operator">/</span> n2<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'/'</span> <span class="token operator">&amp;&amp;</span> n2 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‡ºé”™ï¼\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token char">'^'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"WBç‰ˆè®¡ç®—å™¨ç”±äºæŠ€æœ¯åŸå› ï¼Œä»…æ”¯æŒä»¥ä¸‹è¿ç®—....\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sleep(1500);</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1.å¸¦æ‹¬å·çš„+-*/è¿ç®—\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sleep(1500);</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"2.è¿›åˆ¶è½¬æ¢è®¡ç®—\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sleep(1500);</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨ï¼Œè¯·ä½ è¾“å…¥â€œ1â€æˆ–â€œ2â€è¿›è¡Œè¿ç®—:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> choice<span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*å½“ç”¨æˆ·è¾“å…¥1æ—¶ï¼Œè¿›å…¥4+1è¿ç®—*/</span><span class="token comment">/*æµ…è°ˆè§„åˆ™ï¼š1.æ“ä½œç¬¦æ ˆæ ˆé¡¶ä¸ºç©º æˆ– æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§&lt;å½“å‰æ“ä½œç¬¦ æ—¶ï¼Œå½“å‰æ“ä½œç¬¦å…¥æ ˆ2.æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§&gt;ç›®å‰æ“ä½œç¬¦ ä¸” æ•°æ®æ ˆè‡³å°‘æœ‰2ä¸ªæ“ä½œæ•° ä¸” æ ˆé¡¶ä¸ä¸º( æ—¶ï¼Œæ ˆé¡¶æ“ä½œç¬¦å‡ºæ ˆ3.whlieå¾ªç¯æ¬¡æ•°æ˜¯&lt;è€Œä¸æ˜¯&lt;= çš„åŸå› :æœ€åå‡ºç°x1(ç”±è¿™ä¸ªwhileå¾ªç¯è®¡ç®—å¾—åˆ°çš„æ•°æ®)o x2(åŸè¡¨è¾¾å¼æœ€åçš„æ“ä½œæ•°)4.æ¯æ¬¡è¿ç®—å(è°ƒç”¨äº†mathå‡½æ•°å)ï¼Œå°†è¯¥æ¬¡è¿ç®—ç»“æœæ”¾å›æ ˆä¸­(è¡¥åˆ°æ ˆé¡¶ä¸‹é¢é‚£ä¸ª)ï¼Œç„¶åå†å£°æ˜æ ˆé¡¶è®¾å…¶ä¸º0ï¼Œè¿›è¡Œæ ˆé¡¶--ï¼Œä½¿æ ˆé¡¶å›åˆ°å«æœ‰æœ‰æ•ˆæ•°æ®é‚£*/</span><span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//è®°å½•ç®—å¼</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please enter the equation(no space):\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token function">gets</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'('</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token char">'0'</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token char">'9'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token char">'0'</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token char">'9'</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>t <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">num_push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//+ -</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'+'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'-'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>num_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> num_top <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> n1 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n2 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">math</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>num_top<span class="token operator">--</span><span class="token punctuation">;</span> o_top<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//* /</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'*'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'/'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> num_top <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> n1 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n2 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">math</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>num_top<span class="token operator">--</span><span class="token punctuation">;</span> o_top<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// ^ </span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'^'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>o_top <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> num_top <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> n1 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n2 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">math</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>num_top<span class="token operator">--</span><span class="token punctuation">;</span> o_top<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">o_push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// )</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">')'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">do</span> <span class="token punctuation">{</span><span class="token keyword">int</span> n1 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n2 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">math</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>num_top<span class="token operator">--</span><span class="token punctuation">;</span> o_top<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">jop</span><span class="token punctuation">(</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> o_top <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> num_top <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>o_top<span class="token operator">--</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//æœ€ååªå‰©ä¸‹ä¸¤ä¸ªæ“ä½œæ•°å’Œä¸€ä¸ªæ“ä½œç¬¦ï¼Œç›´æ¥äºŒå…ƒè¿ç®— </span><span class="token keyword">while</span> <span class="token punctuation">(</span>o_top <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> num_top <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> n1 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n2 <span class="token operator">=</span> num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">math</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>num_s<span class="token punctuation">[</span>num_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>o_s<span class="token punctuation">[</span>o_top<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>num_top<span class="token operator">--</span><span class="token punctuation">;</span> o_top<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> num_s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/*å½“ç”¨æˆ·è¾“å…¥2æ—¶ï¼Œè¿›è¡Œè¿›åˆ¶è½¬æ¢*/</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/**  nè¿›åˆ¶è½¬10è¿›åˆ¶*/</span><span class="token keyword">int</span> pr<span class="token punctuation">;</span><span class="token comment">//previous,å…ˆå‰çš„è¿›åˆ¶ </span><span class="token keyword">int</span> fn<span class="token punctuation">;</span><span class="token comment">//finalï¼Œæœ€åçš„è¿›åˆ¶</span><span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token comment">//ç”¨äºæµ‹é‡é•¿åº¦ </span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">char</span> ch<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å³å°†è¾“å…¥ä¸‰ä¸ªæ•°å­—ï¼Œè¾“å…¥æ¯ä¸ªæ•°å­—åï¼ŒæŒ‰å›è½¦è½¬è·³ä¸‹ä¸€ä¸ªè¾“å…¥å†…å®¹......\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥åŸè¿›åˆ¶ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>pr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥åŸæ•°æ®ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æƒ³è¦è½¬æ¢æˆçš„æ•°æ®çš„è¿›åˆ¶ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>size <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> temp1 <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span>pr<span class="token punctuation">,</span> size <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> temp2 <span class="token operator">=</span> ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">case</span> <span class="token char">'A'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token char">'B'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token char">'C'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token char">'D'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token char">'E'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token char">'F'</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">default</span><span class="token operator">:</span>sum <span class="token operator">+=</span> <span class="token punctuation">(</span>temp2 <span class="token operator">-</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token operator">*</span> temp1<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/**10è¿›åˆ¶è½¬nè¿›åˆ¶*/</span><span class="token keyword">char</span> ans<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span><span class="token comment">//ç­”æ¡ˆå­˜æ”¾ </span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>sum <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>sum <span class="token operator">%</span> fn<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">case</span> <span class="token number">10</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'A'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">11</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'B'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">12</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'C'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">13</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'D'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">14</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'E'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">15</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'F'</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">default</span><span class="token operator">:</span>ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>sum <span class="token operator">%</span> fn<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">48</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>j<span class="token operator">++</span><span class="token punctuation">;</span>sum <span class="token operator">/=</span> fn<span class="token punctuation">;</span><span class="token punctuation">}</span>j<span class="token operator">--</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”ç‚¹é˜µå±</title>
      <link href="/2022/10/12/ru-men-dian-zhen-ping/"/>
      <url>/2022/10/12/ru-men-dian-zhen-ping/</url>
      
        <content type="html"><![CDATA[<h1 id="ç‚¹é˜µå±"><a href="#ç‚¹é˜µå±" class="headerlink" title="ç‚¹é˜µå±"></a>ç‚¹é˜µå±</h1><p>è·Ÿæ•°ç ç®¡åŸç†æœ‰ä¸€äº›ç±»ä¼¼</p><p><img src="/../../../../medias/blog_picture/51/4.png" alt="æ˜¾ç¤ºåŸç†"></p><p><img src="/../../../../medias/blog_picture/51/5.png" alt="è¡Œä¸åˆ—çš„æ§åˆ¶å…³ç³»"></p><p>åœˆèµ·æ¥éƒ¨åˆ†ç”¨æ¥æ§åˆ¶<strong>è¡Œ</strong>æˆ–<strong>åˆ—</strong></p><p><img src="/../../../../medias/blog_picture/51/6.png" alt="å¼€å‘æ¿å¼•è„šå¯¹åº”å…³ç³»"></p><p>åˆ—ç›´æ¥ç»™P0èµ‹å€¼æ¥æ§åˆ¶</p><p>ä½†æ˜¯è¡Œè¦ç”¨åˆ°74HC595</p><p>æå‡ºï¼šè‹¥æ˜¯å•ç‰‡æœºä¸Šåªæœ‰è¿™ä¸ªLEDç‚¹é˜µå±ï¼Œå…¶ä»–éƒ½ä¸è¦ï¼Œå¯ä¸å¯ä»¥æŠŠD1-D7çš„æ¥åœ¨P1å£ä¸Š</p><p>å›ç­”ï¼šä¸è¡Œï¼Œå› ä¸ºå•ç‰‡æœºçš„IOå£æ˜¯å¼±ä¸Šæ‹‰ç‰¹æ€§</p><p>å¼±ä¸Šæ‹‰ï¼šè¾“å‡º**ä½ç”µå¹³(ç›´æ¥æ¥GND)<strong>æ—¶ç”µæµå¯ä»¥å¾ˆå¤§ï¼Œè¾“å‡º</strong>é«˜ç”µå¹³(ç›¸å½“äºæ¥äº†ä¸€ä¸ªç”µé˜»å†æ¥VCC)**æ—¶ç”µæµå¾ˆå°</p><p><img src="/../../../../medias/blog_picture/51/7.png" alt="IOå£">ç”¨åˆ°ä¸‰æç®¡ï¼Œæ¥IOå£å°±å¯ä»¥</p><p>IOå£ä½ç”µå¹³ï¼ŒVCCç›´æ¥é€šåˆ°4é‚£ï¼ŒIOèµ·æ§åˆ¶ä½œç”¨ï¼Œè‡ªå·±å¹²ä¸åŠ¨ä¸å¹²æ´»è€ŒæŒ‡ä½¿åˆ«äººå¹²æ´»</p><p>IOå£ç»™é«˜ç”µå¹³çš„æ—¶å€™å°±ä¼šæˆªæ­¢ï¼Œç›¸å½“äºæ²¡æœ‰æ¥</p><h2 id="IOå£æ‰©å±•"><a href="#IOå£æ‰©å±•" class="headerlink" title="IOå£æ‰©å±•"></a>IOå£æ‰©å±•</h2><h3 id="OE-output-enableè¾“å‡ºä½¿èƒ½"><a href="#OE-output-enableè¾“å‡ºä½¿èƒ½" class="headerlink" title="OE(output enableè¾“å‡ºä½¿èƒ½)"></a>OE(output enableè¾“å‡ºä½¿èƒ½)</h3><p><img src="/../../../../medias/blog_picture/51/8.png" alt="OE"></p><h3 id="å¯„å­˜å™¨æ—¶é’Ÿï¼ŒRCLK-register-clock"><a href="#å¯„å­˜å™¨æ—¶é’Ÿï¼ŒRCLK-register-clock" class="headerlink" title="å¯„å­˜å™¨æ—¶é’Ÿï¼ŒRCLK(register clock)"></a>å¯„å­˜å™¨æ—¶é’Ÿï¼ŒRCLK(register clock)</h3><p>ä¸Šæ–¹æœ‰â€”ï¼Œè¡¨ç¤ºå®ƒè¦æ¥ä½ç”µå¹³ï¼Œæ‰€ä»¥JOEé‚£è¦å’ŒGNDçŸ­æ¥ï¼Œæ‰èƒ½æœ‰è¾“å‡º</p><p><img src="/../../../../medias/blog_picture/51/9.png" alt="RCLK"></p><h3 id="SRCLRä¸²è¡Œæ¸…é›¶ç«¯"><a href="#SRCLRä¸²è¡Œæ¸…é›¶ç«¯" class="headerlink" title="SRCLRä¸²è¡Œæ¸…é›¶ç«¯"></a>SRCLRä¸²è¡Œæ¸…é›¶ç«¯</h3><p>æ¥äº†VCCä»£è¡¨å®ƒä¸æ¸…ç©º</p><p><img src="/../../../../medias/blog_picture/51/10.png" alt="SRCLR"></p><h3 id="SRCLKä¸²è¡Œæ—¶é’Ÿ"><a href="#SRCLKä¸²è¡Œæ—¶é’Ÿ" class="headerlink" title="SRCLKä¸²è¡Œæ—¶é’Ÿ"></a>SRCLKä¸²è¡Œæ—¶é’Ÿ</h3><p>ä¸Šå‡æ²¿æ˜¯PWMæ³¢çš„ä»ä½ç”µå¹³åˆ°é«˜ç”µå¹³çš„ä¸€ç¬é—´</p><p><img src="/../../../../medias/blog_picture/51/11.png" alt="SRCLK"></p><h3 id="SERä¸²è¡Œæ•°æ®"><a href="#SERä¸²è¡Œæ•°æ®" class="headerlink" title="SERä¸²è¡Œæ•°æ®"></a>SERä¸²è¡Œæ•°æ®</h3><p><img src="/../../../../medias/blog_picture/51/12.png" alt="SER"></p><p>ä¸»è¦ç”¨è¿™ä¸‰ä¸ªå¼•è„šæ§åˆ¶å…«ä¸ªè¾“å‡º</p><p><img src="/../../../../medias/blog_picture/51/13.png" alt="ä¸‰ä¸ªå¼•è„šæ§åˆ¶å…«ä¸ªè¾“å‡º"></p><h3 id="ä¸²è¡Œvså¹¶è¡Œ"><a href="#ä¸²è¡Œvså¹¶è¡Œ" class="headerlink" title="ä¸²è¡Œvså¹¶è¡Œ"></a>ä¸²è¡Œvså¹¶è¡Œ</h3><p><img src="/../../../../medias/blog_picture/51/14.png" alt="ä¸²è¡Œæ˜¯è¿™æ ·å­ä¸€ä¸ªä¸€ä¸ªå‡ºå»çš„"></p><p>å¹¶è¡Œæ˜¯ç”¨é‚£å…«ä¸ªè¾“å‡ºç«¯åŒæ—¶è¾“å‡º</p><h3 id="ä¸²è¡Œè¾“å…¥-å¹¶è¡Œè¾“å‡º"><a href="#ä¸²è¡Œè¾“å…¥-å¹¶è¡Œè¾“å‡º" class="headerlink" title="ä¸²è¡Œè¾“å…¥ å¹¶è¡Œè¾“å‡º"></a>ä¸²è¡Œè¾“å…¥ å¹¶è¡Œè¾“å‡º</h3><p>æ¯ä¸Šå‡æ²¿ç§»ä½ï¼Œä»SERè¿›çš„æ•°æ®å°±å‘ä¸‹æ²¿ç§»ä½ï¼ŒSERCLKé«˜ç”µå¹³çš„æ—¶å€™ç§»è¿›ï¼Œæ•°æ®ä¸€ä½ä¸€ä½åœ°å¾€å‰èµ°ï¼Œç­‰æœ‰äº†å…«ä½æ•°æ®ä¹‹ååŒæ—¶æ¬è¿‡å»è¾“å‡ºç¼“å­˜é‚£ï¼Œä¸²è¡Œé‚£é‡Œæ¯è¾“å…¥ä¸€ä½ï¼ŒSERæ¸…é›¶ï¼Œæ•°æ®ä¸‹ç§»</p><p><img src="/../../../../medias/blog_picture/51/15.png" alt="74HC595"></p><p>å½“å¯„å­˜å™¨æ»¡ä½åï¼Œç»™RCLKé«˜ç”µå¹³ï¼ŒæŠŠæ•°æ®æ¬è¿åˆ°è¾“å‡ºç¼“å­˜é‚£</p><h3 id="å¤šç‰‡çº§è”"><a href="#å¤šç‰‡çº§è”" class="headerlink" title="å¤šç‰‡çº§è”"></a>å¤šç‰‡çº§è”<img src="/../../../../medias/blog_picture/51/16.png" alt="å¤šç‰‡çº§è”"></h3><p>åœ¨å¯„å­˜å™¨çš„æ•°æ®ä¼ åˆ°QHâ€™ï¼Œç„¶åå¤šç‰‡çº§è”åˆ°ä¸‹ä¸€ä¸ªSERï¼Œå½“æ‰€æœ‰æ•°æ®å°±ä½äº†ï¼Œæ¥ä¸€ä¸ªä¸Šå‡æ²¿é”å­˜ï¼Œæ‰€æœ‰æ•°æ®éƒ½ç›¸åº”åœ°è¾“å‡ºï¼Œå®ç°äº†IOå£çš„æ‰©å±•ï¼Œä½†æ˜¯é€Ÿç‡ä¼šæœ‰æ‰€å‡æ…¢(æ—¶é—´æ¢æ—¶ç©º)</p><h2 id="sfrå’Œsbitå¯ä½å¯»å€-ä¸å¯ä½å¯»å€"><a href="#sfrå’Œsbitå¯ä½å¯»å€-ä¸å¯ä½å¯»å€" class="headerlink" title="sfrå’Œsbitå¯ä½å¯»å€/ä¸å¯ä½å¯»å€"></a>sfrå’Œsbitå¯ä½å¯»å€/ä¸å¯ä½å¯»å€</h2><p>sfrï¼šç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨å£°æ˜(å£°æ˜å¯„å­˜å™¨åœ°å€)ç›¸å½“äºæŠŠæŸä¸ªå…ƒä»¶çš„æ“ä½œåœ°å€èµ‹ç»™ä¸€ä¸ªè‡ªå®šä¹‰çš„å˜é‡åï¼ŒæŠŠç›¸åº”çš„åç§°å’Œåœ°å€ç»™å£°æ˜å‡ºæ¥ï¼Œæˆ‘ä»¬æ‰èƒ½æ“ä½œé‚£ä¸ªåç§°</p><p>sbitï¼šç‰¹æ®Šä½å£°æ˜(å£°æ˜åœ°å€çš„æŸä¸€ä½)</p><p><img src="/../../../../medias/blog_picture/51/17.png" alt="C51çš„sfrã€sbit"></p><p>å¯ä½å¯»å€å’Œä¸å¯ä½å¯»å€å°±ç±»æ¯”äºCè¯­è¨€çš„æ•°ç»„ï¼Œå¯ä½å¯»å€çš„å°±æ˜¯æ•°ç»„çš„é¦–åœ°å€ï¼Œä¸æ˜¯é¦–åœ°å€çš„å°±ä¸èƒ½ä½å¯»å€</p><h2 id="ä¸Šä»£ç -ç¬‘è„¸"><a href="#ä¸Šä»£ç -ç¬‘è„¸" class="headerlink" title="ä¸Šä»£ç (ç¬‘è„¸)"></a>ä¸Šä»£ç (ç¬‘è„¸)</h2><h3 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token comment">//ç»™IOå£æ”¹å</span>sbit RCK<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">//RCLK,åº”è¯¥æ˜¯èµ‹å€¼çš„æ—¶å€™ç”¨_ï¼Œç»™åœ°å€çš„æ—¶å€™ç”¨^ï¼Œè¿™é‡Œæ˜¯è®©rclkç›´æ¥æ‰¾åˆ°p3_5çš„åœ°å€æ‰€ä»¥ç”¨^</span>sbit SCK<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">//SRCLK</span>sbit SER<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token comment">//SER</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MATRIX_LED_PORT</span> <span class="token expression">P0</span><span class="token comment">//å¦‚æœä»¥åè‡ªå·±ç„Šæ¿å­ç©æ¥å£ä¸å¯¹ï¼Œç›´æ¥æ”¹ä¸Šé¢sbitï¼Œä¸ç”¨å†åœ¨ä¸‹é¢æ”¹äº†</span></span><span class="token comment">/**  * @brief  74HC595å†™å…¥ä¸€ä¸ªå­—èŠ‚  * @param  è¦å†™å…¥çš„å­—èŠ‚  * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">_74JHC595_WriteByte</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Byte<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>SER<span class="token operator">=</span>Byte<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0x80--&gt;1000 0000</span>SCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//ç»™é«˜ç”µå¹³å½¢æˆä¸Šå‡æ²¿ä¼ å…¥æ•°æ®</span>SCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç½®é›¶ä¸ºä¸‹ä¸€æ¬¡ä¼ å…¥åšå‡†å¤‡</span><span class="token punctuation">}</span>RCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//é«˜ç”µå¹³ï¼Œå½¢æˆä¸Šå‡æ²¿é”å­˜</span>RCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç½®é›¶</span><span class="token punctuation">}</span><span class="token comment">/*** @brief  LEDç‚¹é˜µå±æ˜¾ç¤ºä¸€åˆ—æ•°æ®* @param  Column è¦é€‰æ‹©çš„åˆ—ï¼ŒèŒƒå›´0~7ï¼Œ0åœ¨æœ€å·¦è¾¹* @param  Data é€‰æ‹©åˆ—æ˜¾ç¤ºçš„æ•°æ®ï¼Œé«˜ä½åœ¨ä¸Šï¼Œ1ä¸ºäº®ï¼Œ0ä¸ºç­* @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Cloumn<span class="token punctuation">,</span>Data<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">_74JHC595_WriteByte</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¾æ•°æ®</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>Cloumn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä½é€‰ï¼›é€‰æ‹©åˆ—ï¼Œç„¶åæŠŠæ•°æ®0xAAä¼ åˆ°LEDåˆ—ä¸­ï¼›</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶æ—¶</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//ä½æ¸…é›¶ï¼Œä¸‹ä¸€æ­¥æ˜¯æ®µé€‰ï¼Œè¿™æ ·ä¸‹æ¬¡æ®µé€‰å°±ä¸ä¼šä¸²ä½åˆ°ä¸Šä¸€ä¸ªä½é€‰äº†</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>SCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//å› ä¸ºä¸Šç”µé»˜è®¤é«˜ç”µå¹³,å…ˆç½®0ï¼Œæ‰èƒ½ç»™é«˜ç”µå¹³ï¼›éœ€è¦ä¸€ä¸ªä¸Šå‡æ²¿æ‰èƒ½ä¼ å…¥æ•°æ®</span>RCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//åˆå§‹åŒ–ä¸ºä½ç”µå¹³</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0x3C</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0xA9</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0x85</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0x85</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0xA9</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0x3C</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æŠ -ç†-è§£-å¼€æŠ ï¼ï¼ï¼"><a href="#æŠ -ç†-è§£-å¼€æŠ ï¼ï¼ï¼" class="headerlink" title="æŠ  ç† è§£      å¼€æŠ ï¼ï¼ï¼"></a>æŠ  ç† è§£      å¼€æŠ ï¼ï¼ï¼</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>SER<span class="token operator">=</span>Byte<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0x80--&gt;1000 0000</span>SCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//ç»™é«˜ç”µå¹³å½¢æˆä¸Šå‡æ²¿ä¼ å…¥æ•°æ®</span>SCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç½®é›¶ä¸ºä¸‹ä¸€æ¬¡ä¼ å…¥åšå‡†å¤‡</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SERæ˜¯ä¸€ä½è€ŒByteæ˜¯8ä½ï¼Œæ¶‰åŠåˆ°ä½å¯¹é½é—®é¢˜</p><p>ç†è§£ï¼šå‡å¦‚Byteæ˜¯0x55(0101 0101)</p><p>i=0(0x80&gt;&gt;i)=1000 0000</p><p>SER=<strong>0</strong>101 0101 &amp; <strong>1</strong>000 0000 =<strong>0</strong>000 0000â€”â€”-æ ¹æ®é<strong>0</strong>å³1ï¼ŒSERä¸º<strong>0</strong></p><p>i=1(0x80&gt;&gt;i)=0100 0000</p><p>SER=0<strong>1</strong>01 0101 &amp; 0<strong>1</strong>00 0000 =0<strong>1</strong>00 0000â€”â€”-æ ¹æ®é0å³<strong>1</strong>ï¼ŒSERä¸º<strong>1</strong></p><p>.</p><p>.</p><p>.</p><p>i=7(0x80&gt;&gt;i)=0000 0001</p><p>SER=0101 010<strong>1</strong> &amp; 0000 0001 =0000 0001â€”â€”-æ ¹æ®é0å³<strong>1</strong>ï¼ŒSERä¸º<strong>1</strong></p><p><img src="/../../../../medias/blog_picture/51/18.png" alt="æœ€åå˜æˆè¿™æ ·"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">SCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//ç»™é«˜ç”µå¹³å½¢æˆä¸Šå‡æ²¿ä¼ å…¥æ•°æ®</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/19.png" alt="."></p><p>æ®µé€‰ ä½é€‰ <strong>å»¶æ—¶</strong> <strong>ä½æ¸…é›¶</strong> æ®µé€‰ ä½é€‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*** @brief  LEDç‚¹é˜µå±æ˜¾ç¤ºä¸€åˆ—æ•°æ®* @param  Column è¦é€‰æ‹©çš„åˆ—ï¼ŒèŒƒå›´0~7ï¼Œ0åœ¨æœ€å·¦è¾¹* @param  Data é€‰æ‹©åˆ—æ˜¾ç¤ºçš„æ•°æ®ï¼Œé«˜ä½åœ¨ä¸Šï¼Œ1ä¸ºäº®ï¼Œ0ä¸ºç­* @retval æ— */</span><span class="token keyword">void</span> <span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Cloumn<span class="token punctuation">,</span>Data<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">_74JHC595_WriteByte</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¾æ•°æ®</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>Cloumn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä½é€‰ï¼›é€‰æ‹©åˆ—ï¼Œç„¶åæŠŠæ•°æ®0xAAä¼ åˆ°LEDåˆ—ä¸­ï¼›</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶æ—¶</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//ä½æ¸…é›¶ï¼Œä¸‹ä¸€æ­¥æ˜¯æ®µé€‰ï¼Œè¿™æ ·ä¸‹æ¬¡æ®µé€‰å°±ä¸ä¼šä¸²ä½åˆ°ä¸Šä¸€ä¸ªä½é€‰äº†</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">MATRIX_LED_PORT<span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>Cloumn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™é‡Œå–åæ˜¯ä¸ºäº†è®©1è¡¨ç¤ºäº®ï¼Œ0è¡¨ç¤ºç­ï¼ŒåŒæ—¶&gt;&gt;è¡¥ä½è¡¥çš„æ˜¯0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸Šä»£ç -Hello-æ»šå±"><a href="#ä¸Šä»£ç -Hello-æ»šå±" class="headerlink" title="ä¸Šä»£ç (Hello!æ»šå±)"></a>ä¸Šä»£ç (Hello!æ»šå±)</h2><h3 id="main-c-1"><a href="#main-c-1" class="headerlink" title="main.c"></a>main.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MatrixLED.h"</span></span><span class="token comment">//code æŠŠAnimationçš„æ•°æ®æ”¾åœ¨flashé‡Œ(å†…å­˜å¤§)ï¼ŒæŠŠrunçš„ç©ºé—´è…¾å‡ºæ¥åšå…¶ä»–äº‹æƒ…ï¼Œç¼ºç‚¹æ˜¯Animationçš„æ•°æ®ä¸èƒ½å†æ›´æ”¹äº†(åªèƒ½è¯»å–ä¸èƒ½å†™å…¥)</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> code Animation<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token number">0x15</span><span class="token punctuation">,</span><span class="token number">0x15</span><span class="token punctuation">,</span><span class="token number">0x15</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x7E</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x7E</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span>Offset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//offsetåç§»é‡</span><span class="token function">MartrixLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>Animation<span class="token punctuation">[</span>i<span class="token operator">+</span>Offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Count<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//ä¸èƒ½ç”¨Delay,ä¸ç„¶ä¼šå‡ºç°é—ªå±ç°è±¡</span><span class="token keyword">if</span><span class="token punctuation">(</span>Count<span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>Offset<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Offset<span class="token operator">&gt;</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token comment">//å†™è¿™ä¸ªä¸ºäº†ä¸è®©Offsetæº¢å‡ºäº§ç”Ÿä¹±ç </span><span class="token punctuation">{</span>Offset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//ç›¸å½“äºæ‰«äº†10éåç§»å‘ä¸‹ä¸€å¸§</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>â‘ å…ˆè§£é‡Šä¸»å‡½æ•°çš„for</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>Animation<span class="token punctuation">[</span>i<span class="token operator">+</span>Offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ª<strong>MatrixLED_ShowColumn</strong>æ˜¯æ”¾æ•°æ®ï¼Œå®‰æ’æ¯ä¸€åˆ—çš„ï¼Œiè¡¨ç¤ºåˆ—ï¼ŒAnimation[]æ˜¯æ•°ç»„ï¼Œ<strong>i+Offset</strong>æ˜¯è¦æŠŠ<strong>ä¸€å¹•ä¸­çš„å…«åˆ—</strong>éƒ½æ‰“å‡ºæ¥</p><p><strong>â‘¡if</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Count<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//ä¸èƒ½ç”¨Delay,ä¸ç„¶ä¼šå‡ºç°é—ªå±ç°è±¡</span><span class="token keyword">if</span><span class="token punctuation">(</span>Count<span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>Offset<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Offset<span class="token operator">&gt;</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token comment">//å†™è¿™ä¸ªä¸ºäº†ä¸è®©Offsetæº¢å‡ºäº§ç”Ÿä¹±ç </span><span class="token punctuation">{</span>Offset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨Countæ¥è®¡æ—¶ï¼Œå½“Count&gt;10åï¼Œ<strong>Offset++ï¼Œå±å¹•ä¸­çš„ç”»é¢å¼€å§‹å¾€å³ç§»ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€åˆ—ï¼Œ</strong>Offset&gt;40ï¼Œè¿™ä¸ª40=<strong>8*6(å…¨éƒ¨)â€”8(ç¬¬ä¸€å¹•çš„ä¸éœ€è¦ç§»åŠ¨)</strong></p><p><strong>â‘¢æœ‰16ä¸ª0x00</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> code Animation<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®©**Hçš„å·¦è¾¹çš„|<strong>ä»æœ€åä¸€åˆ—å‡ºç°ï¼Œè®©</strong>!**ä»ç¬¬ä¸€åˆ—ç¦»å¼€</p><h3 id="MatrixLED-c-æ˜¯ä¸Šä¸€ä¸ªä¸»å‡½æ•°é‡Œæ‰’æ‹‰ä¸‹æ¥çš„"><a href="#MatrixLED-c-æ˜¯ä¸Šä¸€ä¸ªä¸»å‡½æ•°é‡Œæ‰’æ‹‰ä¸‹æ¥çš„" class="headerlink" title="MatrixLED.c(æ˜¯ä¸Šä¸€ä¸ªä¸»å‡½æ•°é‡Œæ‰’æ‹‰ä¸‹æ¥çš„)"></a>MatrixLED.c(æ˜¯ä¸Šä¸€ä¸ªä¸»å‡½æ•°é‡Œæ‰’æ‹‰ä¸‹æ¥çš„)</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token comment">//ç»™IOå£æ”¹å</span>sbit RCK<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">//RCLK,åº”è¯¥æ˜¯èµ‹å€¼çš„æ—¶å€™ç”¨_ï¼Œç»™åœ°å€çš„æ—¶å€™ç”¨^ï¼Œè¿™é‡Œæ˜¯è®©rclkç›´æ¥æ‰¾åˆ°p3_5çš„åœ°å€æ‰€ä»¥ç”¨^</span>sbit SCK<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">//SRCLK</span>sbit SER<span class="token operator">=</span>P3<span class="token operator">^</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token comment">//SER</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MATRIX_LED_PORT</span> <span class="token expression">P0</span><span class="token comment">//å¦‚æœä»¥åè‡ªå·±ç„Šæ¿å­ç©æ¥å£ä¸å¯¹ï¼Œç›´æ¥æ”¹ä¸Šé¢sbitï¼Œä¸ç”¨å†åœ¨ä¸‹é¢æ”¹äº†</span></span><span class="token comment">/**  * @brief  74HC595å†™å…¥ä¸€ä¸ªå­—èŠ‚  * @param  è¦å†™å…¥çš„å­—èŠ‚  * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">_74JHC595_WriteByte</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Byte<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>SER<span class="token operator">=</span>Byte<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0x80--&gt;1000 0000</span>SCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//ç»™é«˜ç”µå¹³å½¢æˆä¸Šå‡æ²¿ä¼ å…¥æ•°æ®</span>SCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç½®é›¶ä¸ºä¸‹ä¸€æ¬¡ä¼ å…¥åšå‡†å¤‡</span><span class="token punctuation">}</span>RCK<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//é«˜ç”µå¹³ï¼Œå½¢æˆä¸Šå‡æ²¿é”å­˜</span>RCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç½®é›¶</span><span class="token punctuation">}</span><span class="token comment">/**  * @brief  ç‚¹é˜µå±åˆå§‹åŒ–  * @param  æ—   * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">MartrixLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>SCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//å› ä¸ºä¸Šç”µé»˜è®¤é«˜ç”µå¹³,å…ˆç½®0ï¼Œæ‰èƒ½ç»™é«˜ç”µå¹³ï¼›éœ€è¦ä¸€ä¸ªä¸Šå‡æ²¿æ‰èƒ½ä¼ å…¥æ•°æ®</span>RCK<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//åˆå§‹åŒ–ä¸ºä½ç”µå¹³</span><span class="token punctuation">}</span><span class="token comment">/*** @brief  LEDç‚¹é˜µå±æ˜¾ç¤ºä¸€åˆ—æ•°æ®* @param  Column è¦é€‰æ‹©çš„åˆ—ï¼ŒèŒƒå›´0~7ï¼Œ0åœ¨æœ€å·¦è¾¹* @param  Data é€‰æ‹©åˆ—æ˜¾ç¤ºçš„æ•°æ®ï¼Œé«˜ä½åœ¨ä¸Šï¼Œ1ä¸ºäº®ï¼Œ0ä¸ºç­* @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Cloumn<span class="token punctuation">,</span>Data<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">_74JHC595_WriteByte</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¾æ•°æ®</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x80</span><span class="token operator">&gt;&gt;</span>Cloumn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä½é€‰ï¼›é€‰æ‹©åˆ—ï¼Œç„¶åæŠŠæ•°æ®0xAAä¼ åˆ°åˆ—ä¸­ï¼›</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å»¶æ—¶</span>MATRIX_LED_PORT<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//ä½æ¸…é›¶ï¼Œä¸‹ä¸€æ­¥æ˜¯æ®µé€‰ï¼Œè¿™æ ·ä¸‹æ¬¡æ®µé€‰å°±ä¸ä¼šä¸²ä½åˆ°ä¸Šä¸€ä¸ªä½é€‰äº†</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="MatrixLED-h"><a href="#MatrixLED-h" class="headerlink" title="MatrixLED.h"></a>MatrixLED.h</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__MATRIXLED_H__</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__MATRIXLED_H__</span></span><span class="token keyword">void</span> <span class="token function">MatrixLED_ShowColumn</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Cloumn<span class="token punctuation">,</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">MartrixLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åœŸâ€”â€”â€”â€”ä¸²å£é€šä¿¡</title>
      <link href="/2022/10/11/ru-tu-chuan-kou-tong-xin/"/>
      <url>/2022/10/11/ru-tu-chuan-kou-tong-xin/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸²å£é€šä¿¡"><a href="#ä¸²å£é€šä¿¡" class="headerlink" title="ä¸²å£é€šä¿¡"></a>ä¸²å£é€šä¿¡</h1><p><img src="/../../../../medias/blog_picture/51/32.png" alt="ç¡¬ä»¶ç”µè·¯"></p><h3 id="ç”µå¹³æ ‡å‡†"><a href="#ç”µå¹³æ ‡å‡†" class="headerlink" title="ç”µå¹³æ ‡å‡†"></a>ç”µå¹³æ ‡å‡†</h3><p>TTLï¼š+5Vè¡¨ç¤º1ï¼Œ0Vè¡¨ç¤º0</p><p><img src="E:\Users\Wabby\AppData\Roaming\Typora\typora-user-images\1665028662515.png" alt="1665028662515"></p><p>å¼‚æ­¥ï¼šAå‘äº†1sçš„1å’Œ1sçš„0ï¼Œé‚£Bå°±å¯ä»¥è¿ç»­ä¸¤æ¬¡0.5så‘1å’Œä¸¤æ¬¡0.5sçš„0</p><p><img src="/../../../../medias/blog_picture/51/33.png"></p><p><img src="/../../../../medias/blog_picture/51/34.png" alt="ä¸²å£å‚æ•°åŠæ—¶åºå›¾"></p><h3 id="æ£€éªŒä½-9ä½"><a href="#æ£€éªŒä½-9ä½" class="headerlink" title="æ£€éªŒä½(9ä½)"></a>æ£€éªŒä½(9ä½)</h3><p>å¥‡æ ¡éªŒ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//æ”¶ï¼š0000 0011 1</span><span class="token comment">//å‘ï¼š0000 0011 1</span><span class="token comment">//ä½†æ˜¯å¦‚æœæ˜¯0000 1010 1å°±ä¹Ÿä¼šè¡¥1ï¼Œæ’é”™ç‡ä¸é«˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//æ”¶ï¼š1110 0000 0</span><span class="token comment">//å‘ï¼š1100 0000 0</span><span class="token comment">//è¿™æ—¶å°±æ˜¯é”™è¯¯çš„ï¼Œè¯´æ˜æ•°æ®å‡ºäº†é—®é¢˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/35.png" alt="ä¸²å£æ¨¡å¼å›¾"></p><p>ä¸­é—´åœˆèµ·æ¥é‚£å—æ˜¯æ§åˆ¶æ³¢ç‰¹ç‡çš„</p><p>å‘é€å¯„å­˜å™¨ï¼š X=SBUF</p><p>æ¥æ”¶å¯„å­˜å™¨ï¼šSBUF=X</p><h2 id="é€šä¿¡åˆå®ç°"><a href="#é€šä¿¡åˆå®ç°" class="headerlink" title="é€šä¿¡åˆå®ç°"></a>é€šä¿¡åˆå®ç°</h2><p><strong>16ä½å®šæ—¶å™¨/è®¡æ—¶å™¨</strong>å’Œ<strong>8ä½è‡ªåŠ¨é‡è£…è½½</strong>çš„åŒºåˆ«</p><p>å°±æ˜¯åå…­ä½è®°çš„æ•°å¤šï¼Œä½†æ¯æ¬¡éƒ½éœ€è¦è‡ªå·±å†™çš„ä»£ç èµ‹åˆå€¼ï¼Œæµªè´¹æ—¶é—´ã€‚åŒå…«ä½å°±æ˜¯å°†åå…­ä½åˆ†å¼€ï¼Œä¸€ä¸ªè®¡æ•°ï¼Œå¦ä¸€ä¸ªå­˜æ”¾åˆå€¼ï¼Œæ¯æ¬¡è®¡æ•°å®ŒæˆåARä¼šè‡ªåŠ¨å°†å€¼èµ‹ç»™CNTï¼Œä¸ç”¨ä»£ç å¤„ç†ï¼Œæ¯”è¾ƒå¿«ï¼Œä½†åªæœ‰å…«ä½æ‰€ä»¥è®°çš„æ•°å°‘äº†ã€‚</p><h3 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token keyword">void</span> <span class="token function">UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//4800bps@11.0592MHz</span><span class="token punctuation">{</span><span class="token comment">//ä¸²å£éƒ¨åˆ†</span>SCON <span class="token operator">=</span> <span class="token number">0x40</span><span class="token punctuation">;</span><span class="token comment">//8ä½æ•°æ®,å¯å˜æ³¢ç‰¹ç‡</span>PCON <span class="token operator">&amp;=</span> <span class="token number">0x7F</span><span class="token punctuation">;</span><span class="token comment">//å®šæ—¶å™¨1éƒ¨åˆ†ï¼ŒT1æ˜¯ä¸²å£ä¸“ç”¨çš„å®šæ—¶å™¨</span>TMOD <span class="token operator">&amp;=</span> <span class="token number">0x0F</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼</span>TMOD <span class="token operator">|=</span> <span class="token number">0x20</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼</span>TL1 <span class="token operator">=</span> <span class="token number">0xFA</span><span class="token punctuation">;</span><span class="token comment">//è®¾å®šå®šæ—¶åˆå€¼</span>TH1 <span class="token operator">=</span> <span class="token number">0xFA</span><span class="token punctuation">;</span><span class="token comment">//è®¾å®šå®šæ—¶å™¨é‡è£…å€¼</span>ET1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//ç¦æ­¢å®šæ—¶å™¨1ä¸­æ–­</span>TR1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//å¯åŠ¨å®šæ—¶å™¨1</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">UART_SendByte</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Byte<span class="token punctuation">)</span><span class="token punctuation">{</span>SBUF<span class="token operator">=</span>Byte<span class="token punctuation">;</span><span class="token comment">//SBUFå†™å…¥,è¢«èµ‹å€¼</span><span class="token keyword">while</span><span class="token punctuation">(</span>TI<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æœ¬æ¥TI=0ï¼Œä½†æ˜¯åœ¨æ•°æ®ä¼ è¾“å®Œæˆä¹‹åä¸²å£ä¼šè‡ªåŠ¨å°†1èµ‹ç»™TI,å› æ­¤éœ€è¦è½¯ä»¶è¿›è¡Œå¤ä½ã€‚</span>TI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//è½¯ä»¶å¤ä½</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">UART_SendByte</span><span class="token punctuation">(</span><span class="token number">0x11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘ ä¸²å£éƒ¨åˆ†SCON-serial-control-PCON-power-control"><a href="#â‘ ä¸²å£éƒ¨åˆ†SCON-serial-control-PCON-power-control" class="headerlink" title="â‘ ä¸²å£éƒ¨åˆ†SCON(serial control)&amp;PCON(power control)"></a>â‘ ä¸²å£éƒ¨åˆ†SCON(serial control)&amp;PCON(power control)</h4><p><img src="/../../../../medias/blog_picture/51/36.png"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">SCON <span class="token operator">=</span> <span class="token number">0x40</span><span class="token punctuation">;</span><span class="token comment">//8ä½æ•°æ®,å¯å˜æ³¢ç‰¹ç‡</span>PCON <span class="token operator">&amp;=</span> <span class="token number">0x7F</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="SM0-SM1"><a href="#SM0-SM1" class="headerlink" title="SM0&amp;SM1"></a>SM0&amp;SM1</h5><p><img src="/../../../../medias/blog_picture/51/37.png"></p><p><img src="/../../../../medias/blog_picture/51/38.png"></p><p><strong>RENç»™0/1éƒ½å¯ä»¥</strong></p><p><img src="/../../../../medias/blog_picture/51/39.png"></p><p><img src="/../../../../medias/blog_picture/51/40.png"></p><p><strong>SM2ï¼ŒTB8ï¼ŒRB8è·Ÿæ¨¡å¼1æ— å…³ï¼Œç»™0</strong></p><p><img src="/../../../../medias/blog_picture/51/41.png"></p><p>å°±æ˜¯å‘é€ç»“æŸåï¼Œç¡¬ä»¶ç»™T1ç½®1ï¼Œè¡¨ç¤ºå‘é€å®Œäº†ï¼Œç„¶åè¯·æ±‚ä¸­æ–­çš„æ—¶å€™TI=0ï¼Œå¿…é¡»ç”¨è½¯ä»¶å¤ä½æ˜¯æŒ‡è¦äººä¸ºåœ¨è½¯ä»¶ä¸­ä½¿TI=1</p><p><strong>TI=0</strong> â€”å‘é€â€“å®Œæ¯•â€”-ç¡¬ä»¶â€“&gt; <strong>T1=1</strong> â€“è¯·æ±‚ä¸­æ–­â€“&gt; <strong>TI=1</strong> â€“ä¸»æœºå“åº”ä¸­æ–­â€”-è½¯ä»¶å¤ä½&gt; <strong>TI=0</strong></p><p>TIæœ€å¼€å§‹ä¸º0</p><p><img src="/../../../../medias/blog_picture/51/42.png"></p><p>å¯¹RIçš„ç†è§£å’ŒTIä¸€æ ·</p><p><strong>æ‰€ä»¥SCON=0100 0000 â€“&gt; 0x40</strong></p><h4 id="â‘¡PCONï¼Œç”¨æ³¢ç‰¹ç‡è®¡ç®—æå‡ºæ¥çš„"><a href="#â‘¡PCONï¼Œç”¨æ³¢ç‰¹ç‡è®¡ç®—æå‡ºæ¥çš„" class="headerlink" title="â‘¡PCONï¼Œç”¨æ³¢ç‰¹ç‡è®¡ç®—æå‡ºæ¥çš„"></a>â‘¡PCONï¼Œç”¨æ³¢ç‰¹ç‡è®¡ç®—æå‡ºæ¥çš„</h4><h3 id="å®šæ—¶å™¨éƒ¨åˆ†"><a href="#å®šæ—¶å™¨éƒ¨åˆ†" class="headerlink" title="å®šæ—¶å™¨éƒ¨åˆ†"></a>å®šæ—¶å™¨éƒ¨åˆ†</h3><p>è¦æ”¹ä¸ºå®šæ—¶å™¨1</p><p><img src="/../../../../medias/blog_picture/51/43.png"></p><p><img src="/../../../../medias/blog_picture/51/44.png"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">TMOD <span class="token operator">&amp;=</span> <span class="token number">0x0F</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span> <span class="token number">0000</span> <span class="token number">1111</span>TMOD <span class="token operator">|=</span> <span class="token number">0x20</span><span class="token punctuation">;</span>    <span class="token operator">|</span> <span class="token number">0010</span> <span class="token number">0000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å°å°é—®é¢˜"><a href="#å°å°é—®é¢˜" class="headerlink" title="å°å°é—®é¢˜"></a>å°å°é—®é¢˜</h3><p>å½“æˆ‘æŠŠä¸‹é¢è¿™ä¸²</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">UART_SendByte</span><span class="token punctuation">(</span><span class="token number">0x11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ”¹æˆ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_SendByte</span><span class="token punctuation">(</span><span class="token number">0x11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ä¸º0x11æ—¶æ­£å¸¸ä¸”ä¸æ–­è¾“å‡º11ï¼Œå½“ä¸º0x66æ—¶å¼‚å¸¸ä¸”ä¸æ–­è¾“å‡º96ï¼Œæ˜¯å› ä¸ºæ³¢ç‰¹ç‡çš„è¯¯å·®ï¼Œæ­¤æ—¶æˆ‘ä»¬è®©å®ƒç¿»æ…¢ç‚¹å°±å¯ä»¥æ­£å¸¸è¾“å‡ºäº†(è®©ä»–ç¨³å®šç‚¹)</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">UART_SendByte</span><span class="token punctuation">(</span><span class="token number">0x11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®©ä»–æ…¢æ…¢ç¿»</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/45.png" alt="ä¸²å£å’Œä¸­æ–­ç³»ç»Ÿ"></p><p>æˆ‘ä»¬è¦å¯ç”¨ä¸²å£ä¸­æ–­ï¼Œè€Œä¸æ˜¯å®šæ—¶å™¨ä¸­æ–­ï¼Œå®šæ—¶å™¨ä¸­æ–­æ˜¯åˆ°ç‚¹äº†å°±ä¸­æ–­ï¼Œä¸²å£ä¸­æ–­æ˜¯æœ‰æ•°æ®è¿‡æ¥ä¸­æ–­ï¼Œæ‰€ä»¥è¦é…ç½®å®šæ—¶å™¨ä¸ä¸­æ–­å³ET1ç­‰äº0ï¼Œç„¶åå¼€å¯ä¸²å£ä¸­æ–­</p><h2 id="ä¸­æ–­æœåŠ¡å‡½æ•°"><a href="#ä¸­æ–­æœåŠ¡å‡½æ•°" class="headerlink" title="ä¸­æ–­æœåŠ¡å‡½æ•°"></a>ä¸­æ–­æœåŠ¡å‡½æ•°</h2><p>æ¨¡æ¿</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">UART_Rountine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">4</span><span class="token comment">//ä¸­æ–­æœåŠ¡å­å‡½æ•°</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>RI<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>RI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å­</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">UART_Rountine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">4</span><span class="token comment">//ä¸­æ–­æœåŠ¡å­å‡½æ•°</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>RI<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//åŒºåˆ†å‘é€å’Œæ¥æ”¶ï¼Œå‘é€å’Œæ¥æ”¶éƒ½ä¼šè§¦å‘ä¸­æ–­</span> <span class="token comment">//è€Œä¸”äºŒè€…å ç”¨åŒä¸€ä¸ªé€šé“ï¼Œå†™è¿™ä¸ªæ˜¯ä¸ºäº†åˆ¤æ–­ï¼Œç„¶åæŠŠå‘é€å’Œæ¥å—åˆ†å¼€</span><span class="token punctuation">{</span>P2<span class="token operator">=</span><span class="token operator">~</span>SBUF<span class="token punctuation">;</span><span class="token function">UART_SendByte</span><span class="token punctuation">(</span>SBUF<span class="token punctuation">)</span><span class="token punctuation">;</span>RI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç®—æ³¢ç‰¹ç‡"><a href="#ç®—æ³¢ç‰¹ç‡" class="headerlink" title="ç®—æ³¢ç‰¹ç‡"></a>ç®—æ³¢ç‰¹ç‡</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c">TL1 <span class="token operator">=</span> <span class="token number">0xFA</span><span class="token punctuation">;</span><span class="token comment">//è®¾å®šå®šæ—¶åˆå€¼</span>TH1 <span class="token operator">=</span> <span class="token number">0xFA</span><span class="token punctuation">;</span><span class="token comment">//è®¾å®šå®šæ—¶å™¨é‡è£…å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>FAâ€“16è½¬10â€“&gt; 250</p><p>é‚£ä¹ˆä¸€ä¸ªTL1/TH1å¯¹åº”8byteï¼Œä¹Ÿå°±æ˜¯256ï¼Œå®šæ—¶å™¨æ¯éš”256-250=6Âµsæº¢å‡ºä¸€æ¬¡(æ¯è®¡6ä¸ªæ•°å°±æº¢å‡ºä¸€æ¬¡)ï¼Œ11.0529MHzæ™¶æŒ¯å¯¹åº”12Tæ¨¡å¼ä¸‹çš„0.924Âµsè®¡æ•°ä¸€æ¬¡</p><p>æº¢å‡ºçš„é¢‘ç‡=0.924/6=0.154MHz</p><p>0.154MHz/16=0.009625MHz</p><p>0.009625Ã—1000Ã—1000=9625ï¼Ÿ<strong>åº”è¯¥æ˜¯æ¥è¿‘4800çš„æ‰å¯¹</strong>â€¦â€¦â€¦upä¸»ç”¨çš„12MHzæ¥ç®—ï¼Œç®—åˆ°äº†4807</p>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥åœŸâ€”â€”â€”â€”å®šæ—¶å™¨å’Œå®šæ—¶å™¨æ—¶é’Ÿ</title>
      <link href="/2022/10/10/ru-tu-ding-shi-qi-he-ding-shi-qi-shi-zhong/"/>
      <url>/2022/10/10/ru-tu-ding-shi-qi-he-ding-shi-qi-shi-zhong/</url>
      
        <content type="html"><![CDATA[<h1 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="headerlink" title="å®šæ—¶å™¨"></a>å®šæ—¶å™¨</h1><p><img src="/../../../../medias/blog_picture/51/46.png" alt="å®šæ—¶å™¨æ¡†å›¾"></p><p><img src="/../../../../medias/blog_picture/51/47.png"></p><p>æŒ‰è§†é¢‘ä¸­çš„å»ç†è§£ï¼Œupä¸»çš„æ¿å­æ™¶æŒ¯ä¸º12MHzï¼Œå¦‚æœåˆ†é¢‘æ¥äº†Ã·12çš„çº¿è·¯ï¼Œé‚£ä¹ˆä¼ ç»™è®¡æ•°å™¨çš„å°±ä¼šæ˜¯1Âµsè®¡æ•°ä¸€æ¬¡(è®¡ç®—:<strong>1/(12MHz/12)=1/1*10^9s=1Âµs</strong>)</p><p>CTé€‰æ‹©å¼€å…³ï¼šé‚£é‡Œç»™<strong>1</strong>æ˜¯<strong>counterè®¡æ•°å™¨</strong>  ç»™<strong>0</strong>æ˜¯<strong>timerå®šæ—¶å™¨</strong></p><p>GATEé‚£é‡Œï¼šä¸‰è§’æ˜¯å¼‚é—¨(1â€“&gt;0  0â€”&gt;1)ï¼Œç¬¬äºŒä¸ªæ˜¯æˆ–é—¨(åªæœ‰00æƒ…å†µç»™0ï¼Œå…¶ä½™ç»™1)ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸é—¨<strong>è·ŸCçš„å¼‚æˆ–ä¸çš„ä¸æ„æ€å·®ä¸å¤š</strong></p><p><img src="/../../../../medias/blog_picture/51/48.png"></p><h2 id="å®æ“"><a href="#å®æ“" class="headerlink" title="å®æ“"></a>å®æ“</h2><h3 id="1-TMOD-TIME-MODE"><a href="#1-TMOD-TIME-MODE" class="headerlink" title="1.TMOD(TIME_MODE)"></a>1.TMOD(TIME_MODE)</h3><p><img src="/../../../../medias/blog_picture/51/49.png"></p><p>ç”±äºTMODä¸å¯å¯»å€ï¼Œæ‰€ä»¥è¦<strong>æ•´ä½“</strong>è¡¨ç¤º</p><p>(å¯¹äº**(ä¸)å¯å¯»å€<strong>çš„ç†è§£ï¼Œ</strong>å¯å¯»å€<strong>åƒä¹‹å‰çš„ç‚¹LEDç¯ï¼Œç›´æ¥P2=0x01&lt;==&gt;P2_1=1ç„¶åP2_2~8=0ï¼Œ</strong>ä¸å¯å¯»å€**å°±æ˜¯åªèƒ½ä¸€å¨åœ°è¡¨ç¤ºï¼Œå°±åƒP2=0x00è¿™æ ·)</p><p><strong>ç›®çš„</strong>ï¼šæˆ‘ä»¬è¦å®ç°<strong>å®šæ—¶å™¨0</strong>è¿è¡Œä¸”è¿›å…¥<strong>æ¨¡å¼1</strong></p><h4 id="â‘ M0-M1"><a href="#â‘ M0-M1" class="headerlink" title="â‘ M0&amp;M1"></a>â‘ M0&amp;M1</h4><p><img src="/../../../../medias/blog_picture/51/50.png"></p><p>æ‰€ä»¥<strong>M0â€“&gt;1</strong>ï¼Œ<strong>M1â€“&gt;0</strong></p><h4 id="â‘¡C-T"><a href="#â‘¡C-T" class="headerlink" title="â‘¡C/T"></a>â‘¡C/T</h4><p><img src="/../../../../medias/blog_picture/51/51.png"></p><p>å› ä¸ºæ˜¯å®šæ—¶å™¨ <strong>C/Tâ€“&gt;0</strong></p><h4 id="â‘¢GATE"><a href="#â‘¢GATE" class="headerlink" title="â‘¢GATE"></a>â‘¢GATE</h4><p><img src="/../../../../medias/blog_picture/51/52.png"></p><p>è¦è®©TR0å‚ä¸æ§åˆ¶ï¼Œæ‰€ä»¥<strong>GATEâ€“&gt;0</strong></p><p><strong>é™„GATEçš„è¿è¡Œæ¨¡å¼</strong></p><p><img src="/../../../../medias/blog_picture/51/53.png"></p><h4 id="å› æ­¤"><a href="#å› æ­¤" class="headerlink" title="å› æ­¤"></a>å› æ­¤</h4><pre class="line-numbers language-C" data-language="C"><code class="language-C">TMOD=0X01;//0000 0001<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="TMODçš„ä¼˜åŒ–"><a href="#TMODçš„ä¼˜åŒ–" class="headerlink" title="TMODçš„ä¼˜åŒ–"></a>TMODçš„ä¼˜åŒ–</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c">TMOD <span class="token operator">&amp;=</span> <span class="token number">0xF0</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼       0xF0--&gt;1111 0000</span>TMOD <span class="token operator">|=</span> <span class="token number">0x01</span><span class="token punctuation">;</span>      <span class="token comment">//                    0x01--&gt;0000 0001</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç”±äºTMODæ˜¯<strong>åŒæ—¶æ§åˆ¶å®šæ—¶å™¨0å’Œå®šæ—¶å™¨1</strong>ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ§åˆ¶å®šæ—¶å™¨0çš„æ—¶å€™ï¼Œ<strong>ä¸å½±å“åˆ°å¯èƒ½æ­£åœ¨å·¥ä½œçš„å®šæ—¶å™¨1</strong>ï¼Œäºæ˜¯ç”¨åˆ°äº†ä»¥ä¸‹æ“ä½œ</p><p>e.g.</p><p>åŸTMOD=1010 0011â€”æˆ‘ä»¬å¸Œæœ›æŠŠå®ƒè½¬æ¢ä¸ºâ€”&gt;1010 0001</p><p><strong>1stâ€”â€”-1010 0011 &amp; 1111 0000 =1010 0000</strong></p><p><strong>ç†è§£</strong>ï¼š<strong>n &amp; 1 <strong>æ—¶ï¼Œnä¸ºå‡ å°±è¿”å›å‡ (æ­¤æ—¶ä¸å½±å“å®šæ—¶å™¨1)ï¼›</strong>n &amp; 0 <strong>æ—¶ï¼Œå…¨ä¸º0(æœ‰ç‚¹</strong>åˆå§‹åŒ–</strong>å®šæ—¶å™¨0çš„æ„Ÿè§‰)</p><p><strong>2ndâ€”â€”1010 0000 | 0000 0001 =1010 0001</strong></p><p><strong>ç†è§£</strong>ï¼š<strong>n | 0 <strong>æ—¶ï¼Œnä¸ºå‡ å°±è¿”å›å‡ (è¿˜æ˜¯ä¸å½±å“å®šæ—¶å™¨1)ï¼›</strong>0 | n</strong> æ—¶ï¼Œnä¸ºå‡ ä¹Ÿè¿”å›å‡ (næ˜¯äººå·¥å†³å®šçš„ï¼Œè¿™æ—¶å¯ä»¥è‡ªè¡Œæ“æ§å®šæ—¶å™¨0äº†)</p><h3 id="2-TCON"><a href="#2-TCON" class="headerlink" title="2.TCON"></a>2.TCON</h3><p><img src="/../../../../medias/blog_picture/51/54.png"></p><h4 id="â‘ TR0"><a href="#â‘ TR0" class="headerlink" title="â‘ TR0"></a>â‘ TR0</h4><p><img src="/../../../../medias/blog_picture/51/55.png"></p><p><strong>çœæµ</strong>ï¼šGATE=0 &amp;&amp; TR0=1æ—¶å…è®¸T0è®¡æ•°ï¼Œå¼€å§‹å·¥ä½œ</p><pre class="line-numbers language-none"><code class="language-none">TR0=1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¡TF0"><a href="#â‘¡TF0" class="headerlink" title="â‘¡TF0"></a>â‘¡TF0</h4><p><img src="/../../../../medias/blog_picture/51/56.png"></p><p><strong>çœæµ</strong>ï¼šTF0=1æ—¶å°±äº§ç”Ÿä¸­æ–­ï¼Œæ‰€ä»¥è¦=0ï¼Œé˜²æ­¢åˆšé…ç½®å¥½å°±äº§ç”Ÿä¸­æ–­</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">TF0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¢TH0-TL0"><a href="#â‘¢TH0-TL0" class="headerlink" title="â‘¢TH0&amp;TL0"></a>â‘¢TH0&amp;TL0</h4><p><img src="/../../../../medias/blog_picture/51/57.png"></p><p>æ¥è‡ªå¼¹å¹•å¤§ä½¬ï¼šä¸¤ä¸ªå¯„å­˜å™¨TH0ã€TL0ä¸º<strong>äºŒè¿›åˆ¶å…«ä½</strong>(2^8)ï¼Œ<strong>å•ç‹¬</strong>å¯è®¡256æ¬¡ï¼Œ<strong>ä½å…«ä½è®¡æ»¡256æ¬¡åé«˜å…«ä½è¿›1</strong>ï¼Œæ‰€ä»¥<strong>é™¤ä»¥256</strong>å¯å¾—<strong>é«˜å…«ä½</strong>å¾—æ¬¡æ•°ï¼Œ<strong>å–ä½™</strong>å°±æ˜¯<strong>ä½å…«ä½</strong>çš„æ¬¡æ•°ï¼Œåˆå¹¶åœ¨ä¸€èµ·å°±æ˜¯æ‰€èµ‹çš„åˆå§‹å€¼</p><p>æ¥è‡ªUPä¸»ï¼š<strong>123</strong>è¦æ”¾åˆ°ä¸¤ä¸ª<strong>å®¹é‡</strong>ä¸º100çš„ç›’å­é‡Œï¼Œ<strong>é«˜ä½æ¬¡</strong>çš„ç›’å­å­˜å‚¨â€”<strong>123/100=1</strong>ï¼Œ<strong>ä½ä½æ¬¡</strong>çš„ç›’å­å­˜å‚¨â€”<strong>123%100=23</strong>ï¼Œ<strong>åˆå¹¶</strong>ä¹‹åå°±æ˜¯123(åˆå§‹å€¼)</p><p><strong>å¯¹åº”é¡¹ç›®ï¼Œå°±æ˜¯ä¸¤ä¸ªå®¹é‡ä¸º256çš„å°ç›’å­è¦å­˜å‚¨64535è¿™ä¸ªåºç„¶å¤§ç‰©</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">TH0<span class="token operator">=</span><span class="token number">64535</span><span class="token operator">/</span><span class="token number">256</span><span class="token punctuation">;</span><span class="token comment">//highï¼Œæ‹¿å‡ºé«˜å…«ä½</span>TL0<span class="token operator">=</span><span class="token number">64535</span><span class="token operator">%</span><span class="token number">256</span><span class="token punctuation">;</span><span class="token comment">//lowï¼Œæ‹¿å‡ºä½å…«ä½</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="â‘£ET0-EA-PT0"><a href="#â‘£ET0-EA-PT0" class="headerlink" title="â‘£ET0&amp;EA&amp;PT0"></a>â‘£ET0&amp;EA&amp;PT0</h4><p><img src="/../../../../medias/blog_picture/51/58.png"></p><p>æŠŠé€šé“æ‰“é€š</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">ET0=1;EA=1;PT0=0;//è™½ç„¶é»˜è®¤PT0ä¸º0ï¼Œä½†è¿˜æ˜¯è¯´æ˜ä¸€ä¸‹æ¯”è¾ƒå¥½<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3-Time0-c"><a href="#3-Time0-c" class="headerlink" title="3.Time0.c"></a>3.Time0.c</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token comment">/**  * @brief  å®šæ—¶å™¨0åˆå§‹åŒ–ï¼Œ1ms@11.0592MH  * @param  æ—   * @retval æ—   */</span><span class="token keyword">void</span> <span class="token function">Timer0Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token comment">//1æ¯«ç§’@11.0592MHz</span><span class="token punctuation">{</span>TMOD <span class="token operator">&amp;=</span> <span class="token number">0xF0</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼       0xF0--&gt;1111 0000</span>TMOD <span class="token operator">|=</span> <span class="token number">0x01</span><span class="token punctuation">;</span>     <span class="token comment">//                     0x0x--&gt;0000 0001</span>TL0 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>    <span class="token comment">/**    64535/256=252    252--10è¿›åˆ¶è½¬16è¿›åˆ¶--&gt;FC        64535%256=23    23--10è¿›åˆ¶è½¬16è¿›åˆ¶--&gt;17    ä½†æ˜¯æˆ‘ä»¬è¿™ä¸ªæœ‰0.04%çš„åå·®ï¼Œæ‰€ä»¥...é—®é¢˜...åº”è¯¥ä¸å¤§å§...    */</span>TF0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æ¸…é™¤TF0æ ‡å¿—</span>TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//å®šæ—¶å™¨0å¼€å§‹è®¡æ—¶</span>ET0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">//å…è®¸ä¸­æ–­</span>EA<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>PT0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/*å®šæ—¶å™¨ä¸­æ–­å‡½æ•°æ¨¡æ¿void Timer0_Routine() interrupt 1{static unsigned int T0Count;//ä¸ºäº†ä¸ä¸¢å¤±è¿™ä¸ªæ•°å­—TL0 = 0x66;//è®¾ç½®å®šæ—¶åˆå€¼TH0 = 0xFC;//è®¾ç½®å®šæ—¶åˆå€¼T0Count++;if(T0Count&gt;=1000){//è¿™é‡Œè¦å†™å…·ä½“å®ç°ä»€ä¹ˆT0Count=0;}}*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹å®šæ—¶å™¨ä¸­æ–­å‡½æ•°æ¨¡æ¿çš„ç†è§£ï¼š</p><p>é¦–å…ˆï¼Œä¸­æ–­ç¨‹åºæœ¬èº«å¯è§†ä¸ºä¸€ä¸ªwhileå¾ªç¯ï¼Œä¼šä¸€ç›´æ‰§è¡Œè¿™ä¸ªå‡½æ•°</p><p>å…¶æ¬¡ï¼Œå¯¹äºç§’æ•°ï¼Œè¿™ä¸ªè®¡æ—¶å™¨(TH0 TL0)<strong>æœ€é«˜å¯è¾¾åˆ°65535Âµs</strong>ï¼Œæˆ‘ä»¬è®¾ç½®å®šæ—¶åˆå€¼æ—¶ï¼Œç”¨çš„æ˜¯64535ï¼Œå®ƒ<strong>è·ç¦»65535è¿˜æœ‰1000æ‰å³å°†æº¢å‡ºå½’é›¶</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬è®©è®¡æ—¶å™¨è®¡æ—¶1000Âµs(=1ms)ï¼Œ**æ¯è¿‡1msï¼ŒT0Count++**ï¼Œå½“å®ƒåŠ äº†1000æ¬¡ï¼Œæ­¤æ—¶å·²ç»è¿‡å»1000ms(=1s)</p><p>æœ€åï¼Œè¿›å…¥ifæ‰§è¡Œå…·ä½“å®ç°ï¼Œç„¶åæŠŠT0Countå½’é›¶ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡ä¸­æ–­ç¨‹åº(å¾ªç¯)</p><h3 id="4-æ–°å­¦ä¸¤ä¸ªå‡½æ•°"><a href="#4-æ–°å­¦ä¸¤ä¸ªå‡½æ•°" class="headerlink" title="4.æ–°å­¦ä¸¤ä¸ªå‡½æ•°"></a>4.æ–°å­¦ä¸¤ä¸ªå‡½æ•°</h3><p><strong>è¦ç”¨åˆ°#include&lt;INTRINS.H&gt;å¤´æ–‡ä»¶</strong></p><h4 id="crolå‡½æ•°-crorå‡½æ•°-å¤´å°¾éƒ½è¦"><a href="#crolå‡½æ•°-crorå‡½æ•°-å¤´å°¾éƒ½è¦" class="headerlink" title="crolå‡½æ•°&amp;crorå‡½æ•°(..å¤´å°¾éƒ½è¦_.."></a>crolå‡½æ•°&amp;crorå‡½æ•°(..å¤´å°¾éƒ½è¦_..</h4><p>å¾ªç¯ç§»ä½</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token operator">=</span><span class="token number">0x80</span><span class="token punctuation">;</span>a<span class="token operator">=</span><span class="token function">_crol_</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//aä¸º0x01ï¼Œå¾ªç¯å›å»å¼€å¤´äº†</span><span class="token comment">//å¦‚æœæ˜¯&lt;&lt;çš„è¯ï¼Œç§»åˆ°è¾¹ç•Œå°±æº¢å‡ºè¶Šç•Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-æœ€ç»ˆå‘ˆç°"><a href="#5-æœ€ç»ˆå‘ˆç°" class="headerlink" title="5.æœ€ç»ˆå‘ˆç°"></a>5.æœ€ç»ˆå‘ˆç°</h3><h4 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Timer0.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Key.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;INTRINS.H&gt;</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNum<span class="token punctuation">,</span>LEDMode<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>P2<span class="token operator">=</span><span class="token number">0xFE</span><span class="token punctuation">;</span><span class="token comment">//P2æ˜¯LEDæ¨¡å—å™¢ï¼Œä¸€ç«¯æ¥äº†VCCï¼Œé‚£ä¹ˆåªæœ‰ç»™P2_nèµ‹å€¼ä¸º0çš„æ—¶å€™æ‰äº®ï¼Œ0xFEè½¬äºŒè¿›åˆ¶ä¸º1111 1110</span><span class="token function">Timer0Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>KeyNum<span class="token operator">=</span><span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>LEDMode<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span>LEDMode<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//å®šæ—¶å™¨å’Œä¸»ç¨‹åºçš„è€¦åˆæ€§æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ç›´æ¥æ”¾åˆ°ä¸»å‡½æ•°ä½¿ç”¨</span><span class="token keyword">void</span> <span class="token function">Timer0_Routine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span><span class="token punctuation">{</span><span class="token keyword">static</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> T0Count<span class="token punctuation">;</span><span class="token comment">//ä¸ºäº†ä¸ä¸¢å¤±è¿™ä¸ªæ•°å­—</span>TL0 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>T0Count<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>T0Count<span class="token operator">&gt;=</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token comment">//0.5säº®ä¸€æ¬¡</span><span class="token punctuation">{</span>T0Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>P2<span class="token operator">=</span><span class="token function">_crol_</span><span class="token punctuation">(</span>P2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>P2<span class="token operator">=</span><span class="token function">_cror_</span><span class="token punctuation">(</span>P2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é’ˆå¯¹<strong>æµæ°´</strong>æ•ˆæœï¼Œæˆ‘ä»¬æ·»åŠ äº†è¿™äº›</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>T0Count<span class="token operator">&gt;=</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">{</span>T0Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>           P2<span class="token operator">=</span><span class="token function">_crol_</span><span class="token punctuation">(</span>P2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¾€å·¦æµ</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>P2<span class="token operator">=</span><span class="token function">_cror_</span><span class="token punctuation">(</span>P2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¾€å³æµ</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…åˆä¸»å‡½æ•°é£Ÿç”¨</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNum<span class="token punctuation">,</span>LEDMode<span class="token punctuation">;</span> <span class="token comment">//ä¸€å¼€å§‹åˆå§‹åŒ–äº†KeyNumå’ŒLEDModeï¼Œè¿™ä¸¤ä¸ªç©æ„åˆå§‹å€¼éƒ½ä¸º0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é‚£ä¹ˆï¼Œå½“å¼€å…³è¢«æŒ‰ä¸‹çš„æ—¶å€™ï¼Œ<strong>LEDMode==0</strong>ï¼Œå¼€å§‹å¾€å·¦æµï¼Œå¯¹åº”ä¸‹é¢è¿™å¥</p><pre class="line-numbers language-none"><code class="language-none">if(LEDMode==0)           P2=_crol_(P2,1);//å¾€å·¦æµ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åæ¥æ”¶KeyNumï¼Œå½“æˆ‘ä¸æŒ‰P3_1æ—¶ï¼ŒLEDModeå°±ä¸€ç›´ä¸º0ï¼Œä¸€ç›´å¾€å·¦æµ</p><p>æˆ‘æŒ‰ä¸‹P3_1æ—¶ï¼Œé…åˆKey.cé£Ÿç”¨ï¼Œæ­¤æ—¶<strong>è¿”å›KeyNumber=1</strong></p><h4 id="Key-c"><a href="#Key-c" class="headerlink" title="Key.c"></a>Key.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token comment">/**  * @brief  è·å–ç‹¬ç«‹æŒ‰é”®é”®ç   * @param  æ—   * @retval æŒ‰ä¸‹æŒ‰é”®çš„é”®ç ï¼ŒèŒƒå›´ï¼š0~4ï¼Œæ— æŒ‰é”®æŒ‰ä¸‹æ—¶è¿”å›å€¼ä¸º0  */</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNumber<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//ä»‹é‡Œä»‹é‡Œï¼</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_0<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_0<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_2<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_3<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> KeyNumber<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>KeyNum==1</strong>åï¼Œæ‰§è¡Œ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>LEDMode<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span>LEDMode<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ—¶å€™LEDMode++ï¼Œ<strong>LEDMode==1</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>LEDMode<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>P2<span class="token operator">=</span><span class="token function">_cror_</span><span class="token punctuation">(</span>P2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¾€å³æµ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å†æ¬¡æŒ‰ä¸‹P3_1æ—¶ï¼ŒLEDMode++ï¼Œ<strong>LEDMode==2</strong>ï¼Œç„¶åæ‰§è¡Œifè®©LEDModeå½’é›¶</p><h1 id="å®šæ—¶å™¨æ—¶é’Ÿ"><a href="#å®šæ—¶å™¨æ—¶é’Ÿ" class="headerlink" title="å®šæ—¶å™¨æ—¶é’Ÿ"></a>å®šæ—¶å™¨æ—¶é’Ÿ</h1><h3 id="main-c-1"><a href="#main-c-1" class="headerlink" title="main.c"></a>main.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"LCD1602.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Timer0.h"</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Sec<span class="token punctuation">,</span>Min<span class="token punctuation">,</span>Hour<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Timer0Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Clock:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"  :  :"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Hour<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span>Min<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span>Sec<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">Timer0_Routine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span><span class="token punctuation">{</span><span class="token keyword">static</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> T0Count<span class="token punctuation">;</span><span class="token comment">//ä¸ºäº†ä¸ä¸¢å¤±è¿™ä¸ªæ•°å­—</span>TL0 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>TH0 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å®šæ—¶åˆå€¼</span>T0Count<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>T0Count<span class="token operator">&gt;=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>T0Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>Sec<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Sec<span class="token operator">&gt;=</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Sec<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>Min<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Min<span class="token operator">&gt;=</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Min <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>Hour<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>Hour<span class="token operator">&gt;=</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Hour<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªï¼Œä¸éš¾ç†è§£ï¼Œdddd</p>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”çŸ©é˜µé”®ç›˜</title>
      <link href="/2022/10/10/ru-men-ju-zhen-jian-pan/"/>
      <url>/2022/10/10/ru-men-ju-zhen-jian-pan/</url>
      
        <content type="html"><![CDATA[<h1 id="6-1çŸ©é˜µé”®ç›˜"><a href="#6-1çŸ©é˜µé”®ç›˜" class="headerlink" title="6-1çŸ©é˜µé”®ç›˜"></a>6-1çŸ©é˜µé”®ç›˜</h1><p><img src="/../../../../medias/blog_picture/51/20.png" alt="çŸ©é˜µæŒ‰é”®"></p><p><img src="/../../../../medias/blog_picture/51/21.png" alt="èŠ¯ç‰‡å¼•è„š"></p><p>å‰å››æ ¹çº¿(P17~P14)åˆ¤æ–­è¡Œï¼Œç»™0ç›¸å½“äºæ¥åœ°**(ç”±ä¸Šé¢è¿™å¹…å›¾æˆ‘ä»¬çŸ¥é“P1çš„ä¸€ç«¯å·²ç»æ¥åœ¨äº†VCCï¼Œæ‰€ä»¥è¦è®©P1_xè¿è¡Œï¼Œè¦ç»™å®ƒä½ç”µå¹³ï¼Œå³0)**ï¼Œæ­¤æ—¶ioå£ä¸ºä½ç”µå¹³</p><p>åå››æ ¹(P13~P10)åˆ¤æ–­è¯¥è¡Œå¯¹åº”çš„æŸä¸€ä¸ªæŒ‰é”®</p><h2 id="ä¸‹é¢çš„ä»£ç ä¸»è¦æ˜¯å®ç°æ§åˆ¶çŸ©é˜µé”®ç›˜ï¼Œå¹¶æŠŠæŒ‰ä¸‹å»çš„é”®ä½å¯¹åº”çš„æ•°å­—åœ¨LCD1602ä¸Šæ˜¾ç¤ºå‡ºæ¥"><a href="#ä¸‹é¢çš„ä»£ç ä¸»è¦æ˜¯å®ç°æ§åˆ¶çŸ©é˜µé”®ç›˜ï¼Œå¹¶æŠŠæŒ‰ä¸‹å»çš„é”®ä½å¯¹åº”çš„æ•°å­—åœ¨LCD1602ä¸Šæ˜¾ç¤ºå‡ºæ¥" class="headerlink" title="ä¸‹é¢çš„ä»£ç ä¸»è¦æ˜¯å®ç°æ§åˆ¶çŸ©é˜µé”®ç›˜ï¼Œå¹¶æŠŠæŒ‰ä¸‹å»çš„é”®ä½å¯¹åº”çš„æ•°å­—åœ¨LCD1602ä¸Šæ˜¾ç¤ºå‡ºæ¥"></a>ä¸‹é¢çš„ä»£ç ä¸»è¦æ˜¯å®ç°æ§åˆ¶çŸ©é˜µé”®ç›˜ï¼Œå¹¶æŠŠæŒ‰ä¸‹å»çš„é”®ä½å¯¹åº”çš„æ•°å­—åœ¨LCD1602ä¸Šæ˜¾ç¤ºå‡ºæ¥</h2><p>ps:å¸¸è§çš„Delayå°±ä¸æ”¾å‡ºæ¥äº†ï¼Œæ‡‚å¾—éƒ½æ‡‚</p><p>matrixçŸ©é˜µ</p><h3 id="MatrixKey-h"><a href="#MatrixKey-h" class="headerlink" title="MatrixKey.h"></a>MatrixKey.h</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__MATRIXKEY_H__</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__MATRIXKEY_H__</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">MatrixKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="MatrixKey-c"><a href="#MatrixKey-c" class="headerlink" title="MatrixKey.c"></a>MatrixKey.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">MatrixKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNumber<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>P1<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//æœ‰ç‚¹ç›¸å½“äºåˆå§‹åŒ–</span>P1_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P1<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span>P1_2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P1<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span>P1_1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P1<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span>P1_0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> KeyNumber<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°è¿™ä¸ªå‡½æ•°ä»£ç æ˜¯ç”±<strong>å››ç»„æ¨¡æ¿ä¸€æ ·</strong>çš„å°ä»£ç ç»„æˆçš„ï¼Œä¸‹é¢å°†æ‹ä¸€ç»„å‡ºæ¥è§£é‡Š</p><p><img src="/../../../../medias/blog_picture/51/22.png" alt="çŸ©é˜µæŒ‰é”®"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">P1<span class="token operator">=</span><span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//è®©æ‰€æœ‰çš„P1å£éƒ½ä¸º1ï¼Œå°±æ˜¯ä¸å¯¹ä»–ä»¬è¿›è¡Œæ“ä½œï¼Œè®©ä»–ä»¬å¤„äºstandbyçŠ¶æ€</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">P1_3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//"å”¤é†’"åˆ—ï¼Œæˆ‘ä»¬å…ˆæ§åˆ¶P1_3,è®©ä»–ä¸º0ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€--â‘ </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//ç„¶åé€ä¸ªåˆ¤æ–­ç”¨æˆ·æŒ‰ä¸‹äº†å“ªä¸ªé”®ä½+æŒ‰é”®æ¶ˆæŠ–ï¼Œæ£€æµ‹æ¾æ‰‹ï¼Œèµ‹ç›¸åº”çš„å€¼ç»™KeyNumber</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_7<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//--â‘¡</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_6<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//--â‘¢</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//--â‘£</span><span class="token keyword">if</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P1_4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>KeyNumber<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//--â‘¤</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"LCD1602.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MatrixKey.h"</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNum<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment">//åˆå§‹åŒ–</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Martix:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä»ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—å¼€å§‹è¾“å…¥</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>KeyNum<span class="token operator">=</span><span class="token function">MatrixKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æŠŠè¿”å›çš„KeyNumberèµ‹å€¼ç»™KeyNum</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>KeyNum<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æˆ‘ä»¬è¦åœ¨è¿™å¥è¯ä¸­æ‰èƒ½è®©ç¯äº®èµ·æ¥ï¼Œå…³é”®åœ¨äºè®©KeyNumä¸º0çš„æ—¶å€™æ ¹æœ¬è¯»ä¸åˆ°è¿™å¥è¯</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>**å¯¹äºifçš„è§£é‡Š       iiiiiiimportant!!!!!!    **</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>KeyNum<span class="token operator">=</span><span class="token function">MatrixKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æŠŠè¿”å›çš„KeyNumberèµ‹å€¼ç»™KeyNum</span>     <span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>KeyNum<span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹å¦‚æœæ²¡æœ‰<strong>if</strong>ï¼Œå…ˆè¿›å…¥<strong>while(1)<strong>å¾ªç¯ä¸­ï¼Œé‚£ä¹ˆå½“ç”¨æˆ·</strong>æŒ‰ä¸‹S1</strong>çš„æ—¶å€™ï¼Œ<strong>Matrixå‡½æ•°</strong>è¿”å›<strong>KeyNumber</strong>çš„å€¼ç»™ä¸»å‡½æ•°çš„<strong>KeyNum</strong>ï¼Œæ­¤æ—¶<strong>KeyNumä¸º1</strong>ï¼ŒLCD1602<strong>è¿…é€Ÿåœ°æ˜¾ç¤ºâ€œ1â€</strong>(å¾ˆå¿«å•Šï¼è‚‰çœ¼æ ¹æœ¬çœ‹ä¸è§çš„é‚£ç§)ï¼Œéšå³<strong>è·³å‡ºæ­¤æ¬¡çš„while(1)å¾ªç¯å¹¶è¿›å…¥ä¸‹ä¸€æ¬¡while(1)å¾ªç¯</strong>ï¼Œå› ä¸ºä¸‹ä¸€åˆ»ç”¨æˆ·ä¸å¯èƒ½é€Ÿé€ŸæŒ‰ä¸‹æŸä¸ªé”®ä½ï¼Œæ‰€ä»¥è¿™æ—¶å€™<strong>Matrixå‡½æ•°</strong>ä¸­åˆå§‹åŒ–çš„é‚£å¥</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNumber<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°±ä¼šç›´æ¥è¢«è¿”å›åˆ°ä¸»å‡½æ•°çš„<strong>KeyNum</strong>ä¸­ï¼Œå³<strong>KeyNumä¸º0</strong>ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç°è±¡æ˜¯ï¼Œæ— è®ºæ€ä¹ˆæŒ‰éƒ½åªä¼šæ˜¾ç¤º0ï¼Œå…¶å®æœ‰æ˜¾ç¤ºè¿‡1çš„ï¼Œä½†æ˜¯å¤ªå¿«äº†ï¼Œçœ‹ä¸è§ã€‚</p><p>â€‹é‚£ä¹ˆï¼Œæˆ‘ä»¬åŠ äº†**if(KeyNum)**åï¼Œå½“é»˜è®¤ä¸º0çš„æ—¶å€™ï¼Œifåˆ¤æ–­ä¸ºå‡ï¼Œå°±ä¸ä¼šå‡ºç°0ï¼Œå› ä¸ºä¸º0çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ä¼šè¿›å…¥åˆ°LCD_ShowNumä¸­æ‰§è¡Œï¼Œæ‰€ä»¥ä¸€ç›´æ˜¾ç¤ºçš„æ˜¯æŒ‰ä¸‹å»çš„é”®ä½çš„è¾£ä¸ªæ•°å­—ã€‚</p><h2 id="å¼ºè¿«ç—‡-ä¸“ä¸šæ³¨é‡Š"><a href="#å¼ºè¿«ç—‡-ä¸“ä¸šæ³¨é‡Š" class="headerlink" title="å¼ºè¿«ç—‡+ä¸“ä¸šæ³¨é‡Š"></a>å¼ºè¿«ç—‡+ä¸“ä¸šæ³¨é‡Š</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/**  * @brief  ç®€ä»‹  * @param  å‚æ•°1  * @param  å‚æ•°2  * @param  å‚æ•°n  * @retval è¿”å›å€¼  */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="6-2-çŸ©é˜µé”®ç›˜å¯†ç é”"><a href="#6-2-çŸ©é˜µé”®ç›˜å¯†ç é”" class="headerlink" title="6-2 çŸ©é˜µé”®ç›˜å¯†ç é”"></a>6-2 çŸ©é˜µé”®ç›˜å¯†ç é”</h1><p><strong>ä»¥ä¸‹ä»£ç æ˜¯åœ¨6-1çš„åŸºç¡€ä¸Šä¿®æ”¹çš„</strong>ï¼Œæ‰€ä»¥ä¸å†æ”¾å‡ºMatrixå‡½æ•°ï¼Œç›´æ¥ä¸Šmain.c</p><p>ps:æ³¨é‡Šä¸ä¼šæ”¹ä¸­æ–‡å“ˆå“ˆå“ˆæ‰“å‡ºæ¥å…¨æ˜¯â€?â€ï¼Œå› æ­¤ä»¥åçš„<strong>æ³¨é‡Š</strong>éƒ½æ˜¯<strong>å…¨(å¡‘æ–™/å·¥åœ°)è‹±åˆ¶</strong></p><h2 id="main-c-1"><a href="#main-c-1" class="headerlink" title="main.c"></a>main.c</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"LCD1602.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MatrixKey.h"</span></span><span class="token comment">//åˆå§‹å®šä¹‰æœªèµ‹åˆå€¼æ—¶é»˜è®¤èµ‹å€¼ä¸º0</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> KeyNum<span class="token punctuation">;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> Password<span class="token punctuation">,</span>Count<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">LCD_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Password:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>KeyNum<span class="token operator">=</span><span class="token function">MatrixKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">//if S1~S10keys are pressed ,input password</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>Count<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//if the time of inout &lt; 4 </span><span class="token punctuation">{</span>Password<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//password RL </span>Password<span class="token operator">+=</span>KeyNum<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//consider the situation of when user press s10 then output 0 ,and get one password</span>Count<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">//metering +1</span><span class="token punctuation">}</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//when finishe the enter,updata the display</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">==</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token comment">//if press S11---&gt;confirm</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>Password<span class="token operator">==</span><span class="token number">2345</span><span class="token punctuation">)</span>  <span class="token comment">//if the password == the correct password</span><span class="token punctuation">{</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">"OK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display0</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token function">LCD_ShowSrting</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">"ERR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token comment">//if press S12---&gt; cancel</span><span class="token punctuation">{</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä¸€èŠ‚ä¸€èŠ‚åœ°çœ‹ï¼Œä»¥ä¸‹ä»ç”¨æˆ·æŒ‰ä¸‹æŸä¸ªé”®ä½å¼€å§‹ï¼Œå³ä»**if(KeyNum)**å¼€å§‹å¾€ä¸‹çœ‹</p><h3 id="è¾“å…¥Password"><a href="#è¾“å…¥Password" class="headerlink" title="è¾“å…¥Password"></a>è¾“å…¥Password</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">//if S1~S10keys are pressed ,input password</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>Count<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//if the time of inout &lt; 4 </span><span class="token punctuation">{</span>Password<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//password RL </span>Password<span class="token operator">+=</span>KeyNum<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//consider the situation of when user press s10 then ouput 0 ,and get one password</span>Count<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">//metering +1</span><span class="token punctuation">}</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„è®¾å®šæ˜¯ï¼Œ<strong>æŒ‰ä¸‹S1~S10æ—¶</strong>ï¼Œå¯¹åº”1~0ï¼Œè¿™é‡Œç”¨åˆ°çš„å¾ˆå¦™çš„ä¸€æ‹›æ˜¯</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Password<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">;</span>Password<span class="token operator">+=</span>KeyNum<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Passwordè‡ªÃ—10ï¼Œåˆ™ç›¸å½“äº<strong>æ‰€æœ‰æ•°å­—å¾€å·¦ç§»åŠ¨ä¸€ä½</strong>ï¼Œ<strong>å¾…è¾“å…¥çš„æ•°å­—ç”±0å æ®</strong></p><p>å†è¾“å…¥çš„æ•°å­—<strong>ä¸€å®šæ˜¯ä»ä¸ªä½å¼€å§‹</strong>ï¼Œç„¶ååœ¨æŒ‰ä¸‹ä¸‹ä¸€ä¸ªæŒ‰é”®æ—¶ï¼Œå¾€å·¦ç§»åŠ¨ï¼Œå°±ï¼Œ<strong>å¾ˆå¦™å•Šï¼</strong></p><p>ç„¶åå†è®¾å®šåªèƒ½è¾“å…¥4æ¬¡ï¼Œå™¢å¯¹äº†ï¼Œæˆ‘ä»¬<strong>åœ¨ä¸€å¼€å§‹è®¾ç½®äº†å…¨å±€å˜é‡</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">unsigned</span> <span class="token keyword">int</span> Password<span class="token punctuation">,</span>Count<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰€ä»¥Passwordå’ŒCount<strong>åˆå§‹å€¼éƒ½æ˜¯0</strong>ï¼Œå› æ­¤<strong>Count&lt;4</strong>å³<strong>è¾“å…¥å››æ¬¡</strong></p><h3 id="ç¡®è®¤é”®"><a href="#ç¡®è®¤é”®" class="headerlink" title="ç¡®è®¤é”®"></a>ç¡®è®¤é”®</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">==</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token comment">//if press S11---&gt;confirm</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>Password<span class="token operator">==</span><span class="token number">2345</span><span class="token punctuation">)</span>  <span class="token comment">//if the password == the correct password</span><span class="token punctuation">{</span><span class="token function">LCD_ShowString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">"OK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token function">LCD_ShowSrting</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">"ERR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆï¼Œæˆ‘ä»¬<strong>çº¦å®šäº†2345æ˜¯æ­£ç¡®å¯†ç </strong>ï¼Œå½“è¾“å…¥äº†2345æ—¶æŒ‰ä¸‹S11ä¼š<strong>å‡ºç°â€OKâ€</strong></p><p>ç„¶åï¼Œå°±æ˜¯è¾“å…¥å®Œæ¯•å<strong>ä¸€åˆ‡å½’é›¶</strong>ï¼Œå³è®©ç”¨æˆ·<strong>å†æ¬¡è¾“å…¥(æ— è®ºè¾“å…¥æ­£ç¡®ä¸å¦)</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…ˆè®©Passwordé‡ç½®ä¸º0</p><p>ç„¶åè®¡æ•°Countä¹Ÿä¸º0</p><p>ä¸€åˆ‡éƒ½å›åˆ°æœ€å¼€å§‹çš„æ ·å­ï¼Œå³å…¨å±€å˜é‡åˆå§‹åŒ–çš„æ ·å­</p><h3 id="å–æ¶ˆé”®"><a href="#å–æ¶ˆé”®" class="headerlink" title="å–æ¶ˆé”®"></a>å–æ¶ˆé”®</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>KeyNum<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token comment">//if press S12---&gt; cancel</span><span class="token punctuation">{</span>Password<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//the password zero clearing</span>Count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//metering zero clearing</span><span class="token function">LCD_ShowNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>Password<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//updata the display</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰äº†ä¸Šé¢çš„è§£é‡Šï¼Œè¿™ä¸ªåº”è¯¥ä¸éš¾ç†è§£å§</p><h1 id="å…³äºLCD1602-c"><a href="#å…³äºLCD1602-c" class="headerlink" title="å…³äºLCD1602.c"></a>å…³äºLCD1602.c</h1><p><img src="/../../../../medias/blog_picture/51/23.png" alt="LCD1602å†…éƒ¨æ˜¾ç¤ºåœ°å€"></p><p><img src="/../../../../medias/blog_picture/51/24.png" alt="ä¸¾ä¾‹è¯´æ˜"></p>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”æ¨¡å—åŒ–ç¼–ç¨‹</title>
      <link href="/2022/10/02/ru-men-mo-kuai-hua-bian-cheng/"/>
      <url>/2022/10/02/ru-men-mo-kuai-hua-bian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="5-1æ¨¡å—åŒ–ç¼–ç¨‹"><a href="#5-1æ¨¡å—åŒ–ç¼–ç¨‹" class="headerlink" title="5-1æ¨¡å—åŒ–ç¼–ç¨‹"></a>5-1æ¨¡å—åŒ–ç¼–ç¨‹</h1><p><img src="/../../../../medias/blog_picture/51/1.png" alt="æ¨¡å—åŒ–ç¼–ç¨‹æ¡†å›¾"></p><p><img src="/../../../../medias/blog_picture/51/2.png" alt="æ¨¡å—åŒ–ç¼–ç¨‹æ³¨æ„äº‹é¡¹"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Delayå‡½æ•°çš„å£°æ˜å°±åœ¨ç¬¬ä¸€è¡Œé‚£</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/3.png" alt="Cé¢„ç¼–è¯‘"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_DELAY_H_</span><span class="token comment">//å¦‚æœæ²¡æœ‰å®šä¹‰å°±æ‰§è¡Œç¼–è¯‘(ç¬¬ä¸€æ¬¡æ²¡æœ‰å®šä¹‰æ‰å‚ä¸ç¼–è¯‘å®šä¹‰)é˜²æ­¢å¤šæ¬¡ç¼–è¯‘</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_DELAY_H_</span></span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ä¾‹æ“ä½œ"><a href="#å®ä¾‹æ“ä½œ" class="headerlink" title="å®ä¾‹æ“ä½œ"></a>å®ä¾‹æ“ä½œ</h2><h3 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token comment">//è°ƒç”¨å‡½æ•°</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Nixie.h"</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Delay-c"><a href="#Delay-c" class="headerlink" title="Delay.c"></a>Delay.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>xms<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Delay-h"><a href="#Delay-h" class="headerlink" title="Delay.h"></a>Delay.h</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__DELAY_H__</span><span class="token comment">//å¦‚æœæ²¡æœ‰å®šä¹‰è¿‡è¿™ä¸ªå‡½æ•°</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__DELAY_H__</span><span class="token comment">//åˆ™å¼€å§‹å®šä¹‰</span></span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å£°æ˜</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nixie-c"><a href="#Nixie-c" class="headerlink" title="Nixie.c"></a>Nixie.c</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span><span class="token comment">//å› ä¸ºåœ¨å£°æ˜æ—¶ç”¨åˆ°äº†P0 P2è¿™ç§æ²¡æœ‰è¢«è¯´æ˜çš„é‡ï¼Œæ‰€ä»¥è¦å¼•å…¥è¿™ä¸ªå¤´æ–‡ä»¶è¯´æ˜</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Delay.h"</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> NixieTable<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x5B</span><span class="token punctuation">,</span><span class="token number">0x4F</span><span class="token punctuation">,</span><span class="token number">0x66</span><span class="token punctuation">,</span><span class="token number">0x6D</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x6F</span><span class="token punctuation">,</span><span class="token number">0x5E</span><span class="token punctuation">,</span><span class="token number">0x6E</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Location<span class="token punctuation">,</span>Number<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">switch</span><span class="token punctuation">(</span>Location<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//111-8</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//110-7</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P0<span class="token operator">=</span>NixieTable<span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P0 <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nixie-h"><a href="#Nixie-h" class="headerlink" title="Nixie.h"></a>Nixie.h</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__NIXIE_H__</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__NIXIE_H__</span></span><span class="token keyword">void</span> <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Location<span class="token punctuation">,</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨â€”â€”â€”â€”æœ€åˆçš„ç¬”è®°</title>
      <link href="/2022/10/02/ru-men-zui-chu-de-bi-ji/"/>
      <url>/2022/10/02/ru-men-zui-chu-de-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="2-1ç‚¹äº®ä¸€ä¸ªLED"><a href="#2-1ç‚¹äº®ä¸€ä¸ªLED" class="headerlink" title="2-1ç‚¹äº®ä¸€ä¸ªLED"></a>2-1ç‚¹äº®ä¸€ä¸ªLED</h1><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;INTRINS.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">;</span><span class="token function">_nop_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">129</span><span class="token punctuation">;</span>k <span class="token operator">=</span> <span class="token number">119</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>P2 <span class="token operator">=</span> <span class="token number">0xFE</span><span class="token punctuation">;</span><span class="token comment">//å¯¹åº”1111 1110å³åªæœ‰D1äº®</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äº®äº†åç­‰500ms</span>P2 <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span><span class="token comment">//å¯¹åº” 1111 1111 å³éƒ½ä¸äº®</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸äº®åç­‰500ms</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/25.png" alt="LEDæ¨¡å—"></p><p>è§£é‡Šï¼šä¸ºä»€ä¹ˆ1ä¸äº®0äº®ï¼Œæ˜¯å› ä¸ºLEDä¸€ç«¯æ¥äº†VCCé«˜ç”µå¹³ï¼Œåˆ™å¦ä¸€ç«¯åº”è¯¥ç»™ä½ç”µå¹³å³0ï¼Œæ‰æœ‰ç”µæµè¾“å‡º</p><h1 id="2-3æµæ°´ç¯"><a href="#2-3æµæ°´ç¯" class="headerlink" title="2-3æµæ°´ç¯"></a>2-3æµæ°´ç¯</h1><h2 id="â‘ "><a href="#â‘ " class="headerlink" title="â‘ "></a>â‘ </h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;REGX52.H&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;INTRINS.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">;</span><span class="token function">_nop_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">129</span><span class="token punctuation">;</span>k <span class="token operator">=</span> <span class="token number">119</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>P2 <span class="token operator">=</span> <span class="token number">0xFE</span><span class="token punctuation">;</span><span class="token comment">//1111 1110</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xFD</span><span class="token punctuation">;</span><span class="token comment">//1111 1101</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xFB</span><span class="token punctuation">;</span><span class="token comment">//1111 1011</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xF7</span><span class="token punctuation">;</span><span class="token comment">//1111 0111</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xEF</span><span class="token punctuation">;</span><span class="token comment">//1110 1111</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xDF</span><span class="token punctuation">;</span><span class="token comment">//1101 1111</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xBF</span><span class="token punctuation">;</span><span class="token comment">//1011 1111</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0x7F</span><span class="token punctuation">;</span><span class="token comment">//0111 1111</span><span class="token function">Delay500ms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="â‘¡"><a href="#â‘¡" class="headerlink" title="â‘¡"></a>â‘¡</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token comment">/**å¯¹whileå¾ªç¯çš„ç†è§£:è¿™ä¸ªDelay1msæ˜¯é’ˆå¯¹1msçš„ï¼Œå½“ä¸‹é¢ç¨‹åºéœ€è¦nä¸ª1msï¼Œå°±ä¼šå¾ªç¯næ¬¡1mså»¶æ—¶çš„ç¨‹åº*/</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>xms<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//ä¸Šé¢è‡ªå®šä¹‰å‡½æ•°</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>P2 <span class="token operator">=</span> <span class="token number">0xFE</span><span class="token punctuation">;</span><span class="token comment">//1111 1110</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xFD</span><span class="token punctuation">;</span><span class="token comment">//1111 1101</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xFB</span><span class="token punctuation">;</span><span class="token comment">//1111 1011</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xF7</span><span class="token punctuation">;</span><span class="token comment">//1111 0111</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xEF</span><span class="token punctuation">;</span><span class="token comment">//1110 1111</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xDF</span><span class="token punctuation">;</span><span class="token comment">//1101 1111</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0xBF</span><span class="token punctuation">;</span><span class="token comment">//1011 1111</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2 <span class="token operator">=</span> <span class="token number">0x7F</span><span class="token punctuation">;</span><span class="token comment">//0111 1111</span><span class="token function">Delay1ms</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="3-1ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDç¯äº®ç­"><a href="#3-1ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDç¯äº®ç­" class="headerlink" title="3-1ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDç¯äº®ç­"></a>3-1ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDç¯äº®ç­</h1><p><img src="/../../../../medias/blog_picture/51/26.png" alt="ç‹¬ç«‹æŒ‰é”®"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//P_3å¯¹åº”ç¬¬ä¸€ä¸ªç‹¬ç«‹æŒ‰é”®ï¼Œè¡¨ç¤ºæŒ‰ä¸‹è¯¥æŒ‰é”®æ—¶ï¼Œæ‰§è¡Œä¸‹é¢è¯­å¥</span><span class="token punctuation">{</span>P2_0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>P2_0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>xms<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœè¿˜æŒ‰ç€ï¼Œå°±ä¸æ‰§è¡Œä¸‹é¢çš„ï¼Œè¿›å…¥æ­»å¾ªç¯</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>P2_0 <span class="token operator">=</span> <span class="token operator">~</span>P2_0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token number">3.3</span>ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDæ˜¾ç¤ºäºŒè¿›åˆ¶â‘ <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> LEDNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//P2 1111 1111 (åˆå§‹åŒ–)</span>P2<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//P2æº¢å‡ºå˜ä¸º0000 0000</span>P2<span class="token operator">=</span><span class="token operator">~</span>P2<span class="token punctuation">;</span><span class="token comment">//å–å1111 1111</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>â‘¡<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> LEDNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LEDNum<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//åˆå§‹æ—¶LEDNumä¸º0000 0000ï¼Ÿ</span>P2<span class="token operator">=</span><span class="token operator">~</span>LEDNum<span class="token punctuation">;</span><span class="token comment">//å–å</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äº<strong>æŒ‰é”®æ¶ˆæŠ–ï¼Œæ£€æµ‹æ¾æ‰‹</strong>çš„ç†è§£ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//å¦‚æœæŒ‰äº†P3_1</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…ˆå»¶æ—¶20msï¼Œè·³è¿‡æŠ–åŠ¨é˜¶æ®µ(æ¶ˆæŠ–)</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœè¿˜æŒ‰ç€P3_1ï¼Œåˆ™è¿›å…¥whileçš„ç©ºå¾ªç¯ï¼Œæ²¡æœ‰ä»»ä½•æ‰§è¡Œä»»åŠ¡</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ¾å¼€æ‰‹åï¼Œè·³å‡ºwhileå¾ªç¯ï¼Œå†æ¬¡è¿›å…¥æŠ–åŠ¨é˜¶æ®µ(æ¶ˆæŠ–)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="3-4ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDä½ç§»"><a href="#3-4ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDä½ç§»" class="headerlink" title="3-4ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDä½ç§»"></a>3-4ç‹¬ç«‹æŒ‰é”®æ§åˆ¶LEDä½ç§»</h1><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> LEDNum<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>P2 <span class="token operator">=</span> <span class="token operator">~</span><span class="token number">0x01</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//æŠŠP2 =~0x01; æŒªè¿‡æ¥ä¹Ÿä¸€æ ·</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_1 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LEDNum<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//å®ç°æ¯æ¬¡å³ç§»ï¼Œ++å‡ æ¬¡å°±å³ç§»å‡ ä¸‹</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDNum <span class="token operator">&gt;=</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>LEDNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P2 <span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span>LEDNum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">if</span><span class="token punctuation">(</span>P3_0 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>P3_0 <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>LEDNum <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//å³æ­¤æ—¶äº®çš„ç¯ä¸ºD1ï¼ŒP2ä¸º0000 0001ï¼Œå½“num=7åï¼Œ0x01&lt;&lt;LEDNum&lt;==&gt;0000 0001çš„1å¾€å·¦ç§»åŠ¨7ä½ï¼Œå³1000 0000ï¼Œäº®çš„æ˜¯D8ï¼Œå·¦ç§»æˆåŠŸ</span><span class="token punctuation">{</span>LEDNum <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>LEDNum<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment">//å®ç°æ¯æ¬¡å·¦ç§»ï¼Œ++å‡ æ¬¡å°±å·¦ç§»å‡ ä¸‹</span><span class="token punctuation">}</span>P2 <span class="token operator">=</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">0x01</span><span class="token operator">&lt;&lt;</span>LEDNum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="4-1é™æ€æ•°ç ç®¡ä½ç§»"><a href="#4-1é™æ€æ•°ç ç®¡ä½ç§»" class="headerlink" title="4-1é™æ€æ•°ç ç®¡ä½ç§»"></a>4-1é™æ€æ•°ç ç®¡ä½ç§»</h1><p>å…±é˜´æï¼Œäº®çš„ä¸º1(å…±é˜´æâ€“é«˜ç”µå¹³)</p><p>1011 1110ä¸ºæ®µç (æ˜¾ç¤º6)</p><p>å…±é˜³æï¼Œäº®çš„ä¸º0(å…±é˜³æâ€“ä½ç”µå¹³)</p><p>æ®µç ä¸º0100 0001 </p><p>å…±é˜´æ:</p><p>å½“åªéœ€è¦äº®ç¬¬ä¸‰ä¸ªæ•°å­—æ—¶ï¼Œç¬¬124çš„å…±é˜´æå¤„è¿æ¥é«˜ç”µå¹³(ç»™1)ï¼Œè€Œç¬¬3çš„å…±é˜´æç»™0ï¼Œåˆ™åªæœ‰ç¬¬ä¸‰ä¸ªç¯ä¼šäº®ï¼Œè‡³äºæ€ä¹ˆäº®ï¼Œçœ‹ä¸Šé¢ä¸¤ä¸ªä¾‹å­</p><p>ps:å››ç»„A/B/Câ€¦.éƒ½æ¥åœ¨åŒä¸€ä¸ª1174211053é‚£é‡Œ(å…±ç”¨å¼•è„šï¼Œå››ä¸ªæ•°å­—åªèƒ½æ˜¯ä¸€æ ·çš„  )</p><p>74HC245ä¸ºåŒå‘æ•°æ®ç¼“å†²å™¨ï¼šVDDå’ŒGNDä¸ºç”µæºï¼ŒOEä¸ºèŠ¯ç‰‡ä½¿èƒ½ç«¯,A0ä¸B0å¯¹åº”â€¦.</p><p>DIRâ€“&gt;directionï¼Œæ•°æ®è¯»å–æ–¹å‘</p><p>å½“LEæ¥VCCæ—¶ï¼ŒA0ä¼ æ•°æ®ç»™B0</p><p>é«˜ç”µå¹³é©±åŠ¨èƒ½åŠ›å¼±ï¼Œä½ç”µå¹³é©±åŠ¨èƒ½åŠ›å¼ºï¼Œæ‰€ä»¥è¿™ä¸ªç¼“å†²å™¨å¯ä»¥å¢å¼ºä¿¡å·ï¼Œä½¿æ•°ç ç®¡æ›´äº®</p><p><strong>//ä»¥ä¸Šæ˜¯ä¹‹å‰æ²¡åœ¨typoraå†™çš„ç¬”è®°ï¼Œä¸å†åšè¿‡å¤šçš„è¡¥å……å’Œä¿®æ”¹</strong></p><h1 id="4-1é™æ€æ•°ç ç®¡ä½ç§»-1"><a href="#4-1é™æ€æ•°ç ç®¡ä½ç§»-1" class="headerlink" title="4-1é™æ€æ•°ç ç®¡ä½ç§»"></a>4-1é™æ€æ•°ç ç®¡ä½ç§»</h1><p><strong>ç›®çš„ï¼šå®ç°ç¬¬ä¸‰ä¸ªæ•°ç ç®¡äº®èµ·</strong></p><p><img src="/../../../../medias/blog_picture/51/27.png" alt="æ•°ç ç®¡"></p><p><strong>ç¬¬ä¸‰ä¸ªç¯</strong>å¯¹åº”çš„æ˜¯<strong>LED6</strong></p><p><img src="/../../../../medias/blog_picture/51/28.png" alt="138è¯‘ç å™¨"></p><p><strong>P2_4 P2_3 P2_2â€”â€“&gt;Y5â€”â€“&gt;LED6</strong></p><p>æ ¹æ®åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ï¼ŒY5çš„5è½¬ä¸ºäºŒè¿›åˆ¶æ˜¯101ï¼Œåˆ™æœ‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/../../../../medias/blog_picture/51/29.png" alt="æ•°ç ç®¡"></p><p>æ­¤æ—¶è¦è®©LED6äº®èµ·6ï¼Œåˆ™acdefgä¸º1(å…±é˜´æ)<strong>å› ä¸ºä»–ä»¬åé¢æ¥åˆ°äº†GND(ä½ç”µå¹³)ï¼Œè¦ç»™ä»–é«˜ç”µå¹³å¯¹åº”)<strong>ï¼Œå¯¹åº”åˆ°P0å£åˆ™æ˜¯(è¦</strong>ä»ä¸‹å¾€ä¸Š</strong>è¯»ï¼Œå³ä»<strong>P0_7</strong>è¯»åˆ°<strong>P0_0</strong>)<strong>0111 1101</strong>äºŒè¿›åˆ¶è½¬åå…­è¿›åˆ¶ï¼Œåˆ™ä¸º0x7D</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//ä¸‹é¢çš„ä¸‰æ­¥æ“ä½œæ˜¯è®©P2æ¥å£å¯¹åº”åˆ°Y5ï¼Œâ€œ101â€æ˜¯å› ä¸º5(10è¿›åˆ¶)è½¬ä¸ºäºŒè¿›åˆ¶æ—¶å¯¹åº”çš„å€¼æ˜¯101</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//P0è¿™çœ‹ä»£ç å‰é¢çš„è§£é‡Š</span>P0 <span class="token operator">=</span> <span class="token number">0x7D</span><span class="token punctuation">;</span><span class="token comment">//ä¸ºäº†è®©ç¬¬ä¸‰ä¸ªä½ç½®çš„ç¯äº®èµ·</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨æ•°ç»„å®ç°"><a href="#ä½¿ç”¨æ•°ç»„å®ç°" class="headerlink" title="ä½¿ç”¨æ•°ç»„å®ç°"></a>ä½¿ç”¨æ•°ç»„å®ç°</h2><p><code>å¯¹äºNumber</code></p><p><img src="/../../../../medias/blog_picture/51/30.png" alt="æ˜¾ç¤ºçš„å­—æ¯è½¬ä¸º2è¿›åˆ¶æ¨ç®—"></p><p><strong>é™æ€æ˜¾ç¤º(åªèƒ½æœ‰ä¸€ä¸ªæ•°å­—)</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> NixieTable<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x5B</span><span class="token punctuation">,</span><span class="token number">0x4F</span><span class="token punctuation">,</span><span class="token number">0x66</span><span class="token punctuation">,</span><span class="token number">0x6D</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x6F</span><span class="token punctuation">,</span><span class="token number">0x5E</span><span class="token punctuation">,</span><span class="token number">0x6E</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//0~9--&gt;0~9 10-d 11-y</span><span class="token comment">//è‡ªå®šä¹‰å‡½æ•°</span><span class="token keyword">void</span> <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Location<span class="token punctuation">,</span>Number<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">switch</span><span class="token punctuation">(</span>Location<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//å•ç‰‡æœºä¸Šç¬¬ä¸€ä¸ªä½ç½®çš„ç¯å¯¹åº”çš„æ˜¯LED8</span>        <span class="token comment">//è¿™é‡Œç”¨138è¯‘ç å™¨å®ç°ï¼Œå–å€¼é¡ºåºCBA</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//111-8-ç¬¬ä¸€ç›ç¯</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//110-7-ç¬¬äºŒç›ç¯</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P0<span class="token operator">=</span>NixieTable<span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//åœ¨è¯¥ä½ç½®ä¸Šäº®èµ·çš„æ•°å­—</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä½ç½®(ç¬¬å‡ ä¸ªæ•°ç ç®¡)ï¼Œæ•°å­—(å¦‚æœæ˜¯å­—æ¯çš„è¯ï¼Œé‚£å°±æ˜¯æ‰€è¦çš„å­—æ¯å¯¹åº”æ•°ç»„çš„ä½ç½®çš„ä½æ¬¡)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‰ä½å¯¹åº”138è¯‘ç å™¨çš„ABCå£</p><p><img src="/../../../../medias/blog_picture/51/31.png" alt="138è¯‘ç å™¨"></p><p><strong>åŠ¨æ€æ˜¾ç¤º(å¤šä¸ªæ•°å­—ï¼Œéœ€è¦æ¶ˆå½±)</strong></p><p>æ¶ˆå½±</p><p>ä½é€‰ æ®µé€‰ ä½é€‰ æ®µé€‰**(è¿›è¡Œä¸‹ä¸€æ¬¡ä½é€‰æ—¶ï¼Œæ®µé€‰æ²¡æœ‰æ”¹å˜)**</p><p>æ”¹æˆï¼šä½é€‰ æ®µé€‰ <strong>æ¸…é›¶</strong> ä½é€‰ æ®µé€‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;REGX52.H&gt;</span></span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> NixieTable<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x5B</span><span class="token punctuation">,</span><span class="token number">0x4F</span><span class="token punctuation">,</span><span class="token number">0x66</span><span class="token punctuation">,</span><span class="token number">0x6D</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x6F</span><span class="token punctuation">,</span><span class="token number">0x5E</span><span class="token punctuation">,</span><span class="token number">0x6E</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//0~9--&gt;0~9 10-d 11-y</span><span class="token keyword">void</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> xms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHz</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>xms<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> Location<span class="token punctuation">,</span>Number<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">switch</span><span class="token punctuation">(</span>Location<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//1st light--&gt; LED8</span><span class="token comment">//8th light--&gt; LED1</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>P2_4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>P2_3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> P2_2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>P0<span class="token operator">=</span>NixieTable<span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æŠŠè¿™å¥è¯åˆ æ‰çš„è¯å°±æ²¡é‚£ä¹ˆäº®ï¼Œåº”è¯¥æ˜¯è®©ä¸€ä¸ªä½ç½®ä¸Šçš„æ•°æ®ç®¡äº®å®Œ1msåè¿…é€Ÿæ¸…é›¶ï¼Œç„¶åå†äº®ä¸‹ä¸€ä¸ªï¼Œä¸‰ä¸ªç®¡éƒ½äº®å®Œåªéœ€è¦3msï¼Œä¸”ä¸­é—´æœ‰æ¸…é›¶è¿‡ç¨‹ï¼Œæ‰€ä»¥è§†è§‰ä¸Šçœ‹åˆ°çš„æ—¶ä¸‰ç®¡ç¯åŒæ—¶äº®</span>P0 <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span><span class="token comment">//æ¸…é›¶è¿‡ç¨‹ï¼Œä¸è®©åˆ«çš„æ•°ç ç®¡çäº®</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">Nixie</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 51å•ç‰‡æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51å•ç‰‡æœº </tag>
            
            <tag> å¤§äº‘å±‹è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
